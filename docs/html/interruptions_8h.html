<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Firmware documentation - Master: interruptions.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_CP.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Firmware documentation - Master
   &#160;<span id="projectnumber">v. 6.1.5</span>
   </div>
   <div id="projectbrief">Centro E.Piaggio</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">interruptions.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interruptions header file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;device.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for interruptions.h:</div>
<div class="dyncontent">
<div class="center"><img src="interruptions_8h__incl.png" border="0" usemap="#interruptions_8h" alt=""/></div>
<map name="interruptions_8h" id="interruptions_8h">
<area shape="rect" id="node2" href="device_8h_source.html" title="device.h" alt="" coords="23,80,92,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="interruptions_8h__dep__incl.png" border="0" usemap="#interruptions_8hdep" alt=""/></div>
<map name="interruptions_8hdep" id="interruptions_8hdep">
<area shape="rect" id="node2" href="command__processing_8c.html" title="Command processing functions. " alt="" coords="5,80,165,107"/>
<area shape="rect" id="node3" href="interruptions_8c.html" title="Interruption handling and firmware core functions. " alt="" coords="189,80,293,107"/>
<area shape="rect" id="node4" href="main_8c.html" title="Firmware main file. " alt="" coords="317,80,379,107"/>
</map>
</div>
</div>
<p><a href="interruptions_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Interruptions</div></td></tr>
<tr class="memitem:a7e24af8c83537b0441877bf0f00dd30a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a7e24af8c83537b0441877bf0f00dd30a">CY_ISR_PROTO</a> (ISR_RS485_RX_ExInterrupt)</td></tr>
<tr class="separator:a7e24af8c83537b0441877bf0f00dd30a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a212cae8995d67d612c236fb54a4d29dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a212cae8995d67d612c236fb54a4d29dc">CY_ISR_PROTO</a> (ISR_WATCHDOG_Handler)</td></tr>
<tr class="separator:a212cae8995d67d612c236fb54a4d29dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">General function scheduler</div></td></tr>
<tr class="memitem:a39df971c4e9f194be50c54dfd7aeabfe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a39df971c4e9f194be50c54dfd7aeabfe">function_scheduler</a> (void)</td></tr>
<tr class="separator:a39df971c4e9f194be50c54dfd7aeabfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Encoder reading function</div></td></tr>
<tr class="memitem:a02aa2fd33f7b2f645490b9c7642084d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a02aa2fd33f7b2f645490b9c7642084d7">encoder_reading</a> (const uint8 index)</td></tr>
<tr class="separator:a02aa2fd33f7b2f645490b9c7642084d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Motor control function</div></td></tr>
<tr class="memitem:a8c7c487a5a127331b0de53443e3ca964"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a8c7c487a5a127331b0de53443e3ca964">motor_control</a> ()</td></tr>
<tr class="separator:a8c7c487a5a127331b0de53443e3ca964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Analog readings</div></td></tr>
<tr class="memitem:a00a8d34962a63161405e5d7785b9625e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a00a8d34962a63161405e5d7785b9625e">analog_read_end</a> ()</td></tr>
<tr class="separator:a00a8d34962a63161405e5d7785b9625e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Interrupt manager</div></td></tr>
<tr class="memitem:a9790811526002d99b25a814afd02cbae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a9790811526002d99b25a814afd02cbae">interrupt_manager</a> ()</td></tr>
<tr class="separator:a9790811526002d99b25a814afd02cbae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Utility functions</div></td></tr>
<tr class="memitem:ab7b287cf5df2ea548297b951be2f20d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#ab7b287cf5df2ea548297b951be2f20d4">pwm_limit_search</a> ()</td></tr>
<tr class="separator:ab7b287cf5df2ea548297b951be2f20d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e92908805632dc8cab2936d89bb3ba1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a4e92908805632dc8cab2936d89bb3ba1">overcurrent_control</a> ()</td></tr>
<tr class="separator:a4e92908805632dc8cab2936d89bb3ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e10d86a40e34fc094b817f8e40b30e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a8e10d86a40e34fc094b817f8e40b30e0">command_slave</a> ()</td></tr>
<tr class="separator:a8e10d86a40e34fc094b817f8e40b30e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71cb50f2e34246bbedd5918da1b6ef5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interruptions_8h.html#a71cb50f2e34246bbedd5918da1b6ef5e">deactivate_slave</a> ()</td></tr>
<tr class="separator:a71cb50f2e34246bbedd5918da1b6ef5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interruptions header file. </p>
<dl class="section date"><dt>Date</dt><dd>Feb 06, 2012 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>qbrobotics </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(C) 2012-2016 qbrobotics. All rights reserved. </dd>
<dd>
(C) 2017 Centro "E.Piaggio". All rights reserved. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a00a8d34962a63161405e5d7785b9625e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00a8d34962a63161405e5d7785b9625e">&#9670;&nbsp;</a></span>analog_read_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void analog_read_end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function executes and terminates the analog readings. </p>

</div>
</div>
<a id="a8e10d86a40e34fc094b817f8e40b30e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e10d86a40e34fc094b817f8e40b30e0">&#9670;&nbsp;</a></span>command_slave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void command_slave </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to create a package and send it to another device, only if the actual board is in master mode. </p>

</div>
</div>
<a id="a7e24af8c83537b0441877bf0f00dd30a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e24af8c83537b0441877bf0f00dd30a">&#9670;&nbsp;</a></span>CY_ISR_PROTO() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CY_ISR_PROTO </td>
          <td>(</td>
          <td class="paramtype">ISR_RS485_RX_ExInterrupt&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This interruption sets a flag to let the firmware know that a communication interruption is pending and needs to be handled. The interruption will be handled in predefined moments during the firmware execution. When this interruption is handled, it unpacks the package received on the RS485 communication bus. </p>

</div>
</div>
<a id="a212cae8995d67d612c236fb54a4d29dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a212cae8995d67d612c236fb54a4d29dc">&#9670;&nbsp;</a></span>CY_ISR_PROTO() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CY_ISR_PROTO </td>
          <td>(</td>
          <td class="paramtype">ISR_WATCHDOG_Handler&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This interruption sets a flag to let the firmware know that a watchdog interruption is pending and needs to be handled. The interrpution will be handled in predefined moments during the firmware execution. When this interruption is handled, it deactivates the board because the watchdog timer has expired. </p>

</div>
</div>
<a id="a71cb50f2e34246bbedd5918da1b6ef5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71cb50f2e34246bbedd5918da1b6ef5e">&#9670;&nbsp;</a></span>deactivate_slave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void deactivate_slave </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to create a package to deactivate motors on another device, only if the actual board is in master mode. </p>

</div>
</div>
<a id="a02aa2fd33f7b2f645490b9c7642084d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02aa2fd33f7b2f645490b9c7642084d7">&#9670;&nbsp;</a></span>encoder_reading()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void encoder_reading </td>
          <td>(</td>
          <td class="paramtype">const uint8&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This functions reads the value from the encoder pointed by index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>The number of the encoder that must be read. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a39df971c4e9f194be50c54dfd7aeabfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39df971c4e9f194be50c54dfd7aeabfe">&#9670;&nbsp;</a></span>function_scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void function_scheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function schedules the other functions in an order that optimizes the controller usage. </p>

</div>
</div>
<a id="a9790811526002d99b25a814afd02cbae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9790811526002d99b25a814afd02cbae">&#9670;&nbsp;</a></span>interrupt_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void interrupt_manager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is called in predefinited moments during firmware execution in order to unpack the received package. </p>

</div>
</div>
<a id="a8c7c487a5a127331b0de53443e3ca964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7c487a5a127331b0de53443e3ca964">&#9670;&nbsp;</a></span>motor_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_control </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function controls the motor direction and velocity, depending on the input and control modality set. </p>

</div>
</div>
<a id="a4e92908805632dc8cab2936d89bb3ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e92908805632dc8cab2936d89bb3ba1">&#9670;&nbsp;</a></span>overcurrent_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void overcurrent_control </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function increases or decreases the pwm value, depending on the current absorbed by the motor. </p>

</div>
</div>
<a id="ab7b287cf5df2ea548297b951be2f20d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b287cf5df2ea548297b951be2f20d4">&#9670;&nbsp;</a></span>pwm_limit_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pwm_limit_search </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function scales the pwm value of the motor, depending on the power supply voltage, in order to not make the motor wind too fast. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
