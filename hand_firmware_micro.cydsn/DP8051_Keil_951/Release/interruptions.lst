C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE INTERRUPTIONS
OBJECT MODULE PLACED IN .\DP8051_Keil_951\Release\interruptions.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\4.4\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -interruptions.c NOIV LARGE MODDP2 OMF2 VB(1) NOIP INCDIR(.,Generated_Source\PSoC3) FF(3) DB DF(NDEBUG) WL(2) PR(.\DP8051
                    -_Keil_951\Release/interruptions.lst) CD OT(8,SPEED) OJ(.\DP8051_Keil_951\Release\interruptions.obj)

line level    source

*** MESSAGE C286 IN LINE 0 OF (null): license limits optimization to level 5
   1          // ----------------------------------------------------------------------------
   2          // BSD 3-Clause License
   3          
   4          // Copyright (c) 2016, qbrobotics
   5          // Copyright (c) 2017, Centro "E.Piaggio"
   6          // All rights reserved.
   7          
   8          // Redistribution and use in source and binary forms, with or without
   9          // modification, are permitted provided that the following conditions are met:
  10          
  11          // * Redistributions of source code must retain the above copyright notice, this
  12          //   list of conditions and the following disclaimer.
  13          
  14          // * Redistributions in binary form must reproduce the above copyright notice,
  15          //   this list of conditions and the following disclaimer in the documentation
  16          //   and/or other materials provided with the distribution.
  17          
  18          // * Neither the name of the copyright holder nor the names of its
  19          //   contributors may be used to endorse or promote products derived from
  20          //   this software without specific prior written permission.
  21          
  22          // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  23          // AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  24          // IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  25          // DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  26          // FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  27          // DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  28          // SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  29          // CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  30          // OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  31          // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  32          // POSSIBILITY OF SUCH DAMAGE.
  33          // ----------------------------------------------------------------------------
  34          
  35          /**
  36          * \file         interruptions.c
  37          *
  38          * \brief        Interruption handling and firmware core functions
  39          * \date         Feb 14th, 2023
  40          * \author       _Centro "E.Piaggio"_
  41          * \copyright    (C) 2012-2016 qbrobotics. All rights reserved.
  42          * \copyright    (C) 2017-2023 Centro "E.Piaggio". All rights reserved.
  43          */
  44          
  45          
  46          //=================================================================     includes
  47          #include <interruptions.h>
  48          #include <command_processing.h>
  49          #include <globals.h>
  50          #include <utils.h>
  51          
  52          
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 2   

  53          //==============================================================================
  54          //                                                            RS485 RX INTERRUPT
  55          //==============================================================================
  56          // Processing RS-485 data frame:
  57          //
  58          // - 0:     Waits for beginning characters
  59          // - 1:     Waits for ID;
  60          // - 2:     Data length;
  61          // - 3:     Receive all bytes;
  62          // - 4:     Wait for another device end of transmission;
  63          //
  64          //==============================================================================
  65          
  66          CY_ISR(ISR_RS485_RX_ExInterrupt) {
  67   1      
  68   1          // Set RS485 flag
  69   1          
  70   1          interrupt_flag = TRUE;
  71   1           
  72   1      }
  73          
  74          //==============================================================================
  75          //                                                             INTERRUPT MANAGER
  76          //==============================================================================
  77          // Manage interrupt from RS485 
  78          //==============================================================================
  79          // Processing RS-485 data frame:
  80          //
  81          // - WAIT_START:    Waits for beginning characters;
  82          // - WAIT_ID:       Waits for ID;
  83          // - WAIT_LENGTH:   Data length;
  84          // - RECEIVE:       Receive all bytes;
  85          // - UNLOAD:        Wait for another device end of transmission;
  86          //
  87          //==============================================================================
  88          
  89          void interrupt_manager(){
  90   1      
  91   1          
  92   1          //===========================================     local variables definition
  93   1      
  94   1          static uint8 CYDATA state = WAIT_START;                      // state
  95   1          
  96   1          //------------------------------------------------- local data packet
  97   1          static uint8 CYDATA data_packet_index;
  98   1          static uint8 CYDATA data_packet_length;
  99   1          static uint8 data_packet_buffer[128];                     
 100   1          static uint8 CYDATA rx_queue[3];                    // last 2 bytes received
 101   1          //-------------------------------------------------
 102   1      
 103   1          uint8 CYDATA    rx_data;                            // RS485 UART rx data
 104   1          CYBIT           rx_data_type;                       // my id?
 105   1          uint8 CYDATA    package_count = 0;                     
 106   1      
 107   1          //======================================================     receive routine
 108   1          
 109   1          // Get data until buffer is not empty 
 110   1          
 111   1          while(UART_RS485_GetRxBufferSize() && (package_count < 6)){  
 112   2              // 6 - estimated maximum number of packets we can read without blocking firmware execution
 113   2              
 114   2              // Get next char
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 3   

 115   2              rx_data = UART_RS485_GetChar();
 116   2              
 117   2              switch (state) {
 118   3                  //-----     wait for frame start     -------------------------------
 119   3                  case WAIT_START:
 120   3                  
 121   3                      rx_queue[0] = rx_queue[1];
 122   3                      rx_queue[1] = rx_queue[2];
 123   3                      rx_queue[2] = rx_data;
 124   3                      
 125   3                      // Check for header configuration package
 126   3                      if ((rx_queue[1] == 58) && (rx_queue[2] == 58)) {
 127   4                          rx_queue[0] = 0;
 128   4                          rx_queue[1] = 0;
 129   4                          rx_queue[2] = 0;
 130   4                          state       = WAIT_ID;                    
 131   4                      }else
 132   3                          if ((rx_queue[0] == 63) &&      //ASCII - ?
 133   3                              (rx_queue[1] == 13) &&      //ASCII - CR
 134   3                              (rx_queue[2] == 10))        //ASCII - LF)
 135   3                              infoGet(INFO_ALL);
 136   3                      break;
 137   3      
 138   3                  //-----     wait for id     ----------------------------------------
 139   3                  case  WAIT_ID:
 140   3      
 141   3                      // packet is for my ID or is broadcast
 142   3                      if (rx_data == c_mem.id || rx_data == 0 || rx_data == c_mem.SH_ID)
 143   3                          rx_data_type = FALSE;
 144   3                      else                //packet is for others
 145   3                          rx_data_type = TRUE;
 146   3                      
 147   3                      data_packet_length = 0;
 148   3                      state = WAIT_LENGTH;
 149   3                      break;
 150   3      
 151   3                  //-----     wait for length     ------------------------------------
 152   3                  case  WAIT_LENGTH:
 153   3      
 154   3       
 155   3                      data_packet_length = rx_data;
 156   3                      // check validity of pack length
 157   3                      if (data_packet_length <= 1) {
 158   4                          data_packet_length = 0;
 159   4                          state = WAIT_START;
 160   4                      } else if (data_packet_length > 128) {
 161   4                          data_packet_length = 0;
 162   4                          state = WAIT_START;
 163   4                      } else {
 164   4                          data_packet_index = 0;
 165   4                          
 166   4                          if(rx_data_type == FALSE)
 167   4                              state = RECEIVE;          // packet for me or broadcast
 168   4                          else
 169   4                              state = UNLOAD;           // packet for others
 170   4                      }
 171   3                      break;
 172   3      
 173   3                  //-----     receiving     -------------------------------------------
 174   3                  case RECEIVE:
 175   3      
 176   3                      data_packet_buffer[data_packet_index] = rx_data;
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 4   

 177   3                      data_packet_index++;
 178   3                      
 179   3                      // check end of transmission
 180   3                      if (data_packet_index >= data_packet_length) {
 181   4                          // verify if frame ID corresponded to the device ID
 182   4                          if (rx_data_type == FALSE) {
 183   5                              // copying data from buffer to global packet
 184   5                              memcpy(g_rx.buffer, data_packet_buffer, data_packet_length);
 185   5                              g_rx.length = data_packet_length;
 186   5                              g_rx.ready  = 1;
 187   5                      
 188   5                              commProcess();
 189   5                          }
 190   4                          
 191   4                          data_packet_index  = 0;
 192   4                          data_packet_length = 0;
 193   4                          state = WAIT_START;
 194   4                          package_count++;
 195   4                      
 196   4                      }
 197   3                      break;
 198   3      
 199   3                  //-----     other device is receving     ---------------------------
 200   3                  case UNLOAD:
 201   3                      if (!(--data_packet_length)) {
 202   4                          data_packet_index  = 0;
 203   4                          data_packet_length = 0;
 204   4                          RS485_CTS_Write(1);
 205   4                          RS485_CTS_Write(0);
 206   4                          state              = WAIT_START;
 207   4                          package_count++;
 208   4                      }
 209   3                      break;
 210   3              }
 211   2          }
 212   1      }
 213          //==============================================================================
 214          //                                                            FUNCTION SCHEDULER
 215          //==============================================================================
 216          // Call all the function with the right frequency
 217          //==============================================================================
 218          // Base frequency 1000 Hz
 219          //==============================================================================
 220          
 221          void function_scheduler(void) {
 222   1       
 223   1          static uint16 counter_calibration = DIV_INIT_VALUE;
 224   1      
 225   1          timer_value0 = (uint32)MY_TIMER_ReadCounter();
 226   1      
 227   1          // Start ADC Conversion, SOC = 1
 228   1      
 229   1          ADC_SOC_Write(0x01); 
 230   1          
 231   1          // Check Interrupt 
 232   1      
 233   1          if (interrupt_flag){
 234   2              interrupt_flag = FALSE;
 235   2              interrupt_manager();
 236   2          }
 237   1      
 238   1          //---------------------------------- Control Motor
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 5   

 239   1         
 240   1          motor_control();
 241   1      
 242   1          // Check Interrupt 
 243   1      
 244   1          if (interrupt_flag){
 245   2              interrupt_flag = FALSE;
 246   2              interrupt_manager();
 247   2          }
 248   1      
 249   1          //---------------------------------- Read conversion buffer - LOCK function
 250   1      
 251   1          analog_read_end();
 252   1      
 253   1          if (interrupt_flag){
 254   2              interrupt_flag = FALSE;
 255   2              interrupt_manager();
 256   2          }
 257   1          
 258   1          //---------------------------------- Master Mode
 259   1            
 260   1          if(master_mode){
 261   2              
 262   2              if (c_mem.is_myo2_master){
 263   3                  
 264   3                  // Rest position check (only if Master mode is enabled)
 265   3                  if (c_mem.rest_position_flag == TRUE){
 266   4                      if (counter_calibration == CALIBRATION_DIV) {
 267   5                          
 268   5                              // Read Measure (valid since this routine is enabled only in Master mode)
 269   5                              if (c_mem.is_force_fb_present || c_mem.is_proprio_fb_present){
 270   6                                  curr_pos_res = SH_current_position;
 271   6                              } 
 272   5                              else {
 273   6                                  curr_pos_res = (int32)commReadMeasFromSH();
 274   6                              }
 275   5                                  
 276   5      
 277   5                              check_rest_position();
 278   5                              counter_calibration = 0;
 279   5                      }
 280   4                      counter_calibration++;
 281   4      
 282   4                      // Check Interrupt     
 283   4                      if (interrupt_flag){
 284   5                          interrupt_flag = FALSE;
 285   5                          interrupt_manager();
 286   5                      }
 287   4                  }
 288   3                  
 289   3                  drive_SH();  
 290   3                  
 291   3                  // Check Interrupt     
 292   3                  if (interrupt_flag){
 293   4                      interrupt_flag = FALSE;
 294   4                      interrupt_manager();
 295   4                  }
 296   3              }
 297   2                      
 298   2              if (c_mem.is_force_fb_present){
 299   3                  
 300   3                  if (c_mem.is_proprio_fb_present && c_mem.ForceF_ID == c_mem.ProprioF_ID){
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 6   

 301   4                      drive_force_proprio_fb();
 302   4                  }
 303   3                  else {
 304   4                      drive_force_fb(); 
 305   4                  }
 306   3                  
 307   3                  // Check Interrupt     
 308   3                  if (interrupt_flag){
 309   4                      interrupt_flag = FALSE;
 310   4                      interrupt_manager();
 311   4                  }
 312   3                  
 313   3              }
 314   2              
 315   2              if (c_mem.is_proprio_fb_present){
 316   3                  
 317   3                  if (!(c_mem.is_force_fb_present && c_mem.ForceF_ID == c_mem.ProprioF_ID)) {
 318   4                      drive_proprio_fb();
 319   4                  }
 320   3                  
 321   3                  // Check Interrupt     
 322   3                  if (interrupt_flag){
 323   4                      interrupt_flag = FALSE;
 324   4                      interrupt_manager();
 325   4                  }
 326   3              }
 327   2              
 328   2              if (c_mem.is_vibrotactile_fb_present){
 329   3                  
 330   3                  if (!(c_mem.is_vibrotactile_fb_present)) {
 331   4                      drive_vibrotactile_fb();
 332   4                  }
 333   3                  
 334   3                  // Check Interrupt     
 335   3                  if (interrupt_flag){
 336   4                      interrupt_flag = FALSE;
 337   4                      interrupt_manager();
 338   4                  }
 339   3              }
 340   2          }
 341   1                  
 342   1          // Check Interrupt 
 343   1          
 344   1          if (interrupt_flag){
 345   2              interrupt_flag = FALSE;
 346   2              interrupt_manager();
 347   2          }
 348   1      
 349   1          //---------------------------------- Calibration 
 350   1      
 351   1          // Divider 10, freq = 500 Hz
 352   1          if (calib.enabled == TRUE) {
 353   2              if (counter_calibration == CALIBRATION_DIV) {
 354   3                  calibration();
 355   3                  counter_calibration = 0;
 356   3              }
 357   2              counter_calibration++;
 358   2          }
 359   1      
 360   1          // Check Interrupt 
 361   1          
 362   1          if (interrupt_flag){
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 7   

 363   2              interrupt_flag = FALSE;
 364   2              interrupt_manager();
 365   2          }
 366   1          
 367   1          
 368   1          //---------------------------------- Update States
 369   1          
 370   1          // Load k-1 state
 371   1          memcpy( &g_measOld, &g_meas, sizeof(g_meas) );
 372   1          memcpy( &g_refOld, &g_ref, sizeof(g_ref) );
 373   1      
 374   1          // Load k+1 state
 375   1          memcpy( &g_ref, &g_refNew, sizeof(g_ref) );
 376   1      
 377   1          if (interrupt_flag){
 378   2              interrupt_flag = FALSE;
 379   2              interrupt_manager();
 380   2          }
 381   1      
 382   1          timer_value = (uint32)MY_TIMER_ReadCounter();
 383   1          MY_TIMER_WriteCounter(5000000);
 384   1      
 385   1      }
 386          
 387          //==============================================================================
 388          //                                                                MOTORS CONTROL
 389          //==============================================================================
 390          
 391          void motor_control() {
 392   1      
 393   1          int32 CYDATA handle_value;
 394   1      
 395   1          int32 CYDATA err_emg_1, err_emg_2;
 396   1          float CYDATA joy_perc;
 397   1      
 398   1          // Static Variables
 399   1          static uint8 current_emg = 0;   // 0 NONE
 400   1                                          // 1 EMG 1
 401   1                                          // 2 EMG 2
 402   1                                          // wait for both to get down
 403   1      
 404   1          err_emg_1 = g_meas.emg[0] - c_mem.emg_threshold[0];
 405   1          err_emg_2 = g_meas.emg[1] - c_mem.emg_threshold[1];
 406   1          
 407   1          // =========================== POSITION INPUT ==============================
 408   1          switch(c_mem.input_mode) {
 409   2      
 410   2              case INPUT_MODE_ENCODER3:
 411   2      
 412   2                  if (master_mode) {
 413   3                      // The only attached encoder is the handle lever
 414   3                      handle_value = g_meas.pos[0] * c_mem.motor_handle_ratio;
 415   3                  }
 416   2                  else {
 417   3                      // Like other firmwares working
 418   3                      // Calculate handle value based on position of handle in the
 419   3                      // sensor chain and multiplication factor between handle and motor position
 420   3                      handle_value = 0;
 421   3                  }
 422   2      
 423   2                  // Read handle and use it as reference for the motor
 424   2                  if (((handle_value - g_ref.pos[0]) > c_mem.max_step_pos) && (c_mem.max_step_pos != 0))
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 8   

 425   2                      g_ref.pos[0] += c_mem.max_step_pos;
 426   2                  else {
 427   3                      if (((handle_value - g_ref.pos[0]) < c_mem.max_step_neg) && (c_mem.max_step_neg != 0))
 428   3                          g_ref.pos[0] += c_mem.max_step_neg;
 429   3                      else
 430   3                          g_ref.pos[0] = handle_value;
 431   3                  }
 432   2                  break;
 433   2      
 434   2              case INPUT_MODE_EMG_PROPORTIONAL:
 435   2                  if (err_emg_1 > 0)
 436   2                      g_ref.pos[0] = (err_emg_1 * g_mem.pos_lim_sup[0]) / (1024 - c_mem.emg_threshold[0]);
 437   2                  else
 438   2                      g_ref.pos[0] = 0;
 439   2                  break;
 440   2      
 441   2              case INPUT_MODE_EMG_INTEGRAL:
 442   2                  g_ref.pos[0] = g_refOld.pos[0];
 443   2                  if (err_emg_1 > 0) {
 444   3                      g_ref.pos[0] = g_refOld.pos[0] + (err_emg_1 * (int)g_mem.emg_speed * 2) / (1024 - c_mem.em
             -g_threshold[0]);
 445   3                  }
 446   2                  if (err_emg_2 > 0) {
 447   3                      g_ref.pos[0] = g_refOld.pos[0] - (err_emg_2 * (int)g_mem.emg_speed * 2) / (1024 - c_mem.em
             -g_threshold[1]);
 448   3                  }
 449   2                  break;
 450   2      
 451   2              case INPUT_MODE_EMG_FCFS:
 452   2                  g_ref.pos[0] = g_refOld.pos[0];
 453   2                  switch (current_emg) {
 454   3                      case 0:
 455   3                          // Look for the first EMG passing the threshold
 456   3                          if (err_emg_1 > 0) {
 457   4                              current_emg = 1;
 458   4                              break;
 459   4                          }
 460   3                          if (err_emg_2 > 0) {
 461   4                              current_emg = 2;
 462   4                              break;
 463   4                          }
 464   3                          break;
 465   3      
 466   3                      case 1:
 467   3                          // EMG 1 is first
 468   3                          if (err_emg_1 < 0) {
 469   4                              current_emg = 0;
 470   4                              break;
 471   4                          }
 472   3                          g_ref.pos[0] = g_refOld.pos[0] + (err_emg_1 * g_mem.emg_speed * 2) / (1024 - c_mem.emg
             -_threshold[0]);
 473   3                          break;
 474   3      
 475   3                      case 2:
 476   3                          // EMG 2 is first
 477   3                          if (err_emg_2 < 0) {
 478   4                              current_emg = 0;
 479   4                              break;
 480   4                          }
 481   3                          g_ref.pos[0] = g_refOld.pos[0] - (err_emg_2 * g_mem.emg_speed * 2) / (1024 - c_mem.emg
             -_threshold[1]);
 482   3                          break;
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 9   

 483   3      
 484   3                      default:
 485   3                          break;
 486   3                  }
 487   2      
 488   2                  break;
 489   2      
 490   2              case INPUT_MODE_EMG_FCFS_ADV:
 491   2                  g_ref.pos[0] = g_refOld.pos[0];
 492   2                  switch (current_emg) {
 493   3                      // Look for the first EMG passing the threshold
 494   3                      case 0:
 495   3                          if (err_emg_1 > 0) {
 496   4                              current_emg = 1;
 497   4                              break;
 498   4                          }
 499   3                          if (err_emg_2 > 0) {
 500   4                              current_emg = 2;
 501   4                              break;
 502   4                          }
 503   3                          break;
 504   3      
 505   3                      // EMG 1 is first
 506   3                      case 1:
 507   3                          // If both signals are under threshold go back to status 0
 508   3                          if ((err_emg_1 < 0) && (err_emg_2 < 0)) {
 509   4                              current_emg = 0;
 510   4                              break;
 511   4                          }
 512   3                          // but if the current signal come back over threshold, continue using it
 513   3                          if (err_emg_1 > 0) 
 514   3                              g_ref.pos[0] = g_refOld.pos[0] + (err_emg_1 * g_mem.emg_speed << 2) / (1024 - c_me
             -m.emg_threshold[0]);
 515   3                          
 516   3                          break;
 517   3      
 518   3                      // EMG 2 is first
 519   3                      case 2:
 520   3                          // If both signals are under threshold go back to status 0
 521   3                          if ((err_emg_1 < 0) && (err_emg_2 < 0)) {
 522   4                              current_emg = 0;
 523   4                              break;
 524   4                          }
 525   3                          // but if the current signal come back over threshold, continue using it
 526   3                          if (err_emg_2 > 0) {
 527   4                              g_ref.pos[0] = g_refOld.pos[0] - (err_emg_2 * c_mem.emg_speed << 2) / (1024 - c_me
             -m.emg_threshold[1]);
 528   4                          }
 529   3                          break;
 530   3      
 531   3                      default:
 532   3                          break;
 533   3                  }
 534   2        
 535   2                  break;
 536   2                  
 537   2              case INPUT_MODE_JOYSTICK:
 538   2                  
 539   2                  joy_perc = (float)(g_meas.joystick[0])/((float)c_mem.joystick_gain/2);            
 540   2                  g_ref.pos[0] = g_refOld.pos[0] + c_mem.joystick_closure_speed * joy_perc;         
 541   2              
 542   2                  break;
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 10  

 543   2              default:
 544   2                  break;
 545   2          }
 546   1      
 547   1          // Position limit saturation
 548   1          if (c_mem.pos_lim_flag) {
 549   2              if (g_ref.pos[0] < c_mem.pos_lim_inf[0]) 
 550   2                  g_ref.pos[0] = c_mem.pos_lim_inf[0];
 551   2              if (g_ref.pos[0] > c_mem.pos_lim_sup[0]) 
 552   2                  g_ref.pos[0] = c_mem.pos_lim_sup[0];
 553   2          }
 554   1      
 555   1          if (c_mem.rest_position_flag == TRUE) {
 556   2              if (rest_enabled == 1){
 557   3                  // Change position reference to drive motor to rest position smoothly
 558   3                  g_ref.pos[0] = rest_pos_curr_ref;
 559   3              }
 560   2              
 561   2              if (forced_open == 1) {
 562   3                  // Open the SoftHand as EMG PROPORTIONAL input mode 
 563   3                  if (err_emg_2 > 0)
 564   3                      g_ref.pos[0] = g_mem.rest_pos - (err_emg_2 * g_mem.rest_pos) / (1024 - c_mem.emg_threshold
             -[1]);
 565   3                  else {
 566   4                      g_ref.pos[0] = g_mem.rest_pos;
 567   4                      forced_open = 0;
 568   4                  }
 569   3              }
 570   2          }
 571   1      }
 572          
 573          //==============================================================================
 574          //                                                           ANALOG MEASUREMENTS
 575          //==============================================================================
 576          
 577          void analog_read_end() {
 578   1      
 579   1          /* =========================================================================
 580   1          /   Ideal formulation to calculate tension and current
 581   1          /
 582   1          /   tension = ((read_value_mV - offset) * 101) / gain -> [mV]
 583   1          /   current = ((read_value_mV - offset) * 375) / (gain * resistor) -> [mA]
 584   1          /
 585   1          /   Definition:
 586   1          /   read_value_mV = counts_read / 0.819 -> conversion from counts to mV
 587   1          /   offset = 2000 -> hardware amplifier bias in mV
 588   1          /   gain = 8.086 -> amplifier gain
 589   1          /   resistor = 18 -> resistor of voltage divider in KOhm 
 590   1          /
 591   1          /   Real formulation: tradeoff in good performance and accurancy, ADC_buf[] 
 592   1          /   and offset unit of measurment is counts, instead dev_tension and
 593   1          /   g_meas.curr[] are converted in properly unit.
 594   1          /  =========================================================================
 595   1          */
 596   1      
 597   1          int32 CYDATA i_aux;
 598   1      
 599   1          static emg_status CYDATA emg_1_status = RESET; 
 600   1          static emg_status CYDATA emg_2_status = RESET;                                             
 601   1          
 602   1          static joystick_status CYDATA UD_status = RESET;
 603   1          static joystick_status CYDATA LR_status = RESET;                                          
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 11  

 604   1      
 605   1          static uint16 CYDATA UD_counter = 0;
 606   1          static uint16 CYDATA LR_counter = 0;
 607   1          
 608   1          static int32 CYDATA UD_mean_value;
 609   1          static int32 CYDATA LR_mean_value;
 610   1              
 611   1          static uint16 emg_counter_1 = 0;
 612   1          static uint16 emg_counter_2 = 0;
 613   1          static uint8 count = 0;
 614   1          static uint32 count2 = 0;
 615   1          
 616   1        //  static uint8 first_tension_valid = TRUE;
 617   1      
 618   1          // Wait for conversion end
 619   1          
 620   1          while(!ADC_STATUS_Read()){
 621   2              if (interrupt_flag){
 622   3                  interrupt_flag = FALSE;
 623   3                  interrupt_manager();
 624   3              }
 625   2          }
 626   1          
 627   1          // Convert tension read
 628   1          dev_tension = ((int32)(ADC_buf[0] - 1638) * 1952) >> 7;
 629   1          
 630   1          if (interrupt_flag){
 631   2              interrupt_flag = FALSE;
 632   2              interrupt_manager();
 633   2          }
 634   1              
 635   1          if (first_tension_valid && tension_valid) {
 636   2              count = count + 1;
 637   2              
 638   2              if (count == 1000){
 639   3                  if (dev_tension < 9000) {   // 8 V case
 640   4                      pow_tension = 8000;
 641   4                  }
 642   3                  else {      // 12 V - 24 V cases
 643   4                      if (dev_tension < 13000) {
 644   5                          pow_tension = 12000;
 645   5                      }
 646   4                      else
 647   4                          pow_tension = 24000;
 648   4                  }
 649   3      
 650   3                  first_tension_valid = FALSE;
 651   3              }
 652   2          }
 653   1      
 654   1          // Until there is no valid input tension repeat this measurement
 655   1          
 656   1          if (dev_tension > 7000) {       //at least > 7.36 V (92% of 8 V) that is minimum charge of smallest ba
             -ttery
 657   2              // Set tension valid bit to TRUE
 658   2      
 659   2              if (count2 == 1000){
 660   3                  tension_valid = TRUE;   
 661   3              }
 662   2              else {                      // wait for battery voltage stabilization
 663   3                  count2 = count2 + 1;
 664   3                  dev_tension_f = filter_voltage(dev_tension);
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 12  

 665   3              }
 666   2      
 667   2              // Check Interrupt 
 668   2          
 669   2              if (interrupt_flag){
 670   3                  interrupt_flag = FALSE;
 671   3                  interrupt_manager();
 672   3              }
 673   2      
 674   2              // if calibration is not needed go to "normal execution"
 675   2              if (!g_mem.emg_calibration_flag){
 676   3                  emg_1_status = NORMAL; // normal execution
 677   3                  emg_2_status = NORMAL; // normal execution
 678   3              }
 679   2      
 680   2              // State machines for EMG or Joystick reading
 681   2              if (c_mem.input_mode == INPUT_MODE_JOYSTICK) {
 682   3                  // Read ADC_buf[2] and ADC_buf[3] as JOYSTICK analog inputs
 683   3                  
 684   3                  // Joystick UD    
 685   3                  switch (UD_status) {
 686   4                      case NORMAL:
 687   4                          i_aux = ADC_buf[2];
 688   4                          // Remap the analog reading from -1024 to 1024.  
 689   4                          i_aux = (int32) (((float) (i_aux - UD_mean_value) / UD_mean_value) * g_mem.joystick_ga
             -in); 
 690   4                          
 691   4                          if (interrupt_flag){
 692   5                              interrupt_flag = FALSE;
 693   5                              interrupt_manager();
 694   5                          }
 695   4      
 696   4                          //Saturation
 697   4                          if (i_aux < -1024) 
 698   4                              i_aux = -1024;
 699   4                          if (i_aux > 1024)
 700   4                              i_aux = 1024;
 701   4      
 702   4                          g_meas.joystick[1] = (int16) i_aux;
 703   4      
 704   4                          if (interrupt_flag){
 705   5                              interrupt_flag = FALSE;
 706   5                              interrupt_manager();
 707   5                          }
 708   4      
 709   4                      break;
 710   4      
 711   4                      case RESET: // reset variables
 712   4                          UD_counter = 0;
 713   4                          UD_mean_value = 0;
 714   4                          UD_status = WAIT; // go to waiting status
 715   4      
 716   4                      break;
 717   4      
 718   4                      case DISCARD: // discard first EMG_SAMPLE_TO_DISCARD samples
 719   4                          UD_counter++;
 720   4                          if (UD_counter == JOYSTICK_SAMPLE_TO_DISCARD) {
 721   5                              UD_counter = 0;                     // reset counter
 722   5      
 723   5                              if (interrupt_flag){
 724   6                                  interrupt_flag = FALSE;
 725   6                                  interrupt_manager();
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 13  

 726   6                              }
 727   5      
 728   5                              UD_status = SUM_AND_MEAN;           // sum and mean status
 729   5                          }
 730   4      
 731   4                      break;
 732   4      
 733   4                      case SUM_AND_MEAN: // sum first SAMPLES_FOR_EMG_MEAN samples
 734   4                          // NOTE max(value)*SAMPLES_FOR_EMG_MEAN must fit in 32bit
 735   4                          UD_counter++;
 736   4                          UD_mean_value += ADC_buf[2];
 737   4      
 738   4                          if (interrupt_flag){
 739   5                              interrupt_flag = FALSE;
 740   5                              interrupt_manager();
 741   5                          }
 742   4      
 743   4                          if (UD_counter == SAMPLES_FOR_JOYSTICK_MEAN) {
 744   5                              UD_mean_value = UD_mean_value / SAMPLES_FOR_JOYSTICK_MEAN; // calc mean
 745   5      
 746   5                              if (interrupt_flag){
 747   6                                  interrupt_flag = FALSE;
 748   6                                  interrupt_manager();
 749   6                              }
 750   5      
 751   5                              UD_counter = 0;          // reset counter
 752   5                              UD_status = NORMAL;           // goto normal execution
 753   5                          }
 754   4                      break;
 755   4      
 756   4                      case WAIT: // wait for both EMG calibrations to be done
 757   4                          if (emg_1_status == NORMAL && emg_2_status == NORMAL)
 758   4                              UD_status = DISCARD;           // goto discard sample
 759   4                      break;
 760   4                  }
 761   3                  
 762   3                  if (interrupt_flag){
 763   4                      interrupt_flag = FALSE;
 764   4                      interrupt_manager();
 765   4                  }
 766   3                  // Joystick LR
 767   3                  switch (LR_status) {
 768   4                      case NORMAL:
 769   4                          i_aux = ADC_buf[3];
 770   4      
 771   4                          i_aux = (int32) (((float) (i_aux - LR_mean_value) / LR_mean_value) * g_mem.joystick_ga
             -in); 
 772   4                          
 773   4                          if (interrupt_flag){
 774   5                              interrupt_flag = FALSE;
 775   5                              interrupt_manager();
 776   5                          }
 777   4      
 778   4                          //Saturation
 779   4                          if (i_aux < -1024)
 780   4                              i_aux = -1024;
 781   4                          if (i_aux > 1024)
 782   4                              i_aux = 1024;
 783   4      
 784   4                          if (interrupt_flag){
 785   5                              interrupt_flag = FALSE;
 786   5                              interrupt_manager();
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 14  

 787   5                          }
 788   4      
 789   4                          g_meas.joystick[0] = (int16) i_aux;
 790   4      
 791   4                      break;
 792   4      
 793   4                      case RESET: // reset variables
 794   4                          LR_counter = 0;
 795   4                          LR_mean_value = 0;
 796   4                          LR_status = WAIT; // goes waiting for all conversions to be done
 797   4                      break;
 798   4      
 799   4                      case DISCARD: // discard first EMG_SAMPLE_TO_DISCARD samples8
 800   4                          LR_counter++;
 801   4                          if (LR_counter == JOYSTICK_SAMPLE_TO_DISCARD) {
 802   5                              LR_counter = 0;                     // reset counter
 803   5      
 804   5                              if (interrupt_flag){
 805   6                                  interrupt_flag = FALSE;
 806   6                                  interrupt_manager();
 807   6                              }
 808   5      
 809   5                              LR_status = SUM_AND_MEAN;           // sum and mean status
 810   5                          }
 811   4                      break;
 812   4      
 813   4                      case SUM_AND_MEAN: // sum first SAMPLES_FOR_EMG_MEAN samples
 814   4                          // NOTE max(value)*SAMPLES_FOR_EMG_MEAN must fit in 32bit
 815   4                          LR_counter++;
 816   4                          LR_mean_value += ADC_buf[3];
 817   4                          if (LR_counter == SAMPLES_FOR_JOYSTICK_MEAN) {
 818   5                              LR_mean_value = LR_mean_value / SAMPLES_FOR_JOYSTICK_MEAN; // calc mean
 819   5                              
 820   5                              if (interrupt_flag){
 821   6                                  interrupt_flag = FALSE;
 822   6                                  interrupt_manager();
 823   6                              }
 824   5      
 825   5                              LR_counter = 0;               // reset counter
 826   5                              LR_status = NORMAL;           // goto normal execution
 827   5                          }
 828   4                      break;
 829   4      
 830   4                      case WAIT:
 831   4                          if(emg_1_status == NORMAL && emg_2_status == NORMAL && UD_status == NORMAL)
 832   4                              LR_status = DISCARD;
 833   4                      break;
 834   4                  }
 835   3      
 836   3                  if (interrupt_flag){
 837   4                      interrupt_flag = FALSE;
 838   4                      interrupt_manager();
 839   4                  }
 840   3                  
 841   3              } 
 842   2              else {
 843   3                  // Read ADC_buf[2] and ADC_buf[3] as EMGs
 844   3                  
 845   3                  // EMG 1 calibration state machine
 846   3              
 847   3                  // Calibration state machine
 848   3                  switch(emg_1_status) {
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 15  

 849   4                      case NORMAL: // normal execution
 850   4                          i_aux = (int32)ADC_buf[2];
 851   4                          if (i_aux < 0) 
 852   4                              i_aux = 0;
 853   4                          i_aux = filter_ch1(i_aux);
 854   4                          i_aux = (i_aux << 10) / g_mem.emg_max_value[0];
 855   4              
 856   4                          if (interrupt_flag){
 857   5                              interrupt_flag = FALSE;
 858   5                              interrupt_manager();
 859   5                          }
 860   4                          //Saturation
 861   4                          if (i_aux < 0)
 862   4                              i_aux = 0;
 863   4                          else
 864   4                              if (i_aux > 1024) 
 865   4                                  i_aux = 1024;
 866   4                          
 867   4                          g_meas.emg[0] = i_aux;
 868   4              
 869   4                          if (interrupt_flag){
 870   5                              interrupt_flag = FALSE;
 871   5                              interrupt_manager();
 872   5                          }
 873   4                          
 874   4                          break;
 875   4      
 876   4                      case RESET: // reset variables
 877   4                          emg_counter_1 = 0;
 878   4                          g_mem.emg_max_value[0] = 0;
 879   4                          emg_1_status = DISCARD; // goto next status
 880   4                          
 881   4                          break;
 882   4      
 883   4                      case DISCARD: // discard first EMG_SAMPLE_TO_DISCARD samples
 884   4                          emg_counter_1++;
 885   4                          if (emg_counter_1 == EMG_SAMPLE_TO_DISCARD) {
 886   5                              emg_counter_1 = 0;          // reset counter
 887   5                              
 888   5                              LED_CTRL_Write(1);
 889   5                              LED_BLINK_EN_Write(0);
 890   5                                  
 891   5                              if (interrupt_flag){
 892   6                                  interrupt_flag = FALSE;
 893   6                                  interrupt_manager();
 894   6                              }
 895   5                              
 896   5                              emg_1_status = SUM_AND_MEAN;           // sum and mean status
 897   5                          }
 898   4                          break;
 899   4      
 900   4                      case SUM_AND_MEAN: // sum first SAMPLES_FOR_EMG_MEAN samples
 901   4                          // NOTE max(value)*SAMPLES_FOR_EMG_MEAN must fit in 32bit
 902   4                          emg_counter_1++;
 903   4                          if (ADC_buf[2] < 0) 
 904   4                              ADC_buf[2] = 0;
 905   4                          g_mem.emg_max_value[0] += filter_ch1((int32)ADC_buf[2]);
 906   4                          
 907   4                          if (interrupt_flag){
 908   5                              interrupt_flag = FALSE;
 909   5                              interrupt_manager();
 910   5                          }
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 16  

 911   4                          
 912   4                          if (emg_counter_1 == SAMPLES_FOR_EMG_MEAN) {
 913   5                              g_mem.emg_max_value[0] = g_mem.emg_max_value[0] / SAMPLES_FOR_EMG_MEAN; // calc me
             -an
 914   5              
 915   5                              if (interrupt_flag){
 916   6                                  interrupt_flag = FALSE;
 917   6                                  interrupt_manager();
 918   6                              }                    
 919   5                              
 920   5                              LED_CTRL_Write(0);
 921   5                              LED_BLINK_EN_Write(0);
 922   5                              
 923   5                              emg_counter_1 = 0;          // reset counter
 924   5      
 925   5                              emg_1_status = NORMAL;           // goto normal execution
 926   5                          }
 927   4                          break;
 928   4      
 929   4                      default:
 930   4                          break;
 931   4                  }
 932   3              
 933   3                  if (interrupt_flag){
 934   4                      interrupt_flag = FALSE;
 935   4                      interrupt_manager();
 936   4                  }
 937   3                  // EMG 2 calibration state machine
 938   3                  switch(emg_2_status) {
 939   4                      case NORMAL: // normal execution
 940   4                          i_aux = (int32)ADC_buf[3];
 941   4                          if (i_aux < 0)
 942   4                              i_aux = 0;
 943   4                          i_aux = filter_ch2(i_aux);
 944   4                          i_aux = (i_aux << 10) / g_mem.emg_max_value[1];
 945   4              
 946   4                          if (interrupt_flag){
 947   5                              interrupt_flag = FALSE;
 948   5                              interrupt_manager();
 949   5                          }
 950   4                          
 951   4                          if (i_aux < 0) 
 952   4                              i_aux = 0;
 953   4                          else
 954   4                              if (i_aux > 1024)
 955   4                                  i_aux = 1024;
 956   4                          
 957   4                          g_meas.emg[1] = i_aux;
 958   4      
 959   4                          break;
 960   4      
 961   4                      case RESET: // reset variables
 962   4                          emg_counter_2 = 0;
 963   4                          g_mem.emg_max_value[1] = 0;
 964   4              
 965   4                          if (interrupt_flag){
 966   5                              interrupt_flag = FALSE;
 967   5                              interrupt_manager();
 968   5                          }
 969   4                          
 970   4                          emg_2_status = WAIT; // wait for EMG 1 calibration
 971   4                          break;
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 17  

 972   4      
 973   4                      case DISCARD: // discard first EMG_SAMPLE_TO_DISCARD samples
 974   4                          emg_counter_2++;
 975   4                          if (emg_counter_2 == EMG_SAMPLE_TO_DISCARD) {
 976   5                              emg_counter_2 = 0;          // reset counter
 977   5                              
 978   5                              LED_CTRL_Write(1);
 979   5                              LED_BLINK_EN_Write(0);
 980   5              
 981   5                              if (interrupt_flag){
 982   6                                  interrupt_flag = FALSE;
 983   6                                  interrupt_manager();
 984   6                              }
 985   5                              
 986   5                              emg_2_status = SUM_AND_MEAN;           // sum and mean status
 987   5                          }
 988   4                          break;
 989   4      
 990   4                      case SUM_AND_MEAN: // sum first SAMPLES_FOR_EMG_MEAN samples
 991   4                          // NOTE max(value)*SAMPLES_FOR_EMG_MEAN must fit in 32bit
 992   4                          emg_counter_2++;
 993   4                          if (ADC_buf[3] < 0)
 994   4                              ADC_buf[3] = 0;
 995   4                          g_mem.emg_max_value[1] += filter_ch2((int32)ADC_buf[3]);
 996   4              
 997   4                          if (interrupt_flag){
 998   5                              interrupt_flag = FALSE;
 999   5                              interrupt_manager();
1000   5                          }
1001   4                          
1002   4                          if (emg_counter_2 == SAMPLES_FOR_EMG_MEAN) {
1003   5                              g_mem.emg_max_value[1] = g_mem.emg_max_value[1] / SAMPLES_FOR_EMG_MEAN; // calc me
             -an
1004   5                              
1005   5                              LED_CTRL_Write(0);
1006   5                              LED_BLINK_EN_Write(0);
1007   5                              
1008   5                              emg_counter_2 = 0;          // reset counter
1009   5                          
1010   5                              if (interrupt_flag){
1011   6                                  interrupt_flag = FALSE;
1012   6                                  interrupt_manager();
1013   6                              }
1014   5                              
1015   5                              emg_2_status = WAIT_EoC;           // goto end of calibration wait
1016   5                          }
1017   4                          break;
1018   4      
1019   4                      case WAIT: // wait for EMG calibration to be done
1020   4                          if (emg_1_status == NORMAL)
1021   4                              emg_2_status = DISCARD;           // goto discard sample
1022   4                          break;
1023   4      
1024   4                      case WAIT_EoC:  // wait for end of calibration procedure (only for LED visibility reasons)
1025   4                          emg_counter_2++;
1026   4                          if (emg_counter_2 == EMG_SAMPLE_TO_DISCARD) {
1027   5                              emg_counter_2 = 0;          // reset counter
1028   5      
1029   5                              if (interrupt_flag){
1030   6                                  interrupt_flag = FALSE;
1031   6                                  interrupt_manager();
1032   6                              }
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 18  

1033   5                              
1034   5                              // if EMG control mode active, activate motors accordingly with startup value
1035   5                              if ((c_mem.input_mode == INPUT_MODE_EMG_PROPORTIONAL) ||
1036   5                                  (c_mem.input_mode == INPUT_MODE_EMG_INTEGRAL) ||
1037   5                                  (c_mem.input_mode == INPUT_MODE_EMG_FCFS) ||
1038   5                                  (c_mem.input_mode == INPUT_MODE_EMG_FCFS_ADV)) {
1039   6                                  g_ref.pos[0] = g_meas.pos[0];
1040   6                                  g_ref.pos[1] = g_meas.pos[1];
1041   6                              }
1042   5                                  
1043   5                              emg_2_status = NORMAL;           // goto normal execution
1044   5                          }
1045   4                          break;
1046   4                          
1047   4                      default:
1048   4                          break;
1049   4                  }
1050   3                      
1051   3                  if (interrupt_flag){
1052   4                      interrupt_flag = FALSE;
1053   4                      interrupt_manager();
1054   4                  }
1055   3              }
1056   2          }
1057   1          else {
1058   2      
1059   2              emg_1_status = RESET; 
1060   2              emg_2_status = RESET;
1061   2      
1062   2              UD_status = RESET;
1063   2              LR_status = RESET;
1064   2                      
1065   2              tension_valid = FALSE;
1066   2              
1067   2              //fixed
1068   2              LED_CTRL_Write(1);
1069   2              //PWM Blink Enable
1070   2              LED_BLINK_EN_Write(0);
1071   2                  
1072   2              if (interrupt_flag){
1073   3                  interrupt_flag = FALSE;
1074   3                  interrupt_manager();
1075   3              }
1076   2              
1077   2              if (c_mem.emg_calibration_flag) {
1078   3                  if ((c_mem.input_mode == INPUT_MODE_EMG_PROPORTIONAL) ||
1079   3                      (c_mem.input_mode == INPUT_MODE_EMG_INTEGRAL) ||
1080   3                      (c_mem.input_mode == INPUT_MODE_EMG_FCFS) ||
1081   3                      (c_mem.input_mode == INPUT_MODE_EMG_FCFS_ADV)) {
1082   4                  }
1083   3              }
1084   2      
1085   2              // Reset emg
1086   2              g_meas.emg[0] = 0;
1087   2              g_meas.emg[1] = 0;
1088   2              
1089   2              // Reset Joystick
1090   2              g_meas.joystick[0] = 0;
1091   2              g_meas.joystick[1] = 0;
1092   2      
1093   2          }
1094   1          
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 19  

1095   1          // The board LED blinks if attached battery is not fully charged
1096   1          if (!first_tension_valid && tension_valid == TRUE && emg_1_status == NORMAL && emg_2_status == NORMAL)
             -{
1097   2              dev_tension_f = filter_voltage(dev_tension);
1098   2              if (dev_tension_f > 0.92 * pow_tension){
1099   3                  //fixed
1100   3                  LED_CTRL_Write(1);
1101   3                  
1102   3                  //PWM Blink Enable
1103   3                  LED_BLINK_EN_Write(0);
1104   3              }
1105   2              else {
1106   3                  // blink
1107   3                  LED_CTRL_Write(0);
1108   3                  
1109   3                  //PWM Blink Enable
1110   3                  LED_BLINK_EN_Write(1);
1111   3                  
1112   3                  // Disable slave or motors because of not fully charged battery
1113   3                  if (master_mode) {
1114   4                      deactivate_slaves();
1115   4                      
1116   4                      // Check Interrupt 
1117   4                      if (interrupt_flag){
1118   5                          interrupt_flag = FALSE;
1119   5                          interrupt_manager();
1120   5                      }
1121   4                      
1122   4                      master_mode = 0;        // exit from master mode
1123   4                  }
1124   3              }
1125   2          }
1126   1              
1127   1          if (interrupt_flag){
1128   2              interrupt_flag = FALSE;
1129   2              interrupt_manager();
1130   2          }
1131   1      }
1132          
1133          /* [] END OF FILE */
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 20  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION ISR_RS485_RX_ExInterrupt (BEGIN)
                                           ; SOURCE LINE # 66
                                           ; SOURCE LINE # 70
0000 D200        E     SETB    interrupt_flag
                                           ; SOURCE LINE # 72
0002 32                RETI    
             ; FUNCTION ISR_RS485_RX_ExInterrupt (END)

             ; FUNCTION interrupt_manager (BEGIN)
                                           ; SOURCE LINE # 89
                                           ; SOURCE LINE # 105
0000 E4                CLR     A
0001 F500        R     MOV     package_count,A
0003         ?C0002:
                                           ; SOURCE LINE # 111
0003 120000      E     LCALL   UART_RS485_GetRxBufferSize
0006 EF                MOV     A,R7
0007 7003              JNZ     $ + 5H
0009 020000      R     LJMP    ?C0025
000C E500        R     MOV     A,package_count
000E C3                CLR     C
000F 9406              SUBB    A,#06H
0011 4003              JC      $ + 5H
0013 020000      R     LJMP    ?C0025
                                           ; SOURCE LINE # 115
0016 120000      E     LCALL   UART_RS485_GetChar
0019 8F00        R     MOV     rx_data,R7
                                           ; SOURCE LINE # 117
001B E500        R     MOV     A,state
001D 14                DEC     A
001E 6049              JZ      ?C0009
0020 14                DEC     A
0021 6068              JZ      ?C0013
0023 14                DEC     A
0024 7003              JNZ     $ + 5H
0026 020000      R     LJMP    ?C0020
0029 14                DEC     A
002A 7003              JNZ     $ + 5H
002C 020000      R     LJMP    ?C0023
002F 2404              ADD     A,#04H
0031 70D0              JNZ     ?C0002
                                           ; SOURCE LINE # 119
0033         ?C0005:
                                           ; SOURCE LINE # 121
0033 850000      R     MOV     rx_queue,rx_queue+01H
                                           ; SOURCE LINE # 122
0036 850000      R     MOV     rx_queue+01H,rx_queue+02H
                                           ; SOURCE LINE # 123
0039 850000      R     MOV     rx_queue+02H,rx_data
                                           ; SOURCE LINE # 126
003C E500        R     MOV     A,rx_queue+01H
003E B43A11            CJNE    A,#03AH,?C0006
0041 E500        R     MOV     A,rx_queue+02H
0043 B43A0C            CJNE    A,#03AH,?C0006
                                           ; SOURCE LINE # 127
0046 E4                CLR     A
0047 F500        R     MOV     rx_queue,A
                                           ; SOURCE LINE # 128
0049 F500        R     MOV     rx_queue+01H,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 21  

                                           ; SOURCE LINE # 129
004B F500        R     MOV     rx_queue+02H,A
                                           ; SOURCE LINE # 130
004D 750001      R     MOV     state,#01H
                                           ; SOURCE LINE # 131
0050 80B1              SJMP    ?C0002
0052         ?C0006:
                                           ; SOURCE LINE # 132
0052 E500        R     MOV     A,rx_queue
0054 B43FAC            CJNE    A,#03FH,?C0002
0057 E500        R     MOV     A,rx_queue+01H
0059 B40DA7            CJNE    A,#0DH,?C0002
005C E500        R     MOV     A,rx_queue+02H
005E 640A              XRL     A,#0AH
0060 70A1              JNZ     ?C0002
                                           ; SOURCE LINE # 135
0062 FF                MOV     R7,A
0063 FE                MOV     R6,A
0064 120000      E     LCALL   _infoGet
                                           ; SOURCE LINE # 136
0067 809A              SJMP    ?C0002
                                           ; SOURCE LINE # 139
0069         ?C0009:
                                           ; SOURCE LINE # 142
0069 900000      E     MOV     DPTR,#c_mem+01H
006C E0                MOVX    A,@DPTR
006D 6500        R     XRL     A,rx_data
006F 600B              JZ      ?C0011
0071 E500        R     MOV     A,rx_data
0073 6007              JZ      ?C0011
0075 900000      E     MOV     DPTR,#c_mem+068H
0078 E0                MOVX    A,@DPTR
0079 B50004            CJNE    A,rx_data,?C0010
007C         ?C0011:
                                           ; SOURCE LINE # 143
007C C200        R     CLR     rx_data_type
007E 8002              SJMP    ?C0012
0080         ?C0010:
                                           ; SOURCE LINE # 145
0080 D200        R     SETB    rx_data_type
0082         ?C0012:
                                           ; SOURCE LINE # 147
0082 E4                CLR     A
0083 F500        R     MOV     data_packet_length,A
                                           ; SOURCE LINE # 148
0085 750002      R     MOV     state,#02H
                                           ; SOURCE LINE # 149
0088 020000      R     LJMP    ?C0002
                                           ; SOURCE LINE # 152
008B         ?C0013:
                                           ; SOURCE LINE # 155
008B 850000      R     MOV     data_packet_length,rx_data
                                           ; SOURCE LINE # 157
008E E500        R     MOV     A,data_packet_length
0090 D3                SETB    C
0091 9401              SUBB    A,#01H
0093 5008              JNC     ?C0014
                                           ; SOURCE LINE # 158
0095 E4                CLR     A
0096 F500        R     MOV     data_packet_length,A
                                           ; SOURCE LINE # 159
0098 F500        R     MOV     state,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 22  

                                           ; SOURCE LINE # 160
009A 020000      R     LJMP    ?C0002
009D         ?C0014:
009D E500        R     MOV     A,data_packet_length
009F D3                SETB    C
00A0 9480              SUBB    A,#080H
00A2 4008              JC      ?C0016
                                           ; SOURCE LINE # 161
00A4 E4                CLR     A
00A5 F500        R     MOV     data_packet_length,A
                                           ; SOURCE LINE # 162
00A7 F500        R     MOV     state,A
                                           ; SOURCE LINE # 163
00A9 020000      R     LJMP    ?C0002
00AC         ?C0016:
                                           ; SOURCE LINE # 164
00AC E4                CLR     A
00AD F500        R     MOV     data_packet_index,A
                                           ; SOURCE LINE # 166
00AF 200006            JB      rx_data_type,?C0018
                                           ; SOURCE LINE # 167
00B2 750003      R     MOV     state,#03H
00B5 020000      R     LJMP    ?C0002
00B8         ?C0018:
                                           ; SOURCE LINE # 169
00B8 750004      R     MOV     state,#04H
                                           ; SOURCE LINE # 170
                                           ; SOURCE LINE # 171
00BB 020000      R     LJMP    ?C0002
                                           ; SOURCE LINE # 174
00BE         ?C0020:
                                           ; SOURCE LINE # 176
00BE 7400        R     MOV     A,#LOW data_packet_buffer
00C0 2500        R     ADD     A,data_packet_index
00C2 F582              MOV     DPL,A
00C4 E4                CLR     A
00C5 3400        R     ADDC    A,#HIGH data_packet_buffer
00C7 F583              MOV     DPH,A
00C9 E500        R     MOV     A,rx_data
00CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 177
00CC 0500        R     INC     data_packet_index
                                           ; SOURCE LINE # 180
00CE E500        R     MOV     A,data_packet_index
00D0 C3                CLR     C
00D1 9500        R     SUBB    A,data_packet_length
00D3 5003              JNC     $ + 5H
00D5 020000      R     LJMP    ?C0002
                                           ; SOURCE LINE # 182
00D8 200025            JB      rx_data_type,?C0022
                                           ; SOURCE LINE # 184
00DB AF00        R     MOV     R7,data_packet_length
00DD 7E00              MOV     R6,#00H
00DF 7800        E     MOV     R0,#LOW g_rx
00E1 7C00        E     MOV     R4,#HIGH g_rx
00E3 7D01              MOV     R5,#01H
00E5 7B01              MOV     R3,#01H
00E7 7A00        R     MOV     R2,#HIGH data_packet_buffer
00E9 7900        R     MOV     R1,#LOW data_packet_buffer
00EB 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 185
00EE 900000      E     MOV     DPTR,#g_rx+080H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 23  

00F1 E4                CLR     A
00F2 F0                MOVX    @DPTR,A
00F3 A3                INC     DPTR
00F4 E500        R     MOV     A,data_packet_length
00F6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 186
00F7 900000      E     MOV     DPTR,#g_rx+084H
00FA 7401              MOV     A,#01H
00FC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 188
00FD 120000      E     LCALL   commProcess
                                           ; SOURCE LINE # 189
0100         ?C0022:
                                           ; SOURCE LINE # 191
0100 E4                CLR     A
0101 F500        R     MOV     data_packet_index,A
                                           ; SOURCE LINE # 192
0103 F500        R     MOV     data_packet_length,A
                                           ; SOURCE LINE # 193
0105 F500        R     MOV     state,A
                                           ; SOURCE LINE # 194
0107 0500        R     INC     package_count
                                           ; SOURCE LINE # 196
                                           ; SOURCE LINE # 197
0109 020000      R     LJMP    ?C0002
                                           ; SOURCE LINE # 200
010C         ?C0023:
                                           ; SOURCE LINE # 201
010C 1500        R     DEC     data_packet_length
010E E500        R     MOV     A,data_packet_length
0110 6003              JZ      $ + 5H
0112 020000      R     LJMP    ?C0002
                                           ; SOURCE LINE # 202
0115 F500        R     MOV     data_packet_index,A
                                           ; SOURCE LINE # 203
0117 F500        R     MOV     data_packet_length,A
                                           ; SOURCE LINE # 204
0119 7F01              MOV     R7,#01H
011B 120000      E     LCALL   _RS485_CTS_Write
                                           ; SOURCE LINE # 205
011E E4                CLR     A
011F FF                MOV     R7,A
0120 120000      E     LCALL   _RS485_CTS_Write
                                           ; SOURCE LINE # 206
0123 E4                CLR     A
0124 F500        R     MOV     state,A
                                           ; SOURCE LINE # 207
0126 0500        R     INC     package_count
                                           ; SOURCE LINE # 208
                                           ; SOURCE LINE # 209
0128 020000      R     LJMP    ?C0002
                                           ; SOURCE LINE # 210
                                           ; SOURCE LINE # 211
012B 020000      R     LJMP    ?C0002
                                           ; SOURCE LINE # 212
012E         ?C0025:
012E 22                RET     
             ; FUNCTION interrupt_manager (END)

             ; FUNCTION function_scheduler (BEGIN)
                                           ; SOURCE LINE # 221
                                           ; SOURCE LINE # 225
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 24  

0000 120000      E     LCALL   MY_TIMER_ReadCounter
0003 900000      E     MOV     DPTR,#timer_value0
0006 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 229
0009 7F01              MOV     R7,#01H
000B 120000      E     LCALL   _ADC_SOC_Write
                                           ; SOURCE LINE # 233
000E 300005            JNB     interrupt_flag,?C0026
                                           ; SOURCE LINE # 234
0011 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 235
0013 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 236
0016         ?C0026:
                                           ; SOURCE LINE # 240
0016 120000      R     LCALL   motor_control
                                           ; SOURCE LINE # 244
0019 300005            JNB     interrupt_flag,?C0027
                                           ; SOURCE LINE # 245
001C C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 246
001E 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 247
0021         ?C0027:
                                           ; SOURCE LINE # 251
0021 120000      R     LCALL   analog_read_end
                                           ; SOURCE LINE # 253
0024 300005            JNB     interrupt_flag,?C0028
                                           ; SOURCE LINE # 254
0027 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 255
0029 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 256
002C         ?C0028:
                                           ; SOURCE LINE # 260
002C 900000      E     MOV     DPTR,#master_mode
002F E0                MOVX    A,@DPTR
0030 7003              JNZ     $ + 5H
0032 020000      R     LJMP    ?C0029
                                           ; SOURCE LINE # 262
0035 900000      E     MOV     DPTR,#c_mem+057H
0038 E0                MOVX    A,@DPTR
0039 6068              JZ      ?C0030
                                           ; SOURCE LINE # 265
003B 900000      E     MOV     DPTR,#c_mem+047H
003E E0                MOVX    A,@DPTR
003F 6401              XRL     A,#01H
0041 7055              JNZ     ?C0031
                                           ; SOURCE LINE # 266
0043 900000      R     MOV     DPTR,#counter_calibration
0046 E0                MOVX    A,@DPTR
0047 7004              JNZ     ?C0209
0049 A3                INC     DPTR
004A E0                MOVX    A,@DPTR
004B 640A              XRL     A,#0AH
004D         ?C0209:
004D 7033              JNZ     ?C0032
                                           ; SOURCE LINE # 269
004F 900000      E     MOV     DPTR,#c_mem+054H
0052 E0                MOVX    A,@DPTR
0053 7004              JNZ     ?C0034
0055 A3                INC     DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 25  

0056 E0                MOVX    A,@DPTR
0057 6016              JZ      ?C0033
0059         ?C0034:
                                           ; SOURCE LINE # 270
0059 900000      E     MOV     DPTR,#SH_current_position
005C E0                MOVX    A,@DPTR
005D FC                MOV     R4,A
005E A3                INC     DPTR
005F E0                MOVX    A,@DPTR
0060 FD                MOV     R5,A
0061 A3                INC     DPTR
0062 E0                MOVX    A,@DPTR
0063 FE                MOV     R6,A
0064 A3                INC     DPTR
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 900000      E     MOV     DPTR,#curr_pos_res
006A 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 271
006D 8009              SJMP    ?C0035
006F         ?C0033:
                                           ; SOURCE LINE # 272
                                           ; SOURCE LINE # 273
006F 120000      E     LCALL   commReadMeasFromSH
0072 900000      E     MOV     DPTR,#curr_pos_res
0075 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 274
0078         ?C0035:
                                           ; SOURCE LINE # 277
0078 120000      E     LCALL   check_rest_position
                                           ; SOURCE LINE # 278
007B E4                CLR     A
007C 900000      R     MOV     DPTR,#counter_calibration
007F F0                MOVX    @DPTR,A
0080 A3                INC     DPTR
0081 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 279
0082         ?C0032:
                                           ; SOURCE LINE # 280
0082 900000      R     MOV     DPTR,#counter_calibration+01H
0085 E0                MOVX    A,@DPTR
0086 04                INC     A
0087 F0                MOVX    @DPTR,A
0088 7006              JNZ     ?C0210
008A 900000      R     MOV     DPTR,#counter_calibration
008D E0                MOVX    A,@DPTR
008E 04                INC     A
008F F0                MOVX    @DPTR,A
0090         ?C0210:
                                           ; SOURCE LINE # 283
0090 300005            JNB     interrupt_flag,?C0031
                                           ; SOURCE LINE # 284
0093 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 285
0095 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 286
                                           ; SOURCE LINE # 287
0098         ?C0031:
                                           ; SOURCE LINE # 289
0098 120000      E     LCALL   drive_SH
                                           ; SOURCE LINE # 292
009B 300005            JNB     interrupt_flag,?C0030
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 26  

                                           ; SOURCE LINE # 293
009E C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 294
00A0 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 295
                                           ; SOURCE LINE # 296
00A3         ?C0030:
                                           ; SOURCE LINE # 298
00A3 900000      E     MOV     DPTR,#c_mem+054H
00A6 E0                MOVX    A,@DPTR
00A7 6020              JZ      ?C0038
                                           ; SOURCE LINE # 300
00A9 A3                INC     DPTR
00AA E0                MOVX    A,@DPTR
00AB 6011              JZ      ?C0039
00AD 900000      E     MOV     DPTR,#c_mem+06AH
00B0 E0                MOVX    A,@DPTR
00B1 FF                MOV     R7,A
00B2 900000      E     MOV     DPTR,#c_mem+069H
00B5 E0                MOVX    A,@DPTR
00B6 B50705            CJNE    A,AR7,?C0039
                                           ; SOURCE LINE # 301
00B9 120000      E     LCALL   drive_force_proprio_fb
                                           ; SOURCE LINE # 302
00BC 8003              SJMP    ?C0040
00BE         ?C0039:
                                           ; SOURCE LINE # 303
                                           ; SOURCE LINE # 304
00BE 120000      E     LCALL   drive_force_fb
                                           ; SOURCE LINE # 305
00C1         ?C0040:
                                           ; SOURCE LINE # 308
00C1 300005            JNB     interrupt_flag,?C0038
                                           ; SOURCE LINE # 309
00C4 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 310
00C6 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 311
                                           ; SOURCE LINE # 313
00C9         ?C0038:
                                           ; SOURCE LINE # 315
00C9 900000      E     MOV     DPTR,#c_mem+055H
00CC E0                MOVX    A,@DPTR
00CD 601D              JZ      ?C0042
                                           ; SOURCE LINE # 317
00CF 900000      E     MOV     DPTR,#c_mem+054H
00D2 E0                MOVX    A,@DPTR
00D3 600C              JZ      ?C0044
00D5 900000      E     MOV     DPTR,#c_mem+06AH
00D8 E0                MOVX    A,@DPTR
00D9 FF                MOV     R7,A
00DA 900000      E     MOV     DPTR,#c_mem+069H
00DD E0                MOVX    A,@DPTR
00DE 6F                XRL     A,R7
00DF 6003              JZ      ?C0043
00E1         ?C0044:
                                           ; SOURCE LINE # 318
00E1 120000      E     LCALL   drive_proprio_fb
                                           ; SOURCE LINE # 319
00E4         ?C0043:
                                           ; SOURCE LINE # 322
00E4 300005            JNB     interrupt_flag,?C0042
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 27  

                                           ; SOURCE LINE # 323
00E7 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 324
00E9 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 325
                                           ; SOURCE LINE # 326
00EC         ?C0042:
                                           ; SOURCE LINE # 328
00EC 900000      E     MOV     DPTR,#c_mem+056H
00EF E0                MOVX    A,@DPTR
00F0 FF                MOV     R7,A
00F1 600D              JZ      ?C0029
                                           ; SOURCE LINE # 330
00F3 7003              JNZ     ?C0047
                                           ; SOURCE LINE # 331
00F5 120000      E     LCALL   drive_vibrotactile_fb
                                           ; SOURCE LINE # 332
00F8         ?C0047:
                                           ; SOURCE LINE # 335
00F8 300005            JNB     interrupt_flag,?C0029
                                           ; SOURCE LINE # 336
00FB C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 337
00FD 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 338
                                           ; SOURCE LINE # 339
                                           ; SOURCE LINE # 340
0100         ?C0029:
                                           ; SOURCE LINE # 344
0100 300005            JNB     interrupt_flag,?C0049
                                           ; SOURCE LINE # 345
0103 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 346
0105 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 347
0108         ?C0049:
                                           ; SOURCE LINE # 352
0108 900000      E     MOV     DPTR,#calib
010B E0                MOVX    A,@DPTR
010C B40124            CJNE    A,#01H,?C0050
                                           ; SOURCE LINE # 353
010F 900000      R     MOV     DPTR,#counter_calibration
0112 E0                MOVX    A,@DPTR
0113 7004              JNZ     ?C0211
0115 A3                INC     DPTR
0116 E0                MOVX    A,@DPTR
0117 640A              XRL     A,#0AH
0119         ?C0211:
0119 700A              JNZ     ?C0051
                                           ; SOURCE LINE # 354
011B 120000      E     LCALL   calibration
                                           ; SOURCE LINE # 355
011E E4                CLR     A
011F 900000      R     MOV     DPTR,#counter_calibration
0122 F0                MOVX    @DPTR,A
0123 A3                INC     DPTR
0124 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 356
0125         ?C0051:
                                           ; SOURCE LINE # 357
0125 900000      R     MOV     DPTR,#counter_calibration+01H
0128 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 28  

0129 04                INC     A
012A F0                MOVX    @DPTR,A
012B 7006              JNZ     ?C0212
012D 900000      R     MOV     DPTR,#counter_calibration
0130 E0                MOVX    A,@DPTR
0131 04                INC     A
0132 F0                MOVX    @DPTR,A
0133         ?C0212:
                                           ; SOURCE LINE # 358
0133         ?C0050:
                                           ; SOURCE LINE # 362
0133 300005            JNB     interrupt_flag,?C0052
                                           ; SOURCE LINE # 363
0136 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 364
0138 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 365
013B         ?C0052:
                                           ; SOURCE LINE # 371
013B 7800        E     MOV     R0,#LOW g_measOld
013D 7C00        E     MOV     R4,#HIGH g_measOld
013F 7D01              MOV     R5,#01H
0141 7B01              MOV     R3,#01H
0143 7A00        E     MOV     R2,#HIGH g_meas
0145 7900        E     MOV     R1,#LOW g_meas
0147 7E00              MOV     R6,#00H
0149 7F33              MOV     R7,#033H
014B 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 372
014E 7800        E     MOV     R0,#LOW g_refOld
0150 7C00        E     MOV     R4,#HIGH g_refOld
0152 7D01              MOV     R5,#01H
0154 7B01              MOV     R3,#01H
0156 7A00        E     MOV     R2,#HIGH g_ref
0158 7900        E     MOV     R1,#LOW g_ref
015A 7E00              MOV     R6,#00H
015C 7F08              MOV     R7,#08H
015E 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 375
0161 7800        E     MOV     R0,#LOW g_ref
0163 7C00        E     MOV     R4,#HIGH g_ref
0165 7D01              MOV     R5,#01H
0167 7B01              MOV     R3,#01H
0169 7A00        E     MOV     R2,#HIGH g_refNew
016B 7900        E     MOV     R1,#LOW g_refNew
016D 7E00              MOV     R6,#00H
016F 7F08              MOV     R7,#08H
0171 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 377
0174 300005            JNB     interrupt_flag,?C0053
                                           ; SOURCE LINE # 378
0177 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 379
0179 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 380
017C         ?C0053:
                                           ; SOURCE LINE # 382
017C 120000      E     LCALL   MY_TIMER_ReadCounter
017F 900000      E     MOV     DPTR,#timer_value
0182 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 383
0185 7F40              MOV     R7,#040H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 29  

0187 7E4B              MOV     R6,#04BH
0189 7D4C              MOV     R5,#04CH
018B 7C00              MOV     R4,#00H
018D 120000      E     LCALL   _MY_TIMER_WriteCounter
                                           ; SOURCE LINE # 385
0190 22                RET     
             ; FUNCTION function_scheduler (END)

             ; FUNCTION motor_control (BEGIN)
                                           ; SOURCE LINE # 391
                                           ; SOURCE LINE # 404
0000 900000      E     MOV     DPTR,#c_mem+037H
0003 E0                MOVX    A,@DPTR
0004 FE                MOV     R6,A
0005 A3                INC     DPTR
0006 E0                MOVX    A,@DPTR
0007 FF                MOV     R7,A
0008 FB                MOV     R3,A
0009 AA06              MOV     R2,AR6
000B E4                CLR     A
000C 900000      E     MOV     DPTR,#g_meas+0FH
000F E0                MOVX    A,@DPTR
0010 FC                MOV     R4,A
0011 A3                INC     DPTR
0012 E0                MOVX    A,@DPTR
0013 FD                MOV     R5,A
0014 A3                INC     DPTR
0015 E0                MOVX    A,@DPTR
0016 FE                MOV     R6,A
0017 A3                INC     DPTR
0018 E0                MOVX    A,@DPTR
0019 C3                CLR     C
001A 9B                SUBB    A,R3
001B F500        R     MOV     err_emg_1+03H,A
001D EE                MOV     A,R6
001E 9A                SUBB    A,R2
001F F500        R     MOV     err_emg_1+02H,A
0021 ED                MOV     A,R5
0022 9400              SUBB    A,#00H
0024 F500        R     MOV     err_emg_1+01H,A
0026 EC                MOV     A,R4
0027 9400              SUBB    A,#00H
0029 F500        R     MOV     err_emg_1,A
                                           ; SOURCE LINE # 405
002B 900000      E     MOV     DPTR,#c_mem+039H
002E E0                MOVX    A,@DPTR
002F FE                MOV     R6,A
0030 A3                INC     DPTR
0031 E0                MOVX    A,@DPTR
0032 FF                MOV     R7,A
0033 FB                MOV     R3,A
0034 AA06              MOV     R2,AR6
0036 E4                CLR     A
0037 900000      E     MOV     DPTR,#g_meas+013H
003A E0                MOVX    A,@DPTR
003B FC                MOV     R4,A
003C A3                INC     DPTR
003D E0                MOVX    A,@DPTR
003E FD                MOV     R5,A
003F A3                INC     DPTR
0040 E0                MOVX    A,@DPTR
0041 FE                MOV     R6,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 30  

0042 A3                INC     DPTR
0043 E0                MOVX    A,@DPTR
0044 C3                CLR     C
0045 9B                SUBB    A,R3
0046 F500        R     MOV     err_emg_2+03H,A
0048 EE                MOV     A,R6
0049 9A                SUBB    A,R2
004A F500        R     MOV     err_emg_2+02H,A
004C ED                MOV     A,R5
004D 9400              SUBB    A,#00H
004F F500        R     MOV     err_emg_2+01H,A
0051 EC                MOV     A,R4
0052 9400              SUBB    A,#00H
0054 F500        R     MOV     err_emg_2,A
                                           ; SOURCE LINE # 408
0056 900000      E     MOV     DPTR,#c_mem+02H
0059 E0                MOVX    A,@DPTR
005A 24FE              ADD     A,#0FEH
005C 7003              JNZ     $ + 5H
005E 020000      R     LJMP    ?C0063
0061 14                DEC     A
0062 7003              JNZ     $ + 5H
0064 020000      R     LJMP    ?C0066
0067 14                DEC     A
0068 7003              JNZ     $ + 5H
006A 020000      R     LJMP    ?C0069
006D 14                DEC     A
006E 7003              JNZ     $ + 5H
0070 020000      R     LJMP    ?C0079
0073 14                DEC     A
0074 7003              JNZ     $ + 5H
0076 020000      R     LJMP    ?C0091
0079 2405              ADD     A,#05H
007B 6003              JZ      $ + 5H
007D 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 410
0080         ?C0056:
                                           ; SOURCE LINE # 412
0080 900000      E     MOV     DPTR,#master_mode
0083 E0                MOVX    A,@DPTR
0084 6026              JZ      ?C0057
                                           ; SOURCE LINE # 414
0086 900000      E     MOV     DPTR,#c_mem+045H
0089 E0                MOVX    A,@DPTR
008A FF                MOV     R7,A
008B 33                RLC     A
008C 95E0              SUBB    A,ACC
008E FE                MOV     R6,A
008F FD                MOV     R5,A
0090 FC                MOV     R4,A
0091 900000      E     MOV     DPTR,#g_meas
0094 E0                MOVX    A,@DPTR
0095 F8                MOV     R0,A
0096 A3                INC     DPTR
0097 E0                MOVX    A,@DPTR
0098 F9                MOV     R1,A
0099 A3                INC     DPTR
009A E0                MOVX    A,@DPTR
009B FA                MOV     R2,A
009C A3                INC     DPTR
009D E0                MOVX    A,@DPTR
009E FB                MOV     R3,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 31  

009F 120000      E     LCALL   ?C?LMUL
00A2 8F00        R     MOV     handle_value+03H,R7
00A4 8E00        R     MOV     handle_value+02H,R6
00A6 8D00        R     MOV     handle_value+01H,R5
00A8 8C00        R     MOV     handle_value,R4
                                           ; SOURCE LINE # 415
00AA 8009              SJMP    ?C0058
00AC         ?C0057:
                                           ; SOURCE LINE # 416
                                           ; SOURCE LINE # 420
00AC E4                CLR     A
00AD F500        R     MOV     handle_value+03H,A
00AF F500        R     MOV     handle_value+02H,A
00B1 F500        R     MOV     handle_value+01H,A
00B3 F500        R     MOV     handle_value,A
                                           ; SOURCE LINE # 421
00B5         ?C0058:
                                           ; SOURCE LINE # 424
00B5 900000      E     MOV     DPTR,#g_ref
00B8 E0                MOVX    A,@DPTR
00B9 F8                MOV     R0,A
00BA A3                INC     DPTR
00BB E0                MOVX    A,@DPTR
00BC F9                MOV     R1,A
00BD A3                INC     DPTR
00BE E0                MOVX    A,@DPTR
00BF FA                MOV     R2,A
00C0 A3                INC     DPTR
00C1 E0                MOVX    A,@DPTR
00C2 FB                MOV     R3,A
00C3 C3                CLR     C
00C4 E500        R     MOV     A,handle_value+03H
00C6 9B                SUBB    A,R3
00C7 FF                MOV     R7,A
00C8 E500        R     MOV     A,handle_value+02H
00CA 9A                SUBB    A,R2
00CB FE                MOV     R6,A
00CC E500        R     MOV     A,handle_value+01H
00CE 99                SUBB    A,R1
00CF FD                MOV     R5,A
00D0 E500        R     MOV     A,handle_value
00D2 98                SUBB    A,R0
00D3 FC                MOV     R4,A
00D4 900000      E     MOV     DPTR,#c_mem+02FH
00D7 E0                MOVX    A,@DPTR
00D8 F8                MOV     R0,A
00D9 A3                INC     DPTR
00DA E0                MOVX    A,@DPTR
00DB F9                MOV     R1,A
00DC A3                INC     DPTR
00DD E0                MOVX    A,@DPTR
00DE FA                MOV     R2,A
00DF A3                INC     DPTR
00E0 E0                MOVX    A,@DPTR
00E1 FB                MOV     R3,A
00E2 C3                CLR     C
00E3 120000      E     LCALL   ?C?SLCMP
00E6 5044              JNC     ?C0059
00E8 E4                CLR     A
00E9 FF                MOV     R7,A
00EA FE                MOV     R6,A
00EB FD                MOV     R5,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 32  

00EC FC                MOV     R4,A
00ED 900000      E     MOV     DPTR,#c_mem+02FH
00F0 E0                MOVX    A,@DPTR
00F1 F8                MOV     R0,A
00F2 A3                INC     DPTR
00F3 E0                MOVX    A,@DPTR
00F4 A3                INC     DPTR
00F5 E0                MOVX    A,@DPTR
00F6 A3                INC     DPTR
00F7 E0                MOVX    A,@DPTR
00F8 C3                CLR     C
00F9 120000      E     LCALL   ?C?SLCMP
00FC 602E              JZ      ?C0059
                                           ; SOURCE LINE # 425
00FE 900000      E     MOV     DPTR,#g_ref
0101 E0                MOVX    A,@DPTR
0102 FC                MOV     R4,A
0103 A3                INC     DPTR
0104 E0                MOVX    A,@DPTR
0105 FD                MOV     R5,A
0106 A3                INC     DPTR
0107 E0                MOVX    A,@DPTR
0108 FE                MOV     R6,A
0109 A3                INC     DPTR
010A E0                MOVX    A,@DPTR
010B FF                MOV     R7,A
010C 900000      E     MOV     DPTR,#c_mem+02FH
010F E0                MOVX    A,@DPTR
0110 F8                MOV     R0,A
0111 A3                INC     DPTR
0112 E0                MOVX    A,@DPTR
0113 A3                INC     DPTR
0114 E0                MOVX    A,@DPTR
0115 A3                INC     DPTR
0116 E0                MOVX    A,@DPTR
0117 EF                MOV     A,R7
0118 2B                ADD     A,R3
0119 FF                MOV     R7,A
011A EE                MOV     A,R6
011B 3A                ADDC    A,R2
011C FE                MOV     R6,A
011D ED                MOV     A,R5
011E 39                ADDC    A,R1
011F FD                MOV     R5,A
0120 EC                MOV     A,R4
0121 38                ADDC    A,R0
0122 FC                MOV     R4,A
0123 900000      E     MOV     DPTR,#g_ref
0126 120000      E     LCALL   ?C?LSTXDATA
0129 020000      R     LJMP    ?C0055
012C         ?C0059:
                                           ; SOURCE LINE # 426
                                           ; SOURCE LINE # 427
012C 900000      E     MOV     DPTR,#g_ref
012F E0                MOVX    A,@DPTR
0130 F8                MOV     R0,A
0131 A3                INC     DPTR
0132 E0                MOVX    A,@DPTR
0133 F9                MOV     R1,A
0134 A3                INC     DPTR
0135 E0                MOVX    A,@DPTR
0136 FA                MOV     R2,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 33  

0137 A3                INC     DPTR
0138 E0                MOVX    A,@DPTR
0139 FB                MOV     R3,A
013A C3                CLR     C
013B E500        R     MOV     A,handle_value+03H
013D 9B                SUBB    A,R3
013E FF                MOV     R7,A
013F E500        R     MOV     A,handle_value+02H
0141 9A                SUBB    A,R2
0142 FE                MOV     R6,A
0143 E500        R     MOV     A,handle_value+01H
0145 99                SUBB    A,R1
0146 FD                MOV     R5,A
0147 E500        R     MOV     A,handle_value
0149 98                SUBB    A,R0
014A FC                MOV     R4,A
014B 900000      E     MOV     DPTR,#c_mem+033H
014E E0                MOVX    A,@DPTR
014F F8                MOV     R0,A
0150 A3                INC     DPTR
0151 E0                MOVX    A,@DPTR
0152 F9                MOV     R1,A
0153 A3                INC     DPTR
0154 E0                MOVX    A,@DPTR
0155 FA                MOV     R2,A
0156 A3                INC     DPTR
0157 E0                MOVX    A,@DPTR
0158 FB                MOV     R3,A
0159 D3                SETB    C
015A 120000      E     LCALL   ?C?SLCMP
015D 4043              JC      ?C0061
015F E4                CLR     A
0160 FF                MOV     R7,A
0161 FE                MOV     R6,A
0162 FD                MOV     R5,A
0163 FC                MOV     R4,A
0164 900000      E     MOV     DPTR,#c_mem+033H
0167 E0                MOVX    A,@DPTR
0168 F8                MOV     R0,A
0169 A3                INC     DPTR
016A E0                MOVX    A,@DPTR
016B A3                INC     DPTR
016C E0                MOVX    A,@DPTR
016D A3                INC     DPTR
016E E0                MOVX    A,@DPTR
016F 120000      E     LCALL   ?C?SLCMP
0172 602E              JZ      ?C0061
                                           ; SOURCE LINE # 428
0174 900000      E     MOV     DPTR,#g_ref
0177 E0                MOVX    A,@DPTR
0178 FC                MOV     R4,A
0179 A3                INC     DPTR
017A E0                MOVX    A,@DPTR
017B FD                MOV     R5,A
017C A3                INC     DPTR
017D E0                MOVX    A,@DPTR
017E FE                MOV     R6,A
017F A3                INC     DPTR
0180 E0                MOVX    A,@DPTR
0181 FF                MOV     R7,A
0182 900000      E     MOV     DPTR,#c_mem+033H
0185 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 34  

0186 F8                MOV     R0,A
0187 A3                INC     DPTR
0188 E0                MOVX    A,@DPTR
0189 A3                INC     DPTR
018A E0                MOVX    A,@DPTR
018B A3                INC     DPTR
018C E0                MOVX    A,@DPTR
018D EF                MOV     A,R7
018E 2B                ADD     A,R3
018F FF                MOV     R7,A
0190 EE                MOV     A,R6
0191 3A                ADDC    A,R2
0192 FE                MOV     R6,A
0193 ED                MOV     A,R5
0194 39                ADDC    A,R1
0195 FD                MOV     R5,A
0196 EC                MOV     A,R4
0197 38                ADDC    A,R0
0198 FC                MOV     R4,A
0199 900000      E     MOV     DPTR,#g_ref
019C 120000      E     LCALL   ?C?LSTXDATA
019F 020000      R     LJMP    ?C0055
01A2         ?C0061:
                                           ; SOURCE LINE # 430
01A2 AF00        R     MOV     R7,handle_value+03H
01A4 AE00        R     MOV     R6,handle_value+02H
01A6 AD00        R     MOV     R5,handle_value+01H
01A8 AC00        R     MOV     R4,handle_value
01AA 900000      E     MOV     DPTR,#g_ref
01AD 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 431
                                           ; SOURCE LINE # 432
01B0 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 434
01B3         ?C0063:
                                           ; SOURCE LINE # 435
01B3 E4                CLR     A
01B4 FF                MOV     R7,A
01B5 FE                MOV     R6,A
01B6 FD                MOV     R5,A
01B7 FC                MOV     R4,A
01B8 AB00        R     MOV     R3,err_emg_1+03H
01BA AA00        R     MOV     R2,err_emg_1+02H
01BC A900        R     MOV     R1,err_emg_1+01H
01BE A800        R     MOV     R0,err_emg_1
01C0 D3                SETB    C
01C1 120000      E     LCALL   ?C?SLCMP
01C4 403D              JC      ?C0064
                                           ; SOURCE LINE # 436
01C6 900000      E     MOV     DPTR,#g_mem+027H
01C9 E0                MOVX    A,@DPTR
01CA FC                MOV     R4,A
01CB A3                INC     DPTR
01CC E0                MOVX    A,@DPTR
01CD FD                MOV     R5,A
01CE A3                INC     DPTR
01CF E0                MOVX    A,@DPTR
01D0 FE                MOV     R6,A
01D1 A3                INC     DPTR
01D2 E0                MOVX    A,@DPTR
01D3 FF                MOV     R7,A
01D4 A800        R     MOV     R0,err_emg_1
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 35  

01D6 120000      E     LCALL   ?C?LMUL
01D9 C006              PUSH    AR6
01DB C007              PUSH    AR7
01DD 900000      E     MOV     DPTR,#c_mem+037H
01E0 E0                MOVX    A,@DPTR
01E1 FE                MOV     R6,A
01E2 A3                INC     DPTR
01E3 E0                MOVX    A,@DPTR
01E4 FF                MOV     R7,A
01E5 C3                CLR     C
01E6 E4                CLR     A
01E7 9F                SUBB    A,R7
01E8 FF                MOV     R7,A
01E9 7404              MOV     A,#04H
01EB 9E                SUBB    A,R6
01EC FE                MOV     R6,A
01ED AB07              MOV     R3,AR7
01EF FA                MOV     R2,A
01F0 E4                CLR     A
01F1 F9                MOV     R1,A
01F2 F8                MOV     R0,A
01F3 D007              POP     AR7
01F5 D006              POP     AR6
01F7 120000      E     LCALL   ?C?SLDIV
01FA 900000      E     MOV     DPTR,#g_ref
01FD 120000      E     LCALL   ?C?LSTXDATA
0200 020000      R     LJMP    ?C0055
0203         ?C0064:
                                           ; SOURCE LINE # 438
0203 E4                CLR     A
0204 FF                MOV     R7,A
0205 FE                MOV     R6,A
0206 FD                MOV     R5,A
0207 FC                MOV     R4,A
0208 900000      E     MOV     DPTR,#g_ref
020B 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 439
020E 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 441
0211         ?C0066:
                                           ; SOURCE LINE # 442
0211 900000      E     MOV     DPTR,#g_refOld
0214 E0                MOVX    A,@DPTR
0215 FC                MOV     R4,A
0216 A3                INC     DPTR
0217 E0                MOVX    A,@DPTR
0218 FD                MOV     R5,A
0219 A3                INC     DPTR
021A E0                MOVX    A,@DPTR
021B FE                MOV     R6,A
021C A3                INC     DPTR
021D E0                MOVX    A,@DPTR
021E FF                MOV     R7,A
021F 900000      E     MOV     DPTR,#g_ref
0222 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 443
0225 E4                CLR     A
0226 FF                MOV     R7,A
0227 FE                MOV     R6,A
0228 FD                MOV     R5,A
0229 FC                MOV     R4,A
022A AB00        R     MOV     R3,err_emg_1+03H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 36  

022C AA00        R     MOV     R2,err_emg_1+02H
022E A900        R     MOV     R1,err_emg_1+01H
0230 A800        R     MOV     R0,err_emg_1
0232 D3                SETB    C
0233 120000      E     LCALL   ?C?SLCMP
0236 4056              JC      ?C0067
                                           ; SOURCE LINE # 444
0238 900000      E     MOV     DPTR,#g_mem+044H
023B E0                MOVX    A,@DPTR
023C FF                MOV     R7,A
023D E4                CLR     A
023E FC                MOV     R4,A
023F FD                MOV     R5,A
0240 FE                MOV     R6,A
0241 A800        R     MOV     R0,err_emg_1
0243 120000      E     LCALL   ?C?LMUL
0246 E4                CLR     A
0247 7B02              MOV     R3,#02H
0249 FA                MOV     R2,A
024A F9                MOV     R1,A
024B F8                MOV     R0,A
024C 120000      E     LCALL   ?C?LMUL
024F C006              PUSH    AR6
0251 C007              PUSH    AR7
0253 900000      E     MOV     DPTR,#c_mem+037H
0256 E0                MOVX    A,@DPTR
0257 FE                MOV     R6,A
0258 A3                INC     DPTR
0259 E0                MOVX    A,@DPTR
025A FF                MOV     R7,A
025B C3                CLR     C
025C E4                CLR     A
025D 9F                SUBB    A,R7
025E FF                MOV     R7,A
025F 7404              MOV     A,#04H
0261 9E                SUBB    A,R6
0262 FE                MOV     R6,A
0263 AB07              MOV     R3,AR7
0265 FA                MOV     R2,A
0266 E4                CLR     A
0267 F9                MOV     R1,A
0268 F8                MOV     R0,A
0269 D007              POP     AR7
026B D006              POP     AR6
026D 120000      E     LCALL   ?C?SLDIV
0270 900000      E     MOV     DPTR,#g_refOld
0273 E0                MOVX    A,@DPTR
0274 F8                MOV     R0,A
0275 A3                INC     DPTR
0276 E0                MOVX    A,@DPTR
0277 F9                MOV     R1,A
0278 A3                INC     DPTR
0279 E0                MOVX    A,@DPTR
027A FA                MOV     R2,A
027B A3                INC     DPTR
027C E0                MOVX    A,@DPTR
027D 2F                ADD     A,R7
027E FF                MOV     R7,A
027F EA                MOV     A,R2
0280 3E                ADDC    A,R6
0281 FE                MOV     R6,A
0282 E9                MOV     A,R1
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 37  

0283 3D                ADDC    A,R5
0284 FD                MOV     R5,A
0285 E8                MOV     A,R0
0286 3C                ADDC    A,R4
0287 FC                MOV     R4,A
0288 900000      E     MOV     DPTR,#g_ref
028B 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 445
028E         ?C0067:
                                           ; SOURCE LINE # 446
028E E4                CLR     A
028F FF                MOV     R7,A
0290 FE                MOV     R6,A
0291 FD                MOV     R5,A
0292 FC                MOV     R4,A
0293 AB00        R     MOV     R3,err_emg_2+03H
0295 AA00        R     MOV     R2,err_emg_2+02H
0297 A900        R     MOV     R1,err_emg_2+01H
0299 A800        R     MOV     R0,err_emg_2
029B D3                SETB    C
029C 120000      E     LCALL   ?C?SLCMP
029F 5003              JNC     $ + 5H
02A1 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 447
02A4 900000      E     MOV     DPTR,#g_mem+044H
02A7 E0                MOVX    A,@DPTR
02A8 FF                MOV     R7,A
02A9 E4                CLR     A
02AA FC                MOV     R4,A
02AB FD                MOV     R5,A
02AC FE                MOV     R6,A
02AD A800        R     MOV     R0,err_emg_2
02AF 120000      E     LCALL   ?C?LMUL
02B2 E4                CLR     A
02B3 7B02              MOV     R3,#02H
02B5 FA                MOV     R2,A
02B6 F9                MOV     R1,A
02B7 F8                MOV     R0,A
02B8 120000      E     LCALL   ?C?LMUL
02BB C006              PUSH    AR6
02BD C007              PUSH    AR7
02BF 900000      E     MOV     DPTR,#c_mem+039H
02C2 E0                MOVX    A,@DPTR
02C3 FE                MOV     R6,A
02C4 A3                INC     DPTR
02C5 E0                MOVX    A,@DPTR
02C6 FF                MOV     R7,A
02C7 C3                CLR     C
02C8 E4                CLR     A
02C9 9F                SUBB    A,R7
02CA FF                MOV     R7,A
02CB 7404              MOV     A,#04H
02CD 9E                SUBB    A,R6
02CE FE                MOV     R6,A
02CF AB07              MOV     R3,AR7
02D1 FA                MOV     R2,A
02D2 E4                CLR     A
02D3 F9                MOV     R1,A
02D4 F8                MOV     R0,A
02D5 D007              POP     AR7
02D7 D006              POP     AR6
02D9 120000      E     LCALL   ?C?SLDIV
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 38  

02DC A804              MOV     R0,AR4
02DE A905              MOV     R1,AR5
02E0 AA06              MOV     R2,AR6
02E2 AB07              MOV     R3,AR7
02E4 900000      E     MOV     DPTR,#g_refOld
02E7 E0                MOVX    A,@DPTR
02E8 FC                MOV     R4,A
02E9 A3                INC     DPTR
02EA E0                MOVX    A,@DPTR
02EB FD                MOV     R5,A
02EC A3                INC     DPTR
02ED E0                MOVX    A,@DPTR
02EE FE                MOV     R6,A
02EF A3                INC     DPTR
02F0 E0                MOVX    A,@DPTR
02F1 C3                CLR     C
02F2 9B                SUBB    A,R3
02F3 FF                MOV     R7,A
02F4 EE                MOV     A,R6
02F5 9A                SUBB    A,R2
02F6 FE                MOV     R6,A
02F7 ED                MOV     A,R5
02F8 99                SUBB    A,R1
02F9 FD                MOV     R5,A
02FA EC                MOV     A,R4
02FB 98                SUBB    A,R0
02FC FC                MOV     R4,A
02FD 900000      E     MOV     DPTR,#g_ref
0300 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 448
                                           ; SOURCE LINE # 449
0303 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 451
0306         ?C0069:
                                           ; SOURCE LINE # 452
0306 900000      E     MOV     DPTR,#g_refOld
0309 E0                MOVX    A,@DPTR
030A FC                MOV     R4,A
030B A3                INC     DPTR
030C E0                MOVX    A,@DPTR
030D FD                MOV     R5,A
030E A3                INC     DPTR
030F E0                MOVX    A,@DPTR
0310 FE                MOV     R6,A
0311 A3                INC     DPTR
0312 E0                MOVX    A,@DPTR
0313 FF                MOV     R7,A
0314 900000      E     MOV     DPTR,#g_ref
0317 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 453
031A 900000      R     MOV     DPTR,#current_emg
031D E0                MOVX    A,@DPTR
031E 14                DEC     A
031F 6048              JZ      ?C0074
0321 14                DEC     A
0322 7003              JNZ     $ + 5H
0324 020000      R     LJMP    ?C0076
0327 2402              ADD     A,#02H
0329 6003              JZ      $ + 5H
032B 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 454
032E         ?C0071:
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 39  

                                           ; SOURCE LINE # 456
032E E4                CLR     A
032F FF                MOV     R7,A
0330 FE                MOV     R6,A
0331 FD                MOV     R5,A
0332 FC                MOV     R4,A
0333 AB00        R     MOV     R3,err_emg_1+03H
0335 AA00        R     MOV     R2,err_emg_1+02H
0337 A900        R     MOV     R1,err_emg_1+01H
0339 A800        R     MOV     R0,err_emg_1
033B D3                SETB    C
033C 120000      E     LCALL   ?C?SLCMP
033F 4009              JC      ?C0072
                                           ; SOURCE LINE # 457
0341 900000      R     MOV     DPTR,#current_emg
0344 7401              MOV     A,#01H
0346 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 458
0347 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 459
034A         ?C0072:
                                           ; SOURCE LINE # 460
034A E4                CLR     A
034B FF                MOV     R7,A
034C FE                MOV     R6,A
034D FD                MOV     R5,A
034E FC                MOV     R4,A
034F AB00        R     MOV     R3,err_emg_2+03H
0351 AA00        R     MOV     R2,err_emg_2+02H
0353 A900        R     MOV     R1,err_emg_2+01H
0355 A800        R     MOV     R0,err_emg_2
0357 D3                SETB    C
0358 120000      E     LCALL   ?C?SLCMP
035B 5003              JNC     $ + 5H
035D 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 461
0360 900000      R     MOV     DPTR,#current_emg
0363 7402              MOV     A,#02H
0365 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 462
0366 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 463
                                           ; SOURCE LINE # 464
                                           ; SOURCE LINE # 466
0369         ?C0074:
                                           ; SOURCE LINE # 468
0369 E4                CLR     A
036A FF                MOV     R7,A
036B FE                MOV     R6,A
036C FD                MOV     R5,A
036D FC                MOV     R4,A
036E AB00        R     MOV     R3,err_emg_1+03H
0370 AA00        R     MOV     R2,err_emg_1+02H
0372 A900        R     MOV     R1,err_emg_1+01H
0374 A800        R     MOV     R0,err_emg_1
0376 C3                CLR     C
0377 120000      E     LCALL   ?C?SLCMP
037A 5008              JNC     ?C0075
                                           ; SOURCE LINE # 469
037C E4                CLR     A
037D 900000      R     MOV     DPTR,#current_emg
0380 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 40  

                                           ; SOURCE LINE # 470
0381 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 471
0384         ?C0075:
                                           ; SOURCE LINE # 472
0384 900000      E     MOV     DPTR,#g_mem+044H
0387 E0                MOVX    A,@DPTR
0388 FF                MOV     R7,A
0389 E4                CLR     A
038A FC                MOV     R4,A
038B FD                MOV     R5,A
038C FE                MOV     R6,A
038D AB00        R     MOV     R3,err_emg_1+03H
038F AA00        R     MOV     R2,err_emg_1+02H
0391 A900        R     MOV     R1,err_emg_1+01H
0393 A800        R     MOV     R0,err_emg_1
0395 120000      E     LCALL   ?C?LMUL
0398 E4                CLR     A
0399 7B02              MOV     R3,#02H
039B FA                MOV     R2,A
039C F9                MOV     R1,A
039D F8                MOV     R0,A
039E 120000      E     LCALL   ?C?LMUL
03A1 C006              PUSH    AR6
03A3 C007              PUSH    AR7
03A5 900000      E     MOV     DPTR,#c_mem+037H
03A8 E0                MOVX    A,@DPTR
03A9 FE                MOV     R6,A
03AA A3                INC     DPTR
03AB E0                MOVX    A,@DPTR
03AC FF                MOV     R7,A
03AD C3                CLR     C
03AE E4                CLR     A
03AF 9F                SUBB    A,R7
03B0 FF                MOV     R7,A
03B1 7404              MOV     A,#04H
03B3 9E                SUBB    A,R6
03B4 FE                MOV     R6,A
03B5 AB07              MOV     R3,AR7
03B7 FA                MOV     R2,A
03B8 E4                CLR     A
03B9 F9                MOV     R1,A
03BA F8                MOV     R0,A
03BB D007              POP     AR7
03BD D006              POP     AR6
03BF 120000      E     LCALL   ?C?SLDIV
03C2 900000      E     MOV     DPTR,#g_refOld
03C5 E0                MOVX    A,@DPTR
03C6 F8                MOV     R0,A
03C7 A3                INC     DPTR
03C8 E0                MOVX    A,@DPTR
03C9 F9                MOV     R1,A
03CA A3                INC     DPTR
03CB E0                MOVX    A,@DPTR
03CC FA                MOV     R2,A
03CD A3                INC     DPTR
03CE E0                MOVX    A,@DPTR
03CF 2F                ADD     A,R7
03D0 FF                MOV     R7,A
03D1 EA                MOV     A,R2
03D2 3E                ADDC    A,R6
03D3 FE                MOV     R6,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 41  

03D4 E9                MOV     A,R1
03D5 3D                ADDC    A,R5
03D6 FD                MOV     R5,A
03D7 E8                MOV     A,R0
03D8 3C                ADDC    A,R4
03D9 FC                MOV     R4,A
03DA 900000      E     MOV     DPTR,#g_ref
03DD 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 473
03E0 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 475
03E3         ?C0076:
                                           ; SOURCE LINE # 477
03E3 E4                CLR     A
03E4 FF                MOV     R7,A
03E5 FE                MOV     R6,A
03E6 FD                MOV     R5,A
03E7 FC                MOV     R4,A
03E8 AB00        R     MOV     R3,err_emg_2+03H
03EA AA00        R     MOV     R2,err_emg_2+02H
03EC A900        R     MOV     R1,err_emg_2+01H
03EE A800        R     MOV     R0,err_emg_2
03F0 C3                CLR     C
03F1 120000      E     LCALL   ?C?SLCMP
03F4 5008              JNC     ?C0077
                                           ; SOURCE LINE # 478
03F6 E4                CLR     A
03F7 900000      R     MOV     DPTR,#current_emg
03FA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 479
03FB 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 480
03FE         ?C0077:
                                           ; SOURCE LINE # 481
03FE 900000      E     MOV     DPTR,#g_mem+044H
0401 E0                MOVX    A,@DPTR
0402 FF                MOV     R7,A
0403 E4                CLR     A
0404 FC                MOV     R4,A
0405 FD                MOV     R5,A
0406 FE                MOV     R6,A
0407 AB00        R     MOV     R3,err_emg_2+03H
0409 AA00        R     MOV     R2,err_emg_2+02H
040B A900        R     MOV     R1,err_emg_2+01H
040D A800        R     MOV     R0,err_emg_2
040F 120000      E     LCALL   ?C?LMUL
0412 E4                CLR     A
0413 7B02              MOV     R3,#02H
0415 FA                MOV     R2,A
0416 F9                MOV     R1,A
0417 F8                MOV     R0,A
0418 120000      E     LCALL   ?C?LMUL
041B C006              PUSH    AR6
041D C007              PUSH    AR7
041F 900000      E     MOV     DPTR,#c_mem+039H
0422 E0                MOVX    A,@DPTR
0423 FE                MOV     R6,A
0424 A3                INC     DPTR
0425 E0                MOVX    A,@DPTR
0426 FF                MOV     R7,A
0427 C3                CLR     C
0428 E4                CLR     A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 42  

0429 9F                SUBB    A,R7
042A FF                MOV     R7,A
042B 7404              MOV     A,#04H
042D 9E                SUBB    A,R6
042E FE                MOV     R6,A
042F AB07              MOV     R3,AR7
0431 FA                MOV     R2,A
0432 E4                CLR     A
0433 F9                MOV     R1,A
0434 F8                MOV     R0,A
0435 D007              POP     AR7
0437 D006              POP     AR6
0439 120000      E     LCALL   ?C?SLDIV
043C A804              MOV     R0,AR4
043E A905              MOV     R1,AR5
0440 AA06              MOV     R2,AR6
0442 AB07              MOV     R3,AR7
0444 900000      E     MOV     DPTR,#g_refOld
0447 E0                MOVX    A,@DPTR
0448 FC                MOV     R4,A
0449 A3                INC     DPTR
044A E0                MOVX    A,@DPTR
044B FD                MOV     R5,A
044C A3                INC     DPTR
044D E0                MOVX    A,@DPTR
044E FE                MOV     R6,A
044F A3                INC     DPTR
0450 E0                MOVX    A,@DPTR
0451 C3                CLR     C
0452 9B                SUBB    A,R3
0453 FF                MOV     R7,A
0454 EE                MOV     A,R6
0455 9A                SUBB    A,R2
0456 FE                MOV     R6,A
0457 ED                MOV     A,R5
0458 99                SUBB    A,R1
0459 FD                MOV     R5,A
045A EC                MOV     A,R4
045B 98                SUBB    A,R0
045C FC                MOV     R4,A
045D 900000      E     MOV     DPTR,#g_ref
0460 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 482
0463 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 484
                                           ; SOURCE LINE # 485
                                           ; SOURCE LINE # 486
                                           ; SOURCE LINE # 488
0466 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 490
0469         ?C0079:
                                           ; SOURCE LINE # 491
0469 900000      E     MOV     DPTR,#g_refOld
046C E0                MOVX    A,@DPTR
046D FC                MOV     R4,A
046E A3                INC     DPTR
046F E0                MOVX    A,@DPTR
0470 FD                MOV     R5,A
0471 A3                INC     DPTR
0472 E0                MOVX    A,@DPTR
0473 FE                MOV     R6,A
0474 A3                INC     DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 43  

0475 E0                MOVX    A,@DPTR
0476 FF                MOV     R7,A
0477 900000      E     MOV     DPTR,#g_ref
047A 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 492
047D 900000      R     MOV     DPTR,#current_emg
0480 E0                MOVX    A,@DPTR
0481 14                DEC     A
0482 6048              JZ      ?C0084
0484 14                DEC     A
0485 7003              JNZ     $ + 5H
0487 020000      R     LJMP    ?C0087
048A 2402              ADD     A,#02H
048C 6003              JZ      $ + 5H
048E 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 494
0491         ?C0081:
                                           ; SOURCE LINE # 495
0491 E4                CLR     A
0492 FF                MOV     R7,A
0493 FE                MOV     R6,A
0494 FD                MOV     R5,A
0495 FC                MOV     R4,A
0496 AB00        R     MOV     R3,err_emg_1+03H
0498 AA00        R     MOV     R2,err_emg_1+02H
049A A900        R     MOV     R1,err_emg_1+01H
049C A800        R     MOV     R0,err_emg_1
049E D3                SETB    C
049F 120000      E     LCALL   ?C?SLCMP
04A2 4009              JC      ?C0082
                                           ; SOURCE LINE # 496
04A4 900000      R     MOV     DPTR,#current_emg
04A7 7401              MOV     A,#01H
04A9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 497
04AA 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 498
04AD         ?C0082:
                                           ; SOURCE LINE # 499
04AD E4                CLR     A
04AE FF                MOV     R7,A
04AF FE                MOV     R6,A
04B0 FD                MOV     R5,A
04B1 FC                MOV     R4,A
04B2 AB00        R     MOV     R3,err_emg_2+03H
04B4 AA00        R     MOV     R2,err_emg_2+02H
04B6 A900        R     MOV     R1,err_emg_2+01H
04B8 A800        R     MOV     R0,err_emg_2
04BA D3                SETB    C
04BB 120000      E     LCALL   ?C?SLCMP
04BE 5003              JNC     $ + 5H
04C0 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 500
04C3 900000      R     MOV     DPTR,#current_emg
04C6 7402              MOV     A,#02H
04C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 501
04C9 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 502
                                           ; SOURCE LINE # 503
                                           ; SOURCE LINE # 506
04CC         ?C0084:
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 44  

                                           ; SOURCE LINE # 508
04CC E4                CLR     A
04CD FF                MOV     R7,A
04CE FE                MOV     R6,A
04CF FD                MOV     R5,A
04D0 FC                MOV     R4,A
04D1 AB00        R     MOV     R3,err_emg_1+03H
04D3 AA00        R     MOV     R2,err_emg_1+02H
04D5 A900        R     MOV     R1,err_emg_1+01H
04D7 A800        R     MOV     R0,err_emg_1
04D9 C3                CLR     C
04DA 120000      E     LCALL   ?C?SLCMP
04DD 501B              JNC     ?C0085
04DF E4                CLR     A
04E0 FF                MOV     R7,A
04E1 FE                MOV     R6,A
04E2 FD                MOV     R5,A
04E3 FC                MOV     R4,A
04E4 AB00        R     MOV     R3,err_emg_2+03H
04E6 AA00        R     MOV     R2,err_emg_2+02H
04E8 A900        R     MOV     R1,err_emg_2+01H
04EA A800        R     MOV     R0,err_emg_2
04EC C3                CLR     C
04ED 120000      E     LCALL   ?C?SLCMP
04F0 5008              JNC     ?C0085
                                           ; SOURCE LINE # 509
04F2 E4                CLR     A
04F3 900000      R     MOV     DPTR,#current_emg
04F6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 510
04F7 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 511
04FA         ?C0085:
                                           ; SOURCE LINE # 513
04FA E4                CLR     A
04FB FF                MOV     R7,A
04FC FE                MOV     R6,A
04FD FD                MOV     R5,A
04FE FC                MOV     R4,A
04FF AB00        R     MOV     R3,err_emg_1+03H
0501 AA00        R     MOV     R2,err_emg_1+02H
0503 A900        R     MOV     R1,err_emg_1+01H
0505 A800        R     MOV     R0,err_emg_1
0507 D3                SETB    C
0508 120000      E     LCALL   ?C?SLCMP
050B 5003              JNC     $ + 5H
050D 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 514
0510 900000      E     MOV     DPTR,#g_mem+044H
0513 E0                MOVX    A,@DPTR
0514 FF                MOV     R7,A
0515 E4                CLR     A
0516 FC                MOV     R4,A
0517 FD                MOV     R5,A
0518 FE                MOV     R6,A
0519 A800        R     MOV     R0,err_emg_1
051B 120000      E     LCALL   ?C?LMUL
051E 7802              MOV     R0,#02H
0520 120000      E     LCALL   ?C?LSHL
0523 C006              PUSH    AR6
0525 C007              PUSH    AR7
0527 900000      E     MOV     DPTR,#c_mem+037H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 45  

052A E0                MOVX    A,@DPTR
052B FE                MOV     R6,A
052C A3                INC     DPTR
052D E0                MOVX    A,@DPTR
052E FF                MOV     R7,A
052F C3                CLR     C
0530 E4                CLR     A
0531 9F                SUBB    A,R7
0532 FF                MOV     R7,A
0533 7404              MOV     A,#04H
0535 9E                SUBB    A,R6
0536 FE                MOV     R6,A
0537 AB07              MOV     R3,AR7
0539 FA                MOV     R2,A
053A E4                CLR     A
053B F9                MOV     R1,A
053C F8                MOV     R0,A
053D D007              POP     AR7
053F D006              POP     AR6
0541 120000      E     LCALL   ?C?SLDIV
0544 900000      E     MOV     DPTR,#g_refOld
0547 E0                MOVX    A,@DPTR
0548 F8                MOV     R0,A
0549 A3                INC     DPTR
054A E0                MOVX    A,@DPTR
054B F9                MOV     R1,A
054C A3                INC     DPTR
054D E0                MOVX    A,@DPTR
054E FA                MOV     R2,A
054F A3                INC     DPTR
0550 E0                MOVX    A,@DPTR
0551 2F                ADD     A,R7
0552 FF                MOV     R7,A
0553 EA                MOV     A,R2
0554 3E                ADDC    A,R6
0555 FE                MOV     R6,A
0556 E9                MOV     A,R1
0557 3D                ADDC    A,R5
0558 FD                MOV     R5,A
0559 E8                MOV     A,R0
055A 3C                ADDC    A,R4
055B FC                MOV     R4,A
055C 900000      E     MOV     DPTR,#g_ref
055F 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 516
0562 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 519
0565         ?C0087:
                                           ; SOURCE LINE # 521
0565 E4                CLR     A
0566 FF                MOV     R7,A
0567 FE                MOV     R6,A
0568 FD                MOV     R5,A
0569 FC                MOV     R4,A
056A AB00        R     MOV     R3,err_emg_1+03H
056C AA00        R     MOV     R2,err_emg_1+02H
056E A900        R     MOV     R1,err_emg_1+01H
0570 A800        R     MOV     R0,err_emg_1
0572 C3                CLR     C
0573 120000      E     LCALL   ?C?SLCMP
0576 501B              JNC     ?C0088
0578 E4                CLR     A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 46  

0579 FF                MOV     R7,A
057A FE                MOV     R6,A
057B FD                MOV     R5,A
057C FC                MOV     R4,A
057D AB00        R     MOV     R3,err_emg_2+03H
057F AA00        R     MOV     R2,err_emg_2+02H
0581 A900        R     MOV     R1,err_emg_2+01H
0583 A800        R     MOV     R0,err_emg_2
0585 C3                CLR     C
0586 120000      E     LCALL   ?C?SLCMP
0589 5008              JNC     ?C0088
                                           ; SOURCE LINE # 522
058B E4                CLR     A
058C 900000      R     MOV     DPTR,#current_emg
058F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 523
0590 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 524
0593         ?C0088:
                                           ; SOURCE LINE # 526
0593 E4                CLR     A
0594 FF                MOV     R7,A
0595 FE                MOV     R6,A
0596 FD                MOV     R5,A
0597 FC                MOV     R4,A
0598 AB00        R     MOV     R3,err_emg_2+03H
059A AA00        R     MOV     R2,err_emg_2+02H
059C A900        R     MOV     R1,err_emg_2+01H
059E A800        R     MOV     R0,err_emg_2
05A0 D3                SETB    C
05A1 120000      E     LCALL   ?C?SLCMP
05A4 5003              JNC     $ + 5H
05A6 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 527
05A9 900000      E     MOV     DPTR,#c_mem+044H
05AC E0                MOVX    A,@DPTR
05AD FF                MOV     R7,A
05AE E4                CLR     A
05AF FC                MOV     R4,A
05B0 FD                MOV     R5,A
05B1 FE                MOV     R6,A
05B2 A800        R     MOV     R0,err_emg_2
05B4 120000      E     LCALL   ?C?LMUL
05B7 7802              MOV     R0,#02H
05B9 120000      E     LCALL   ?C?LSHL
05BC C006              PUSH    AR6
05BE C007              PUSH    AR7
05C0 900000      E     MOV     DPTR,#c_mem+039H
05C3 E0                MOVX    A,@DPTR
05C4 FE                MOV     R6,A
05C5 A3                INC     DPTR
05C6 E0                MOVX    A,@DPTR
05C7 FF                MOV     R7,A
05C8 C3                CLR     C
05C9 E4                CLR     A
05CA 9F                SUBB    A,R7
05CB FF                MOV     R7,A
05CC 7404              MOV     A,#04H
05CE 9E                SUBB    A,R6
05CF FE                MOV     R6,A
05D0 AB07              MOV     R3,AR7
05D2 FA                MOV     R2,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 47  

05D3 E4                CLR     A
05D4 F9                MOV     R1,A
05D5 F8                MOV     R0,A
05D6 D007              POP     AR7
05D8 D006              POP     AR6
05DA 120000      E     LCALL   ?C?SLDIV
05DD A804              MOV     R0,AR4
05DF A905              MOV     R1,AR5
05E1 AA06              MOV     R2,AR6
05E3 AB07              MOV     R3,AR7
05E5 900000      E     MOV     DPTR,#g_refOld
05E8 E0                MOVX    A,@DPTR
05E9 FC                MOV     R4,A
05EA A3                INC     DPTR
05EB E0                MOVX    A,@DPTR
05EC FD                MOV     R5,A
05ED A3                INC     DPTR
05EE E0                MOVX    A,@DPTR
05EF FE                MOV     R6,A
05F0 A3                INC     DPTR
05F1 E0                MOVX    A,@DPTR
05F2 C3                CLR     C
05F3 9B                SUBB    A,R3
05F4 FF                MOV     R7,A
05F5 EE                MOV     A,R6
05F6 9A                SUBB    A,R2
05F7 FE                MOV     R6,A
05F8 ED                MOV     A,R5
05F9 99                SUBB    A,R1
05FA FD                MOV     R5,A
05FB EC                MOV     A,R4
05FC 98                SUBB    A,R0
05FD FC                MOV     R4,A
05FE 900000      E     MOV     DPTR,#g_ref
0601 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 528
                                           ; SOURCE LINE # 529
0604 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 531
                                           ; SOURCE LINE # 532
                                           ; SOURCE LINE # 533
                                           ; SOURCE LINE # 535
0607 020000      R     LJMP    ?C0055
                                           ; SOURCE LINE # 537
060A         ?C0091:
                                           ; SOURCE LINE # 539
060A 900000      E     MOV     DPTR,#c_mem+06EH
060D E0                MOVX    A,@DPTR
060E FC                MOV     R4,A
060F A3                INC     DPTR
0610 E0                MOVX    A,@DPTR
0611 FD                MOV     R5,A
0612 E4                CLR     A
0613 120000      E     LCALL   ?C?FCASTI
0616 E4                CLR     A
0617 FB                MOV     R3,A
0618 FA                MOV     R2,A
0619 F9                MOV     R1,A
061A 7840              MOV     R0,#040H
061C 120000      E     LCALL   ?C?FPDIV
061F C004              PUSH    AR4
0621 C005              PUSH    AR5
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 48  

0623 C006              PUSH    AR6
0625 C007              PUSH    AR7
0627 900000      E     MOV     DPTR,#g_meas+02FH
062A E0                MOVX    A,@DPTR
062B FC                MOV     R4,A
062C A3                INC     DPTR
062D E0                MOVX    A,@DPTR
062E FD                MOV     R5,A
062F EC                MOV     A,R4
0630 120000      E     LCALL   ?C?FCASTI
0633 D003              POP     AR3
0635 D002              POP     AR2
0637 D001              POP     AR1
0639 D000              POP     AR0
063B 120000      E     LCALL   ?C?FPDIV
063E 8F00        R     MOV     joy_perc+03H,R7
0640 8E00        R     MOV     joy_perc+02H,R6
0642 8D00        R     MOV     joy_perc+01H,R5
0644 8C00        R     MOV     joy_perc,R4
                                           ; SOURCE LINE # 540
0646 900000      E     MOV     DPTR,#c_mem+06CH
0649 E0                MOVX    A,@DPTR
064A FC                MOV     R4,A
064B A3                INC     DPTR
064C E0                MOVX    A,@DPTR
064D FD                MOV     R5,A
064E E4                CLR     A
064F 120000      E     LCALL   ?C?FCASTI
0652 AB00        R     MOV     R3,joy_perc+03H
0654 AA00        R     MOV     R2,joy_perc+02H
0656 A900        R     MOV     R1,joy_perc+01H
0658 A800        R     MOV     R0,joy_perc
065A 120000      E     LCALL   ?C?FPMUL
065D C004              PUSH    AR4
065F C005              PUSH    AR5
0661 C006              PUSH    AR6
0663 C007              PUSH    AR7
0665 900000      E     MOV     DPTR,#g_refOld
0668 E0                MOVX    A,@DPTR
0669 FC                MOV     R4,A
066A A3                INC     DPTR
066B E0                MOVX    A,@DPTR
066C FD                MOV     R5,A
066D A3                INC     DPTR
066E E0                MOVX    A,@DPTR
066F FE                MOV     R6,A
0670 A3                INC     DPTR
0671 E0                MOVX    A,@DPTR
0672 FF                MOV     R7,A
0673 EC                MOV     A,R4
0674 120000      E     LCALL   ?C?FCASTL
0677 D003              POP     AR3
0679 D002              POP     AR2
067B D001              POP     AR1
067D D000              POP     AR0
067F 120000      E     LCALL   ?C?FPADD
0682 120000      E     LCALL   ?C?CASTF
0685 900000      E     MOV     DPTR,#g_ref
0688 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 542
                                           ; SOURCE LINE # 543
                                           ; SOURCE LINE # 544
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 49  

                                           ; SOURCE LINE # 545
068B         ?C0055:
                                           ; SOURCE LINE # 548
068B 900000      E     MOV     DPTR,#c_mem+01EH
068E E0                MOVX    A,@DPTR
068F 606A              JZ      ?C0093
                                           ; SOURCE LINE # 549
0691 A3                INC     DPTR
0692 E0                MOVX    A,@DPTR
0693 FC                MOV     R4,A
0694 A3                INC     DPTR
0695 E0                MOVX    A,@DPTR
0696 FD                MOV     R5,A
0697 A3                INC     DPTR
0698 E0                MOVX    A,@DPTR
0699 FE                MOV     R6,A
069A A3                INC     DPTR
069B E0                MOVX    A,@DPTR
069C FF                MOV     R7,A
069D 900000      E     MOV     DPTR,#g_ref
06A0 E0                MOVX    A,@DPTR
06A1 F8                MOV     R0,A
06A2 A3                INC     DPTR
06A3 E0                MOVX    A,@DPTR
06A4 F9                MOV     R1,A
06A5 A3                INC     DPTR
06A6 E0                MOVX    A,@DPTR
06A7 FA                MOV     R2,A
06A8 A3                INC     DPTR
06A9 E0                MOVX    A,@DPTR
06AA FB                MOV     R3,A
06AB C3                CLR     C
06AC 120000      E     LCALL   ?C?SLCMP
06AF 5014              JNC     ?C0094
                                           ; SOURCE LINE # 550
06B1 900000      E     MOV     DPTR,#c_mem+01FH
06B4 E0                MOVX    A,@DPTR
06B5 FC                MOV     R4,A
06B6 A3                INC     DPTR
06B7 E0                MOVX    A,@DPTR
06B8 FD                MOV     R5,A
06B9 A3                INC     DPTR
06BA E0                MOVX    A,@DPTR
06BB FE                MOV     R6,A
06BC A3                INC     DPTR
06BD E0                MOVX    A,@DPTR
06BE FF                MOV     R7,A
06BF 900000      E     MOV     DPTR,#g_ref
06C2 120000      E     LCALL   ?C?LSTXDATA
06C5         ?C0094:
                                           ; SOURCE LINE # 551
06C5 900000      E     MOV     DPTR,#c_mem+027H
06C8 E0                MOVX    A,@DPTR
06C9 FC                MOV     R4,A
06CA A3                INC     DPTR
06CB E0                MOVX    A,@DPTR
06CC FD                MOV     R5,A
06CD A3                INC     DPTR
06CE E0                MOVX    A,@DPTR
06CF FE                MOV     R6,A
06D0 A3                INC     DPTR
06D1 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 50  

06D2 FF                MOV     R7,A
06D3 900000      E     MOV     DPTR,#g_ref
06D6 E0                MOVX    A,@DPTR
06D7 F8                MOV     R0,A
06D8 A3                INC     DPTR
06D9 E0                MOVX    A,@DPTR
06DA F9                MOV     R1,A
06DB A3                INC     DPTR
06DC E0                MOVX    A,@DPTR
06DD FA                MOV     R2,A
06DE A3                INC     DPTR
06DF E0                MOVX    A,@DPTR
06E0 FB                MOV     R3,A
06E1 D3                SETB    C
06E2 120000      E     LCALL   ?C?SLCMP
06E5 4014              JC      ?C0093
                                           ; SOURCE LINE # 552
06E7 900000      E     MOV     DPTR,#c_mem+027H
06EA E0                MOVX    A,@DPTR
06EB FC                MOV     R4,A
06EC A3                INC     DPTR
06ED E0                MOVX    A,@DPTR
06EE FD                MOV     R5,A
06EF A3                INC     DPTR
06F0 E0                MOVX    A,@DPTR
06F1 FE                MOV     R6,A
06F2 A3                INC     DPTR
06F3 E0                MOVX    A,@DPTR
06F4 FF                MOV     R7,A
06F5 900000      E     MOV     DPTR,#g_ref
06F8 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 553
06FB         ?C0093:
                                           ; SOURCE LINE # 555
06FB 900000      E     MOV     DPTR,#c_mem+047H
06FE E0                MOVX    A,@DPTR
06FF 6401              XRL     A,#01H
0701 6003              JZ      $ + 5H
0703 020000      R     LJMP    ?C0101
                                           ; SOURCE LINE # 556
0706 900000      E     MOV     DPTR,#rest_enabled
0709 E0                MOVX    A,@DPTR
070A B40114            CJNE    A,#01H,?C0097
                                           ; SOURCE LINE # 558
070D 900000      E     MOV     DPTR,#rest_pos_curr_ref
0710 E0                MOVX    A,@DPTR
0711 FC                MOV     R4,A
0712 A3                INC     DPTR
0713 E0                MOVX    A,@DPTR
0714 FD                MOV     R5,A
0715 A3                INC     DPTR
0716 E0                MOVX    A,@DPTR
0717 FE                MOV     R6,A
0718 A3                INC     DPTR
0719 E0                MOVX    A,@DPTR
071A FF                MOV     R7,A
071B 900000      E     MOV     DPTR,#g_ref
071E 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 559
0721         ?C0097:
                                           ; SOURCE LINE # 561
0721 900000      E     MOV     DPTR,#forced_open
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 51  

0724 E0                MOVX    A,@DPTR
0725 6401              XRL     A,#01H
0727 6003              JZ      $ + 5H
0729 020000      R     LJMP    ?C0101
                                           ; SOURCE LINE # 563
072C FF                MOV     R7,A
072D FE                MOV     R6,A
072E FD                MOV     R5,A
072F FC                MOV     R4,A
0730 AB00        R     MOV     R3,err_emg_2+03H
0732 AA00        R     MOV     R2,err_emg_2+02H
0734 A900        R     MOV     R1,err_emg_2+01H
0736 A800        R     MOV     R0,err_emg_2
0738 D3                SETB    C
0739 120000      E     LCALL   ?C?SLCMP
073C 405C              JC      ?C0099
                                           ; SOURCE LINE # 564
073E 900000      E     MOV     DPTR,#g_mem+048H
0741 E0                MOVX    A,@DPTR
0742 FC                MOV     R4,A
0743 A3                INC     DPTR
0744 E0                MOVX    A,@DPTR
0745 FD                MOV     R5,A
0746 A3                INC     DPTR
0747 E0                MOVX    A,@DPTR
0748 FE                MOV     R6,A
0749 A3                INC     DPTR
074A E0                MOVX    A,@DPTR
074B FF                MOV     R7,A
074C A800        R     MOV     R0,err_emg_2
074E 120000      E     LCALL   ?C?LMUL
0751 C006              PUSH    AR6
0753 C007              PUSH    AR7
0755 900000      E     MOV     DPTR,#c_mem+039H
0758 E0                MOVX    A,@DPTR
0759 FE                MOV     R6,A
075A A3                INC     DPTR
075B E0                MOVX    A,@DPTR
075C FF                MOV     R7,A
075D C3                CLR     C
075E E4                CLR     A
075F 9F                SUBB    A,R7
0760 FF                MOV     R7,A
0761 7404              MOV     A,#04H
0763 9E                SUBB    A,R6
0764 FE                MOV     R6,A
0765 AB07              MOV     R3,AR7
0767 FA                MOV     R2,A
0768 E4                CLR     A
0769 F9                MOV     R1,A
076A F8                MOV     R0,A
076B D007              POP     AR7
076D D006              POP     AR6
076F 120000      E     LCALL   ?C?SLDIV
0772 A804              MOV     R0,AR4
0774 A905              MOV     R1,AR5
0776 AA06              MOV     R2,AR6
0778 AB07              MOV     R3,AR7
077A 900000      E     MOV     DPTR,#g_mem+048H
077D E0                MOVX    A,@DPTR
077E FC                MOV     R4,A
077F A3                INC     DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 52  

0780 E0                MOVX    A,@DPTR
0781 FD                MOV     R5,A
0782 A3                INC     DPTR
0783 E0                MOVX    A,@DPTR
0784 FE                MOV     R6,A
0785 A3                INC     DPTR
0786 E0                MOVX    A,@DPTR
0787 C3                CLR     C
0788 9B                SUBB    A,R3
0789 FF                MOV     R7,A
078A EE                MOV     A,R6
078B 9A                SUBB    A,R2
078C FE                MOV     R6,A
078D ED                MOV     A,R5
078E 99                SUBB    A,R1
078F FD                MOV     R5,A
0790 EC                MOV     A,R4
0791 98                SUBB    A,R0
0792 FC                MOV     R4,A
0793 900000      E     MOV     DPTR,#g_ref
0796 120000      E     LCALL   ?C?LSTXDATA
0799 22                RET     
079A         ?C0099:
                                           ; SOURCE LINE # 565
                                           ; SOURCE LINE # 566
079A 900000      E     MOV     DPTR,#g_mem+048H
079D E0                MOVX    A,@DPTR
079E FC                MOV     R4,A
079F A3                INC     DPTR
07A0 E0                MOVX    A,@DPTR
07A1 FD                MOV     R5,A
07A2 A3                INC     DPTR
07A3 E0                MOVX    A,@DPTR
07A4 FE                MOV     R6,A
07A5 A3                INC     DPTR
07A6 E0                MOVX    A,@DPTR
07A7 FF                MOV     R7,A
07A8 900000      E     MOV     DPTR,#g_ref
07AB 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 567
07AE E4                CLR     A
07AF 900000      E     MOV     DPTR,#forced_open
07B2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 568
                                           ; SOURCE LINE # 569
                                           ; SOURCE LINE # 570
                                           ; SOURCE LINE # 571
07B3         ?C0101:
07B3 22                RET     
             ; FUNCTION motor_control (END)

             ; FUNCTION analog_read_end (BEGIN)
                                           ; SOURCE LINE # 577
0000         ?C0102:
                                           ; SOURCE LINE # 620
0000 120000      E     LCALL   ADC_STATUS_Read
0003 EF                MOV     A,R7
0004 700A              JNZ     ?C0103
                                           ; SOURCE LINE # 621
0006 3000F7            JNB     interrupt_flag,?C0102
                                           ; SOURCE LINE # 622
0009 C200        E     CLR     interrupt_flag
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 53  

                                           ; SOURCE LINE # 623
000B 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 624
                                           ; SOURCE LINE # 625
000E 80F0              SJMP    ?C0102
0010         ?C0103:
                                           ; SOURCE LINE # 628
0010 900000      E     MOV     DPTR,#ADC_buf+01H
0013 E0                MOVX    A,@DPTR
0014 249A              ADD     A,#09AH
0016 FF                MOV     R7,A
0017 900000      E     MOV     DPTR,#ADC_buf
001A E0                MOVX    A,@DPTR
001B 34F9              ADDC    A,#0F9H
001D FE                MOV     R6,A
001E 33                RLC     A
001F 95E0              SUBB    A,ACC
0021 FD                MOV     R5,A
0022 FC                MOV     R4,A
0023 E4                CLR     A
0024 7BA0              MOV     R3,#0A0H
0026 7A07              MOV     R2,#07H
0028 F9                MOV     R1,A
0029 F8                MOV     R0,A
002A 120000      E     LCALL   ?C?LMUL
002D 7807              MOV     R0,#07H
002F 120000      E     LCALL   ?C?SLSHR
0032 900000      E     MOV     DPTR,#dev_tension
0035 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 630
0038 300005            JNB     interrupt_flag,?C0105
                                           ; SOURCE LINE # 631
003B C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 632
003D 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 633
0040         ?C0105:
                                           ; SOURCE LINE # 635
0040 900000      E     MOV     DPTR,#first_tension_valid
0043 E0                MOVX    A,@DPTR
0044 6077              JZ      ?C0106
0046 300074            JNB     tension_valid,?C0106
                                           ; SOURCE LINE # 636
0049 900000      R     MOV     DPTR,#count
004C E0                MOVX    A,@DPTR
004D 04                INC     A
004E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 638
004F E0                MOVX    A,@DPTR
0050 64E8              XRL     A,#0E8H
0052 7002              JNZ     ?C0213
0054 7403              MOV     A,#03H
0056         ?C0213:
0056 7065              JNZ     ?C0106
                                           ; SOURCE LINE # 639
0058 7F28              MOV     R7,#028H
005A 7E23              MOV     R6,#023H
005C FD                MOV     R5,A
005D FC                MOV     R4,A
005E 900000      E     MOV     DPTR,#dev_tension
0061 E0                MOVX    A,@DPTR
0062 F8                MOV     R0,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 54  

0063 A3                INC     DPTR
0064 E0                MOVX    A,@DPTR
0065 F9                MOV     R1,A
0066 A3                INC     DPTR
0067 E0                MOVX    A,@DPTR
0068 FA                MOV     R2,A
0069 A3                INC     DPTR
006A E0                MOVX    A,@DPTR
006B FB                MOV     R3,A
006C C3                CLR     C
006D 120000      E     LCALL   ?C?SLCMP
0070 500F              JNC     ?C0108
                                           ; SOURCE LINE # 640
0072 E4                CLR     A
0073 7F40              MOV     R7,#040H
0075 7E1F              MOV     R6,#01FH
0077 FD                MOV     R5,A
0078 FC                MOV     R4,A
0079 900000      E     MOV     DPTR,#pow_tension
007C 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 641
007F 8037              SJMP    ?C0109
0081         ?C0108:
                                           ; SOURCE LINE # 642
                                           ; SOURCE LINE # 643
0081 E4                CLR     A
0082 7FC8              MOV     R7,#0C8H
0084 7E32              MOV     R6,#032H
0086 FD                MOV     R5,A
0087 FC                MOV     R4,A
0088 900000      E     MOV     DPTR,#dev_tension
008B E0                MOVX    A,@DPTR
008C F8                MOV     R0,A
008D A3                INC     DPTR
008E E0                MOVX    A,@DPTR
008F F9                MOV     R1,A
0090 A3                INC     DPTR
0091 E0                MOVX    A,@DPTR
0092 FA                MOV     R2,A
0093 A3                INC     DPTR
0094 E0                MOVX    A,@DPTR
0095 FB                MOV     R3,A
0096 C3                CLR     C
0097 120000      E     LCALL   ?C?SLCMP
009A 500F              JNC     ?C0110
                                           ; SOURCE LINE # 644
009C E4                CLR     A
009D 7FE0              MOV     R7,#0E0H
009F 7E2E              MOV     R6,#02EH
00A1 FD                MOV     R5,A
00A2 FC                MOV     R4,A
00A3 900000      E     MOV     DPTR,#pow_tension
00A6 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 645
00A9 800D              SJMP    ?C0109
00AB         ?C0110:
                                           ; SOURCE LINE # 647
00AB E4                CLR     A
00AC 7FC0              MOV     R7,#0C0H
00AE 7E5D              MOV     R6,#05DH
00B0 FD                MOV     R5,A
00B1 FC                MOV     R4,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 55  

00B2 900000      E     MOV     DPTR,#pow_tension
00B5 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 648
00B8         ?C0109:
                                           ; SOURCE LINE # 650
00B8 E4                CLR     A
00B9 900000      E     MOV     DPTR,#first_tension_valid
00BC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 651
                                           ; SOURCE LINE # 652
00BD         ?C0106:
                                           ; SOURCE LINE # 656
00BD E4                CLR     A
00BE 7F58              MOV     R7,#058H
00C0 7E1B              MOV     R6,#01BH
00C2 FD                MOV     R5,A
00C3 FC                MOV     R4,A
00C4 900000      E     MOV     DPTR,#dev_tension
00C7 E0                MOVX    A,@DPTR
00C8 F8                MOV     R0,A
00C9 A3                INC     DPTR
00CA E0                MOVX    A,@DPTR
00CB F9                MOV     R1,A
00CC A3                INC     DPTR
00CD E0                MOVX    A,@DPTR
00CE FA                MOV     R2,A
00CF A3                INC     DPTR
00D0 E0                MOVX    A,@DPTR
00D1 FB                MOV     R3,A
00D2 D3                SETB    C
00D3 120000      E     LCALL   ?C?SLCMP
00D6 5003              JNC     $ + 5H
00D8 020000      R     LJMP    ?C0112
                                           ; SOURCE LINE # 659
00DB E4                CLR     A
00DC 7FE8              MOV     R7,#0E8H
00DE 7E03              MOV     R6,#03H
00E0 FD                MOV     R5,A
00E1 FC                MOV     R4,A
00E2 900000      R     MOV     DPTR,#count2
00E5 E0                MOVX    A,@DPTR
00E6 F8                MOV     R0,A
00E7 A3                INC     DPTR
00E8 E0                MOVX    A,@DPTR
00E9 F9                MOV     R1,A
00EA A3                INC     DPTR
00EB E0                MOVX    A,@DPTR
00EC FA                MOV     R2,A
00ED A3                INC     DPTR
00EE E0                MOVX    A,@DPTR
00EF FB                MOV     R3,A
00F0 120000      E     LCALL   ?C?ULCMP
00F3 7004              JNZ     ?C0113
                                           ; SOURCE LINE # 660
00F5 D200        E     SETB    tension_valid
                                           ; SOURCE LINE # 661
00F7 8036              SJMP    ?C0114
00F9         ?C0113:
                                           ; SOURCE LINE # 662
                                           ; SOURCE LINE # 663
00F9 900000      R     MOV     DPTR,#count2
00FC E0                MOVX    A,@DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 56  

00FD FC                MOV     R4,A
00FE A3                INC     DPTR
00FF E0                MOVX    A,@DPTR
0100 FD                MOV     R5,A
0101 A3                INC     DPTR
0102 E0                MOVX    A,@DPTR
0103 FE                MOV     R6,A
0104 A3                INC     DPTR
0105 E0                MOVX    A,@DPTR
0106 2401              ADD     A,#01H
0108 FF                MOV     R7,A
0109 E4                CLR     A
010A 3E                ADDC    A,R6
010B FE                MOV     R6,A
010C E4                CLR     A
010D 3D                ADDC    A,R5
010E FD                MOV     R5,A
010F E4                CLR     A
0110 3C                ADDC    A,R4
0111 FC                MOV     R4,A
0112 900000      R     MOV     DPTR,#count2
0115 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 664
0118 900000      E     MOV     DPTR,#dev_tension
011B E0                MOVX    A,@DPTR
011C FC                MOV     R4,A
011D A3                INC     DPTR
011E E0                MOVX    A,@DPTR
011F FD                MOV     R5,A
0120 A3                INC     DPTR
0121 E0                MOVX    A,@DPTR
0122 FE                MOV     R6,A
0123 A3                INC     DPTR
0124 E0                MOVX    A,@DPTR
0125 FF                MOV     R7,A
0126 120000      E     LCALL   _filter_voltage
0129 900000      E     MOV     DPTR,#dev_tension_f
012C 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 665
012F         ?C0114:
                                           ; SOURCE LINE # 669
012F 300005            JNB     interrupt_flag,?C0115
                                           ; SOURCE LINE # 670
0132 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 671
0134 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 672
0137         ?C0115:
                                           ; SOURCE LINE # 675
0137 900000      E     MOV     DPTR,#g_mem+03BH
013A E0                MOVX    A,@DPTR
013B 7004              JNZ     ?C0116
                                           ; SOURCE LINE # 676
013D F500        R     MOV     emg_1_status,A
                                           ; SOURCE LINE # 677
013F F500        R     MOV     emg_2_status,A
                                           ; SOURCE LINE # 678
0141         ?C0116:
                                           ; SOURCE LINE # 681
0141 900000      E     MOV     DPTR,#c_mem+02H
0144 E0                MOVX    A,@DPTR
0145 6406              XRL     A,#06H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 57  

0147 6003              JZ      $ + 5H
0149 020000      R     LJMP    ?C0117
                                           ; SOURCE LINE # 685
014C E500        R     MOV     A,UD_status
014E 14                DEC     A
014F 7003              JNZ     $ + 5H
0151 020000      R     LJMP    ?C0124
0154 14                DEC     A
0155 7003              JNZ     $ + 5H
0157 020000      R     LJMP    ?C0125
015A 14                DEC     A
015B 7003              JNZ     $ + 5H
015D 020000      R     LJMP    ?C0128
0160 14                DEC     A
0161 7003              JNZ     $ + 5H
0163 020000      R     LJMP    ?C0132
0166 2404              ADD     A,#04H
0168 6003              JZ      $ + 5H
016A 020000      R     LJMP    ?C0118
                                           ; SOURCE LINE # 686
016D         ?C0119:
                                           ; SOURCE LINE # 687
016D 900000      E     MOV     DPTR,#ADC_buf+04H
0170 E0                MOVX    A,@DPTR
0171 FE                MOV     R6,A
0172 A3                INC     DPTR
0173 E0                MOVX    A,@DPTR
0174 FF                MOV     R7,A
0175 EE                MOV     A,R6
0176 33                RLC     A
0177 95E0              SUBB    A,ACC
0179 8F00        R     MOV     i_aux+03H,R7
017B 8E00        R     MOV     i_aux+02H,R6
017D F500        R     MOV     i_aux+01H,A
017F F500        R     MOV     i_aux,A
                                           ; SOURCE LINE # 689
0181 C3                CLR     C
0182 E500        R     MOV     A,i_aux+03H
0184 9500        R     SUBB    A,UD_mean_value+03H
0186 FF                MOV     R7,A
0187 E500        R     MOV     A,i_aux+02H
0189 9500        R     SUBB    A,UD_mean_value+02H
018B FE                MOV     R6,A
018C E500        R     MOV     A,i_aux+01H
018E 9500        R     SUBB    A,UD_mean_value+01H
0190 FD                MOV     R5,A
0191 E500        R     MOV     A,i_aux
0193 9500        R     SUBB    A,UD_mean_value
0195 FC                MOV     R4,A
0196 120000      E     LCALL   ?C?FCASTL
0199 C004              PUSH    AR4
019B C005              PUSH    AR5
019D C006              PUSH    AR6
019F C007              PUSH    AR7
01A1 AF00        R     MOV     R7,UD_mean_value+03H
01A3 AE00        R     MOV     R6,UD_mean_value+02H
01A5 AD00        R     MOV     R5,UD_mean_value+01H
01A7 AC00        R     MOV     R4,UD_mean_value
01A9 EC                MOV     A,R4
01AA 120000      E     LCALL   ?C?FCASTL
01AD A804              MOV     R0,AR4
01AF A905              MOV     R1,AR5
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 58  

01B1 AA06              MOV     R2,AR6
01B3 AB07              MOV     R3,AR7
01B5 D007              POP     AR7
01B7 D006              POP     AR6
01B9 D005              POP     AR5
01BB D004              POP     AR4
01BD 120000      E     LCALL   ?C?FPDIV
01C0 C004              PUSH    AR4
01C2 C005              PUSH    AR5
01C4 C006              PUSH    AR6
01C6 C007              PUSH    AR7
01C8 900000      E     MOV     DPTR,#g_mem+06EH
01CB E0                MOVX    A,@DPTR
01CC FC                MOV     R4,A
01CD A3                INC     DPTR
01CE E0                MOVX    A,@DPTR
01CF FD                MOV     R5,A
01D0 E4                CLR     A
01D1 120000      E     LCALL   ?C?FCASTI
01D4 D003              POP     AR3
01D6 D002              POP     AR2
01D8 D001              POP     AR1
01DA D000              POP     AR0
01DC 120000      E     LCALL   ?C?FPMUL
01DF 120000      E     LCALL   ?C?CASTF
01E2 8F00        R     MOV     i_aux+03H,R7
01E4 8E00        R     MOV     i_aux+02H,R6
01E6 8D00        R     MOV     i_aux+01H,R5
01E8 8C00        R     MOV     i_aux,R4
                                           ; SOURCE LINE # 691
01EA 300005            JNB     interrupt_flag,?C0120
                                           ; SOURCE LINE # 692
01ED C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 693
01EF 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 694
01F2         ?C0120:
                                           ; SOURCE LINE # 697
01F2 7F00              MOV     R7,#00H
01F4 7EFC              MOV     R6,#0FCH
01F6 7DFF              MOV     R5,#0FFH
01F8 7CFF              MOV     R4,#0FFH
01FA AB00        R     MOV     R3,i_aux+03H
01FC AA00        R     MOV     R2,i_aux+02H
01FE A900        R     MOV     R1,i_aux+01H
0200 A800        R     MOV     R0,i_aux
0202 C3                CLR     C
0203 120000      E     LCALL   ?C?SLCMP
0206 500C              JNC     ?C0121
                                           ; SOURCE LINE # 698
0208 750000      R     MOV     i_aux+03H,#00H
020B 7500FC      R     MOV     i_aux+02H,#0FCH
020E 7500FF      R     MOV     i_aux+01H,#0FFH
0211 7500FF      R     MOV     i_aux,#0FFH
0214         ?C0121:
                                           ; SOURCE LINE # 699
0214 E4                CLR     A
0215 FF                MOV     R7,A
0216 7E04              MOV     R6,#04H
0218 FD                MOV     R5,A
0219 FC                MOV     R4,A
021A AB00        R     MOV     R3,i_aux+03H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 59  

021C AA00        R     MOV     R2,i_aux+02H
021E A900        R     MOV     R1,i_aux+01H
0220 A800        R     MOV     R0,i_aux
0222 D3                SETB    C
0223 120000      E     LCALL   ?C?SLCMP
0226 400A              JC      ?C0122
                                           ; SOURCE LINE # 700
0228 E4                CLR     A
0229 F500        R     MOV     i_aux+03H,A
022B 750004      R     MOV     i_aux+02H,#04H
022E F500        R     MOV     i_aux+01H,A
0230 F500        R     MOV     i_aux,A
0232         ?C0122:
                                           ; SOURCE LINE # 702
0232 900000      E     MOV     DPTR,#g_meas+031H
0235 E500        R     MOV     A,i_aux+02H
0237 F0                MOVX    @DPTR,A
0238 A3                INC     DPTR
0239 E500        R     MOV     A,i_aux+03H
023B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 704
023C 200003      E     JB      interrupt_flag,$ + 6H
023F 020000      R     LJMP    ?C0118
                                           ; SOURCE LINE # 705
0242 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 706
0244 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 707
                                           ; SOURCE LINE # 709
0247 020000      R     LJMP    ?C0118
                                           ; SOURCE LINE # 711
024A         ?C0124:
                                           ; SOURCE LINE # 712
024A E4                CLR     A
024B F500        R     MOV     UD_counter,A
024D F500        R     MOV     UD_counter+01H,A
                                           ; SOURCE LINE # 713
024F F500        R     MOV     UD_mean_value+03H,A
0251 F500        R     MOV     UD_mean_value+02H,A
0253 F500        R     MOV     UD_mean_value+01H,A
0255 F500        R     MOV     UD_mean_value,A
                                           ; SOURCE LINE # 714
0257 750004      R     MOV     UD_status,#04H
                                           ; SOURCE LINE # 716
025A 020000      R     LJMP    ?C0118
                                           ; SOURCE LINE # 718
025D         ?C0125:
                                           ; SOURCE LINE # 719
025D 0500        R     INC     UD_counter+01H
025F E500        R     MOV     A,UD_counter+01H
0261 7002              JNZ     ?C0214
0263 0500        R     INC     UD_counter
0265         ?C0214:
                                           ; SOURCE LINE # 720
0265 6464              XRL     A,#064H
0267 4500        R     ORL     A,UD_counter
0269 707F              JNZ     ?C0118
                                           ; SOURCE LINE # 721
026B F500        R     MOV     UD_counter,A
026D F500        R     MOV     UD_counter+01H,A
                                           ; SOURCE LINE # 723
026F 300005            JNB     interrupt_flag,?C0127
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 60  

                                           ; SOURCE LINE # 724
0272 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 725
0274 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 726
0277         ?C0127:
                                           ; SOURCE LINE # 728
0277 750003      R     MOV     UD_status,#03H
                                           ; SOURCE LINE # 729
                                           ; SOURCE LINE # 731
027A 806E              SJMP    ?C0118
                                           ; SOURCE LINE # 733
027C         ?C0128:
                                           ; SOURCE LINE # 735
027C 0500        R     INC     UD_counter+01H
027E E500        R     MOV     A,UD_counter+01H
0280 7002              JNZ     ?C0215
0282 0500        R     INC     UD_counter
0284         ?C0215:
                                           ; SOURCE LINE # 736
0284 900000      E     MOV     DPTR,#ADC_buf+04H
0287 E0                MOVX    A,@DPTR
0288 FE                MOV     R6,A
0289 A3                INC     DPTR
028A E0                MOVX    A,@DPTR
028B FF                MOV     R7,A
028C EE                MOV     A,R6
028D 33                RLC     A
028E 95E0              SUBB    A,ACC
0290 FD                MOV     R5,A
0291 FC                MOV     R4,A
0292 E500        R     MOV     A,UD_mean_value+03H
0294 2F                ADD     A,R7
0295 F500        R     MOV     UD_mean_value+03H,A
0297 E500        R     MOV     A,UD_mean_value+02H
0299 3E                ADDC    A,R6
029A F500        R     MOV     UD_mean_value+02H,A
029C E500        R     MOV     A,UD_mean_value+01H
029E 3D                ADDC    A,R5
029F F500        R     MOV     UD_mean_value+01H,A
02A1 E500        R     MOV     A,UD_mean_value
02A3 3C                ADDC    A,R4
02A4 F500        R     MOV     UD_mean_value,A
                                           ; SOURCE LINE # 738
02A6 300005            JNB     interrupt_flag,?C0129
                                           ; SOURCE LINE # 739
02A9 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 740
02AB 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 741
02AE         ?C0129:
                                           ; SOURCE LINE # 743
02AE E500        R     MOV     A,UD_counter+01H
02B0 64C8              XRL     A,#0C8H
02B2 4500        R     ORL     A,UD_counter
02B4 7034              JNZ     ?C0118
                                           ; SOURCE LINE # 744
02B6 AF00        R     MOV     R7,UD_mean_value+03H
02B8 AE00        R     MOV     R6,UD_mean_value+02H
02BA AD00        R     MOV     R5,UD_mean_value+01H
02BC AC00        R     MOV     R4,UD_mean_value
02BE 7BC8              MOV     R3,#0C8H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 61  

02C0 FA                MOV     R2,A
02C1 F9                MOV     R1,A
02C2 F8                MOV     R0,A
02C3 120000      E     LCALL   ?C?SLDIV
02C6 8F00        R     MOV     UD_mean_value+03H,R7
02C8 8E00        R     MOV     UD_mean_value+02H,R6
02CA 8D00        R     MOV     UD_mean_value+01H,R5
02CC 8C00        R     MOV     UD_mean_value,R4
                                           ; SOURCE LINE # 746
02CE 300005            JNB     interrupt_flag,?C0131
                                           ; SOURCE LINE # 747
02D1 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 748
02D3 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 749
02D6         ?C0131:
                                           ; SOURCE LINE # 751
02D6 E4                CLR     A
02D7 F500        R     MOV     UD_counter,A
02D9 F500        R     MOV     UD_counter+01H,A
                                           ; SOURCE LINE # 752
02DB F500        R     MOV     UD_status,A
                                           ; SOURCE LINE # 753
                                           ; SOURCE LINE # 754
02DD 800B              SJMP    ?C0118
                                           ; SOURCE LINE # 756
02DF         ?C0132:
                                           ; SOURCE LINE # 757
02DF E500        R     MOV     A,emg_1_status
02E1 7007              JNZ     ?C0118
02E3 E500        R     MOV     A,emg_2_status
02E5 7003              JNZ     ?C0118
                                           ; SOURCE LINE # 758
02E7 750002      R     MOV     UD_status,#02H
                                           ; SOURCE LINE # 759
                                           ; SOURCE LINE # 760
02EA         ?C0118:
                                           ; SOURCE LINE # 762
02EA 300005            JNB     interrupt_flag,?C0134
                                           ; SOURCE LINE # 763
02ED C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 764
02EF 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 765
02F2         ?C0134:
                                           ; SOURCE LINE # 767
02F2 E500        R     MOV     A,LR_status
02F4 14                DEC     A
02F5 7003              JNZ     $ + 5H
02F7 020000      R     LJMP    ?C0141
02FA 14                DEC     A
02FB 7003              JNZ     $ + 5H
02FD 020000      R     LJMP    ?C0142
0300 14                DEC     A
0301 7003              JNZ     $ + 5H
0303 020000      R     LJMP    ?C0145
0306 14                DEC     A
0307 7003              JNZ     $ + 5H
0309 020000      R     LJMP    ?C0148
030C 2404              ADD     A,#04H
030E 6003              JZ      $ + 5H
0310 020000      R     LJMP    ?C0135
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 62  

                                           ; SOURCE LINE # 768
0313         ?C0136:
                                           ; SOURCE LINE # 769
0313 900000      E     MOV     DPTR,#ADC_buf+06H
0316 E0                MOVX    A,@DPTR
0317 FE                MOV     R6,A
0318 A3                INC     DPTR
0319 E0                MOVX    A,@DPTR
031A FF                MOV     R7,A
031B EE                MOV     A,R6
031C 33                RLC     A
031D 95E0              SUBB    A,ACC
031F 8F00        R     MOV     i_aux+03H,R7
0321 8E00        R     MOV     i_aux+02H,R6
0323 F500        R     MOV     i_aux+01H,A
0325 F500        R     MOV     i_aux,A
                                           ; SOURCE LINE # 771
0327 C3                CLR     C
0328 E500        R     MOV     A,i_aux+03H
032A 9500        R     SUBB    A,LR_mean_value+03H
032C FF                MOV     R7,A
032D E500        R     MOV     A,i_aux+02H
032F 9500        R     SUBB    A,LR_mean_value+02H
0331 FE                MOV     R6,A
0332 E500        R     MOV     A,i_aux+01H
0334 9500        R     SUBB    A,LR_mean_value+01H
0336 FD                MOV     R5,A
0337 E500        R     MOV     A,i_aux
0339 9500        R     SUBB    A,LR_mean_value
033B FC                MOV     R4,A
033C 120000      E     LCALL   ?C?FCASTL
033F C004              PUSH    AR4
0341 C005              PUSH    AR5
0343 C006              PUSH    AR6
0345 C007              PUSH    AR7
0347 AF00        R     MOV     R7,LR_mean_value+03H
0349 AE00        R     MOV     R6,LR_mean_value+02H
034B AD00        R     MOV     R5,LR_mean_value+01H
034D AC00        R     MOV     R4,LR_mean_value
034F EC                MOV     A,R4
0350 120000      E     LCALL   ?C?FCASTL
0353 A804              MOV     R0,AR4
0355 A905              MOV     R1,AR5
0357 AA06              MOV     R2,AR6
0359 AB07              MOV     R3,AR7
035B D007              POP     AR7
035D D006              POP     AR6
035F D005              POP     AR5
0361 D004              POP     AR4
0363 120000      E     LCALL   ?C?FPDIV
0366 C004              PUSH    AR4
0368 C005              PUSH    AR5
036A C006              PUSH    AR6
036C C007              PUSH    AR7
036E 900000      E     MOV     DPTR,#g_mem+06EH
0371 E0                MOVX    A,@DPTR
0372 FC                MOV     R4,A
0373 A3                INC     DPTR
0374 E0                MOVX    A,@DPTR
0375 FD                MOV     R5,A
0376 E4                CLR     A
0377 120000      E     LCALL   ?C?FCASTI
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 63  

037A D003              POP     AR3
037C D002              POP     AR2
037E D001              POP     AR1
0380 D000              POP     AR0
0382 120000      E     LCALL   ?C?FPMUL
0385 120000      E     LCALL   ?C?CASTF
0388 8F00        R     MOV     i_aux+03H,R7
038A 8E00        R     MOV     i_aux+02H,R6
038C 8D00        R     MOV     i_aux+01H,R5
038E 8C00        R     MOV     i_aux,R4
                                           ; SOURCE LINE # 773
0390 300005            JNB     interrupt_flag,?C0137
                                           ; SOURCE LINE # 774
0393 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 775
0395 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 776
0398         ?C0137:
                                           ; SOURCE LINE # 779
0398 7F00              MOV     R7,#00H
039A 7EFC              MOV     R6,#0FCH
039C 7DFF              MOV     R5,#0FFH
039E 7CFF              MOV     R4,#0FFH
03A0 AB00        R     MOV     R3,i_aux+03H
03A2 AA00        R     MOV     R2,i_aux+02H
03A4 A900        R     MOV     R1,i_aux+01H
03A6 A800        R     MOV     R0,i_aux
03A8 C3                CLR     C
03A9 120000      E     LCALL   ?C?SLCMP
03AC 500C              JNC     ?C0138
                                           ; SOURCE LINE # 780
03AE 750000      R     MOV     i_aux+03H,#00H
03B1 7500FC      R     MOV     i_aux+02H,#0FCH
03B4 7500FF      R     MOV     i_aux+01H,#0FFH
03B7 7500FF      R     MOV     i_aux,#0FFH
03BA         ?C0138:
                                           ; SOURCE LINE # 781
03BA E4                CLR     A
03BB FF                MOV     R7,A
03BC 7E04              MOV     R6,#04H
03BE FD                MOV     R5,A
03BF FC                MOV     R4,A
03C0 AB00        R     MOV     R3,i_aux+03H
03C2 AA00        R     MOV     R2,i_aux+02H
03C4 A900        R     MOV     R1,i_aux+01H
03C6 A800        R     MOV     R0,i_aux
03C8 D3                SETB    C
03C9 120000      E     LCALL   ?C?SLCMP
03CC 400A              JC      ?C0139
                                           ; SOURCE LINE # 782
03CE E4                CLR     A
03CF F500        R     MOV     i_aux+03H,A
03D1 750004      R     MOV     i_aux+02H,#04H
03D4 F500        R     MOV     i_aux+01H,A
03D6 F500        R     MOV     i_aux,A
03D8         ?C0139:
                                           ; SOURCE LINE # 784
03D8 300005            JNB     interrupt_flag,?C0140
                                           ; SOURCE LINE # 785
03DB C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 786
03DD 120000      R     LCALL   interrupt_manager
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 64  

                                           ; SOURCE LINE # 787
03E0         ?C0140:
                                           ; SOURCE LINE # 789
03E0 900000      E     MOV     DPTR,#g_meas+02FH
03E3 E500        R     MOV     A,i_aux+02H
03E5 F0                MOVX    @DPTR,A
03E6 A3                INC     DPTR
03E7 E500        R     MOV     A,i_aux+03H
03E9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 791
03EA 020000      R     LJMP    ?C0135
                                           ; SOURCE LINE # 793
03ED         ?C0141:
                                           ; SOURCE LINE # 794
03ED E4                CLR     A
03EE F500        R     MOV     LR_counter,A
03F0 F500        R     MOV     LR_counter+01H,A
                                           ; SOURCE LINE # 795
03F2 F500        R     MOV     LR_mean_value+03H,A
03F4 F500        R     MOV     LR_mean_value+02H,A
03F6 F500        R     MOV     LR_mean_value+01H,A
03F8 F500        R     MOV     LR_mean_value,A
                                           ; SOURCE LINE # 796
03FA 750004      R     MOV     LR_status,#04H
                                           ; SOURCE LINE # 797
03FD 020000      R     LJMP    ?C0135
                                           ; SOURCE LINE # 799
0400         ?C0142:
                                           ; SOURCE LINE # 800
0400 0500        R     INC     LR_counter+01H
0402 E500        R     MOV     A,LR_counter+01H
0404 7002              JNZ     ?C0216
0406 0500        R     INC     LR_counter
0408         ?C0216:
                                           ; SOURCE LINE # 801
0408 6464              XRL     A,#064H
040A 4500        R     ORL     A,LR_counter
040C 707B              JNZ     ?C0135
                                           ; SOURCE LINE # 802
040E F500        R     MOV     LR_counter,A
0410 F500        R     MOV     LR_counter+01H,A
                                           ; SOURCE LINE # 804
0412 300005            JNB     interrupt_flag,?C0144
                                           ; SOURCE LINE # 805
0415 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 806
0417 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 807
041A         ?C0144:
                                           ; SOURCE LINE # 809
041A 750003      R     MOV     LR_status,#03H
                                           ; SOURCE LINE # 810
                                           ; SOURCE LINE # 811
041D 806A              SJMP    ?C0135
                                           ; SOURCE LINE # 813
041F         ?C0145:
                                           ; SOURCE LINE # 815
041F 0500        R     INC     LR_counter+01H
0421 E500        R     MOV     A,LR_counter+01H
0423 7002              JNZ     ?C0217
0425 0500        R     INC     LR_counter
0427         ?C0217:
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 65  

                                           ; SOURCE LINE # 816
0427 900000      E     MOV     DPTR,#ADC_buf+06H
042A E0                MOVX    A,@DPTR
042B FE                MOV     R6,A
042C A3                INC     DPTR
042D E0                MOVX    A,@DPTR
042E FF                MOV     R7,A
042F EE                MOV     A,R6
0430 33                RLC     A
0431 95E0              SUBB    A,ACC
0433 FD                MOV     R5,A
0434 FC                MOV     R4,A
0435 E500        R     MOV     A,LR_mean_value+03H
0437 2F                ADD     A,R7
0438 F500        R     MOV     LR_mean_value+03H,A
043A E500        R     MOV     A,LR_mean_value+02H
043C 3E                ADDC    A,R6
043D F500        R     MOV     LR_mean_value+02H,A
043F E500        R     MOV     A,LR_mean_value+01H
0441 3D                ADDC    A,R5
0442 F500        R     MOV     LR_mean_value+01H,A
0444 E500        R     MOV     A,LR_mean_value
0446 3C                ADDC    A,R4
0447 F500        R     MOV     LR_mean_value,A
                                           ; SOURCE LINE # 817
0449 E500        R     MOV     A,LR_counter+01H
044B 64C8              XRL     A,#0C8H
044D 4500        R     ORL     A,LR_counter
044F 7038              JNZ     ?C0135
                                           ; SOURCE LINE # 818
0451 AF00        R     MOV     R7,LR_mean_value+03H
0453 AE00        R     MOV     R6,LR_mean_value+02H
0455 AD00        R     MOV     R5,LR_mean_value+01H
0457 AC00        R     MOV     R4,LR_mean_value
0459 7BC8              MOV     R3,#0C8H
045B FA                MOV     R2,A
045C F9                MOV     R1,A
045D F8                MOV     R0,A
045E 120000      E     LCALL   ?C?SLDIV
0461 8F00        R     MOV     LR_mean_value+03H,R7
0463 8E00        R     MOV     LR_mean_value+02H,R6
0465 8D00        R     MOV     LR_mean_value+01H,R5
0467 8C00        R     MOV     LR_mean_value,R4
                                           ; SOURCE LINE # 820
0469 300005            JNB     interrupt_flag,?C0147
                                           ; SOURCE LINE # 821
046C C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 822
046E 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 823
0471         ?C0147:
                                           ; SOURCE LINE # 825
0471 E4                CLR     A
0472 F500        R     MOV     LR_counter,A
0474 F500        R     MOV     LR_counter+01H,A
                                           ; SOURCE LINE # 826
0476 F500        R     MOV     LR_status,A
                                           ; SOURCE LINE # 827
                                           ; SOURCE LINE # 828
0478 800F              SJMP    ?C0135
                                           ; SOURCE LINE # 830
047A         ?C0148:
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 66  

                                           ; SOURCE LINE # 831
047A E500        R     MOV     A,emg_1_status
047C 700B              JNZ     ?C0135
047E E500        R     MOV     A,emg_2_status
0480 7007              JNZ     ?C0135
0482 E500        R     MOV     A,UD_status
0484 7003              JNZ     ?C0135
                                           ; SOURCE LINE # 832
0486 750002      R     MOV     LR_status,#02H
                                           ; SOURCE LINE # 833
                                           ; SOURCE LINE # 834
0489         ?C0135:
                                           ; SOURCE LINE # 836
0489 200003      E     JB      interrupt_flag,$ + 6H
048C 020000      R     LJMP    ?C0197
                                           ; SOURCE LINE # 837
048F C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 838
0491 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 839
                                           ; SOURCE LINE # 841
0494 020000      R     LJMP    ?C0197
0497         ?C0117:
                                           ; SOURCE LINE # 842
                                           ; SOURCE LINE # 848
0497 E500        R     MOV     A,emg_1_status
0499 14                DEC     A
049A 7003              JNZ     $ + 5H
049C 020000      R     LJMP    ?C0160
049F 14                DEC     A
04A0 7003              JNZ     $ + 5H
04A2 020000      R     LJMP    ?C0161
04A5 14                DEC     A
04A6 7003              JNZ     $ + 5H
04A8 020000      R     LJMP    ?C0164
04AB 2403              ADD     A,#03H
04AD 6003              JZ      $ + 5H
04AF 020000      R     LJMP    ?C0152
                                           ; SOURCE LINE # 849
04B2         ?C0153:
                                           ; SOURCE LINE # 850
04B2 900000      E     MOV     DPTR,#ADC_buf+04H
04B5 E0                MOVX    A,@DPTR
04B6 FE                MOV     R6,A
04B7 A3                INC     DPTR
04B8 E0                MOVX    A,@DPTR
04B9 FF                MOV     R7,A
04BA EE                MOV     A,R6
04BB 33                RLC     A
04BC 95E0              SUBB    A,ACC
04BE 8F00        R     MOV     i_aux+03H,R7
04C0 8E00        R     MOV     i_aux+02H,R6
04C2 F500        R     MOV     i_aux+01H,A
04C4 F500        R     MOV     i_aux,A
                                           ; SOURCE LINE # 851
04C6 E4                CLR     A
04C7 FF                MOV     R7,A
04C8 FE                MOV     R6,A
04C9 FD                MOV     R5,A
04CA FC                MOV     R4,A
04CB AB00        R     MOV     R3,i_aux+03H
04CD AA00        R     MOV     R2,i_aux+02H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 67  

04CF A900        R     MOV     R1,i_aux+01H
04D1 A800        R     MOV     R0,i_aux
04D3 C3                CLR     C
04D4 120000      E     LCALL   ?C?SLCMP
04D7 5009              JNC     ?C0154
                                           ; SOURCE LINE # 852
04D9 E4                CLR     A
04DA F500        R     MOV     i_aux+03H,A
04DC F500        R     MOV     i_aux+02H,A
04DE F500        R     MOV     i_aux+01H,A
04E0 F500        R     MOV     i_aux,A
04E2         ?C0154:
                                           ; SOURCE LINE # 853
04E2 AF00        R     MOV     R7,i_aux+03H
04E4 AE00        R     MOV     R6,i_aux+02H
04E6 AD00        R     MOV     R5,i_aux+01H
04E8 AC00        R     MOV     R4,i_aux
04EA 120000      E     LCALL   _filter_ch1
04ED 8F00        R     MOV     i_aux+03H,R7
04EF 8E00        R     MOV     i_aux+02H,R6
04F1 8D00        R     MOV     i_aux+01H,R5
04F3 8C00        R     MOV     i_aux,R4
                                           ; SOURCE LINE # 854
04F5 780A              MOV     R0,#0AH
04F7 120000      E     LCALL   ?C?LSHL
04FA 900000      E     MOV     DPTR,#g_mem+03CH
04FD E0                MOVX    A,@DPTR
04FE F8                MOV     R0,A
04FF A3                INC     DPTR
0500 E0                MOVX    A,@DPTR
0501 F9                MOV     R1,A
0502 A3                INC     DPTR
0503 E0                MOVX    A,@DPTR
0504 FA                MOV     R2,A
0505 A3                INC     DPTR
0506 E0                MOVX    A,@DPTR
0507 FB                MOV     R3,A
0508 120000      E     LCALL   ?C?ULDIV
050B 8F00        R     MOV     i_aux+03H,R7
050D 8E00        R     MOV     i_aux+02H,R6
050F 8D00        R     MOV     i_aux+01H,R5
0511 8C00        R     MOV     i_aux,R4
                                           ; SOURCE LINE # 856
0513 300005            JNB     interrupt_flag,?C0155
                                           ; SOURCE LINE # 857
0516 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 858
0518 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 859
051B         ?C0155:
                                           ; SOURCE LINE # 861
051B E4                CLR     A
051C FF                MOV     R7,A
051D FE                MOV     R6,A
051E FD                MOV     R5,A
051F FC                MOV     R4,A
0520 AB00        R     MOV     R3,i_aux+03H
0522 AA00        R     MOV     R2,i_aux+02H
0524 A900        R     MOV     R1,i_aux+01H
0526 A800        R     MOV     R0,i_aux
0528 C3                CLR     C
0529 120000      E     LCALL   ?C?SLCMP
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 68  

052C 500B              JNC     ?C0156
                                           ; SOURCE LINE # 862
052E E4                CLR     A
052F F500        R     MOV     i_aux+03H,A
0531 F500        R     MOV     i_aux+02H,A
0533 F500        R     MOV     i_aux+01H,A
0535 F500        R     MOV     i_aux,A
0537 801E              SJMP    ?C0157
0539         ?C0156:
                                           ; SOURCE LINE # 864
0539 E4                CLR     A
053A FF                MOV     R7,A
053B 7E04              MOV     R6,#04H
053D FD                MOV     R5,A
053E FC                MOV     R4,A
053F AB00        R     MOV     R3,i_aux+03H
0541 AA00        R     MOV     R2,i_aux+02H
0543 A900        R     MOV     R1,i_aux+01H
0545 A800        R     MOV     R0,i_aux
0547 D3                SETB    C
0548 120000      E     LCALL   ?C?SLCMP
054B 400A              JC      ?C0157
                                           ; SOURCE LINE # 865
054D E4                CLR     A
054E F500        R     MOV     i_aux+03H,A
0550 750004      R     MOV     i_aux+02H,#04H
0553 F500        R     MOV     i_aux+01H,A
0555 F500        R     MOV     i_aux,A
0557         ?C0157:
                                           ; SOURCE LINE # 867
0557 AF00        R     MOV     R7,i_aux+03H
0559 AE00        R     MOV     R6,i_aux+02H
055B AD00        R     MOV     R5,i_aux+01H
055D AC00        R     MOV     R4,i_aux
055F 900000      E     MOV     DPTR,#g_meas+0FH
0562 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 869
0565 200003      E     JB      interrupt_flag,$ + 6H
0568 020000      R     LJMP    ?C0152
                                           ; SOURCE LINE # 870
056B C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 871
056D 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 872
                                           ; SOURCE LINE # 874
0570 020000      R     LJMP    ?C0152
                                           ; SOURCE LINE # 876
0573         ?C0160:
                                           ; SOURCE LINE # 877
0573 E4                CLR     A
0574 900000      R     MOV     DPTR,#emg_counter_1
0577 F0                MOVX    @DPTR,A
0578 A3                INC     DPTR
0579 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 878
057A FF                MOV     R7,A
057B FE                MOV     R6,A
057C FD                MOV     R5,A
057D FC                MOV     R4,A
057E 900000      E     MOV     DPTR,#g_mem+03CH
0581 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 879
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 69  

0584 750002      R     MOV     emg_1_status,#02H
                                           ; SOURCE LINE # 881
0587 020000      R     LJMP    ?C0152
                                           ; SOURCE LINE # 883
058A         ?C0161:
                                           ; SOURCE LINE # 884
058A 900000      R     MOV     DPTR,#emg_counter_1+01H
058D E0                MOVX    A,@DPTR
058E 04                INC     A
058F F0                MOVX    @DPTR,A
0590 7006              JNZ     ?C0218
0592 900000      R     MOV     DPTR,#emg_counter_1
0595 E0                MOVX    A,@DPTR
0596 04                INC     A
0597 F0                MOVX    @DPTR,A
0598         ?C0218:
                                           ; SOURCE LINE # 885
0598 900000      R     MOV     DPTR,#emg_counter_1
059B E0                MOVX    A,@DPTR
059C 6401              XRL     A,#01H
059E 7004              JNZ     ?C0219
05A0 A3                INC     DPTR
05A1 E0                MOVX    A,@DPTR
05A2 64F4              XRL     A,#0F4H
05A4         ?C0219:
05A4 6003              JZ      $ + 5H
05A6 020000      R     LJMP    ?C0152
                                           ; SOURCE LINE # 886
05A9 900000      R     MOV     DPTR,#emg_counter_1
05AC F0                MOVX    @DPTR,A
05AD A3                INC     DPTR
05AE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 888
05AF 7F01              MOV     R7,#01H
05B1 120000      E     LCALL   _LED_CTRL_Write
                                           ; SOURCE LINE # 889
05B4 E4                CLR     A
05B5 FF                MOV     R7,A
05B6 120000      E     LCALL   _LED_BLINK_EN_Write
                                           ; SOURCE LINE # 891
05B9 300005            JNB     interrupt_flag,?C0163
                                           ; SOURCE LINE # 892
05BC C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 893
05BE 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 894
05C1         ?C0163:
                                           ; SOURCE LINE # 896
05C1 750003      R     MOV     emg_1_status,#03H
                                           ; SOURCE LINE # 897
                                           ; SOURCE LINE # 898
05C4 020000      R     LJMP    ?C0152
                                           ; SOURCE LINE # 900
05C7         ?C0164:
                                           ; SOURCE LINE # 902
05C7 900000      R     MOV     DPTR,#emg_counter_1+01H
05CA E0                MOVX    A,@DPTR
05CB 04                INC     A
05CC F0                MOVX    @DPTR,A
05CD 7006              JNZ     ?C0220
05CF 900000      R     MOV     DPTR,#emg_counter_1
05D2 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 70  

05D3 04                INC     A
05D4 F0                MOVX    @DPTR,A
05D5         ?C0220:
                                           ; SOURCE LINE # 903
05D5 C3                CLR     C
05D6 900000      E     MOV     DPTR,#ADC_buf+04H
05D9 E0                MOVX    A,@DPTR
05DA 6480              XRL     A,#080H
05DC 9480              SUBB    A,#080H
05DE 5004              JNC     ?C0165
                                           ; SOURCE LINE # 904
05E0 E4                CLR     A
05E1 F0                MOVX    @DPTR,A
05E2 A3                INC     DPTR
05E3 F0                MOVX    @DPTR,A
05E4         ?C0165:
                                           ; SOURCE LINE # 905
05E4 900000      E     MOV     DPTR,#g_mem+03CH
05E7 E0                MOVX    A,@DPTR
05E8 F8                MOV     R0,A
05E9 A3                INC     DPTR
05EA E0                MOVX    A,@DPTR
05EB F9                MOV     R1,A
05EC A3                INC     DPTR
05ED E0                MOVX    A,@DPTR
05EE FA                MOV     R2,A
05EF A3                INC     DPTR
05F0 E0                MOVX    A,@DPTR
05F1 FB                MOV     R3,A
05F2 C000              PUSH    AR0
05F4 C001              PUSH    AR1
05F6 C002              PUSH    AR2
05F8 C003              PUSH    AR3
05FA 900000      E     MOV     DPTR,#ADC_buf+04H
05FD E0                MOVX    A,@DPTR
05FE FE                MOV     R6,A
05FF A3                INC     DPTR
0600 E0                MOVX    A,@DPTR
0601 FF                MOV     R7,A
0602 EE                MOV     A,R6
0603 33                RLC     A
0604 95E0              SUBB    A,ACC
0606 FD                MOV     R5,A
0607 FC                MOV     R4,A
0608 120000      E     LCALL   _filter_ch1
060B D003              POP     AR3
060D D002              POP     AR2
060F D001              POP     AR1
0611 D000              POP     AR0
0613 EB                MOV     A,R3
0614 2F                ADD     A,R7
0615 FF                MOV     R7,A
0616 EA                MOV     A,R2
0617 3E                ADDC    A,R6
0618 FE                MOV     R6,A
0619 E9                MOV     A,R1
061A 3D                ADDC    A,R5
061B FD                MOV     R5,A
061C E8                MOV     A,R0
061D 3C                ADDC    A,R4
061E FC                MOV     R4,A
061F 900000      E     MOV     DPTR,#g_mem+03CH
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 71  

0622 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 907
0625 300005            JNB     interrupt_flag,?C0166
                                           ; SOURCE LINE # 908
0628 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 909
062A 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 910
062D         ?C0166:
                                           ; SOURCE LINE # 912
062D 900000      R     MOV     DPTR,#emg_counter_1
0630 E0                MOVX    A,@DPTR
0631 6403              XRL     A,#03H
0633 7004              JNZ     ?C0221
0635 A3                INC     DPTR
0636 E0                MOVX    A,@DPTR
0637 64E8              XRL     A,#0E8H
0639         ?C0221:
0639 7039              JNZ     ?C0152
                                           ; SOURCE LINE # 913
063B 900000      E     MOV     DPTR,#g_mem+03CH
063E E0                MOVX    A,@DPTR
063F FC                MOV     R4,A
0640 A3                INC     DPTR
0641 E0                MOVX    A,@DPTR
0642 FD                MOV     R5,A
0643 A3                INC     DPTR
0644 E0                MOVX    A,@DPTR
0645 FE                MOV     R6,A
0646 A3                INC     DPTR
0647 E0                MOVX    A,@DPTR
0648 FF                MOV     R7,A
0649 E4                CLR     A
064A 7BE8              MOV     R3,#0E8H
064C 7A03              MOV     R2,#03H
064E F9                MOV     R1,A
064F F8                MOV     R0,A
0650 120000      E     LCALL   ?C?ULDIV
0653 900000      E     MOV     DPTR,#g_mem+03CH
0656 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 915
0659 300005            JNB     interrupt_flag,?C0168
                                           ; SOURCE LINE # 916
065C C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 917
065E 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 918
0661         ?C0168:
                                           ; SOURCE LINE # 920
0661 E4                CLR     A
0662 FF                MOV     R7,A
0663 120000      E     LCALL   _LED_CTRL_Write
                                           ; SOURCE LINE # 921
0666 E4                CLR     A
0667 FF                MOV     R7,A
0668 120000      E     LCALL   _LED_BLINK_EN_Write
                                           ; SOURCE LINE # 923
066B E4                CLR     A
066C 900000      R     MOV     DPTR,#emg_counter_1
066F F0                MOVX    @DPTR,A
0670 A3                INC     DPTR
0671 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 72  

                                           ; SOURCE LINE # 925
0672 F500        R     MOV     emg_1_status,A
                                           ; SOURCE LINE # 926
                                           ; SOURCE LINE # 927
                                           ; SOURCE LINE # 929
                                           ; SOURCE LINE # 930
                                           ; SOURCE LINE # 931
0674         ?C0152:
                                           ; SOURCE LINE # 933
0674 300005            JNB     interrupt_flag,?C0170
                                           ; SOURCE LINE # 934
0677 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 935
0679 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 936
067C         ?C0170:
                                           ; SOURCE LINE # 938
067C E500        R     MOV     A,emg_2_status
067E 14                DEC     A
067F 7003              JNZ     $ + 5H
0681 020000      R     LJMP    ?C0178
0684 14                DEC     A
0685 7003              JNZ     $ + 5H
0687 020000      R     LJMP    ?C0180
068A 14                DEC     A
068B 7003              JNZ     $ + 5H
068D 020000      R     LJMP    ?C0183
0690 14                DEC     A
0691 7003              JNZ     $ + 5H
0693 020000      R     LJMP    ?C0188
0696 14                DEC     A
0697 7003              JNZ     $ + 5H
0699 020000      R     LJMP    ?C0190
069C 2405              ADD     A,#05H
069E 6003              JZ      $ + 5H
06A0 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 939
06A3         ?C0172:
                                           ; SOURCE LINE # 940
06A3 900000      E     MOV     DPTR,#ADC_buf+06H
06A6 E0                MOVX    A,@DPTR
06A7 FE                MOV     R6,A
06A8 A3                INC     DPTR
06A9 E0                MOVX    A,@DPTR
06AA FF                MOV     R7,A
06AB EE                MOV     A,R6
06AC 33                RLC     A
06AD 95E0              SUBB    A,ACC
06AF 8F00        R     MOV     i_aux+03H,R7
06B1 8E00        R     MOV     i_aux+02H,R6
06B3 F500        R     MOV     i_aux+01H,A
06B5 F500        R     MOV     i_aux,A
                                           ; SOURCE LINE # 941
06B7 E4                CLR     A
06B8 FF                MOV     R7,A
06B9 FE                MOV     R6,A
06BA FD                MOV     R5,A
06BB FC                MOV     R4,A
06BC AB00        R     MOV     R3,i_aux+03H
06BE AA00        R     MOV     R2,i_aux+02H
06C0 A900        R     MOV     R1,i_aux+01H
06C2 A800        R     MOV     R0,i_aux
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 73  

06C4 C3                CLR     C
06C5 120000      E     LCALL   ?C?SLCMP
06C8 5009              JNC     ?C0173
                                           ; SOURCE LINE # 942
06CA E4                CLR     A
06CB F500        R     MOV     i_aux+03H,A
06CD F500        R     MOV     i_aux+02H,A
06CF F500        R     MOV     i_aux+01H,A
06D1 F500        R     MOV     i_aux,A
06D3         ?C0173:
                                           ; SOURCE LINE # 943
06D3 AF00        R     MOV     R7,i_aux+03H
06D5 AE00        R     MOV     R6,i_aux+02H
06D7 AD00        R     MOV     R5,i_aux+01H
06D9 AC00        R     MOV     R4,i_aux
06DB 120000      E     LCALL   _filter_ch2
06DE 8F00        R     MOV     i_aux+03H,R7
06E0 8E00        R     MOV     i_aux+02H,R6
06E2 8D00        R     MOV     i_aux+01H,R5
06E4 8C00        R     MOV     i_aux,R4
                                           ; SOURCE LINE # 944
06E6 780A              MOV     R0,#0AH
06E8 120000      E     LCALL   ?C?LSHL
06EB 900000      E     MOV     DPTR,#g_mem+040H
06EE E0                MOVX    A,@DPTR
06EF F8                MOV     R0,A
06F0 A3                INC     DPTR
06F1 E0                MOVX    A,@DPTR
06F2 F9                MOV     R1,A
06F3 A3                INC     DPTR
06F4 E0                MOVX    A,@DPTR
06F5 FA                MOV     R2,A
06F6 A3                INC     DPTR
06F7 E0                MOVX    A,@DPTR
06F8 FB                MOV     R3,A
06F9 120000      E     LCALL   ?C?ULDIV
06FC 8F00        R     MOV     i_aux+03H,R7
06FE 8E00        R     MOV     i_aux+02H,R6
0700 8D00        R     MOV     i_aux+01H,R5
0702 8C00        R     MOV     i_aux,R4
                                           ; SOURCE LINE # 946
0704 300005            JNB     interrupt_flag,?C0174
                                           ; SOURCE LINE # 947
0707 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 948
0709 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 949
070C         ?C0174:
                                           ; SOURCE LINE # 951
070C E4                CLR     A
070D FF                MOV     R7,A
070E FE                MOV     R6,A
070F FD                MOV     R5,A
0710 FC                MOV     R4,A
0711 AB00        R     MOV     R3,i_aux+03H
0713 AA00        R     MOV     R2,i_aux+02H
0715 A900        R     MOV     R1,i_aux+01H
0717 A800        R     MOV     R0,i_aux
0719 C3                CLR     C
071A 120000      E     LCALL   ?C?SLCMP
071D 500B              JNC     ?C0175
                                           ; SOURCE LINE # 952
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 74  

071F E4                CLR     A
0720 F500        R     MOV     i_aux+03H,A
0722 F500        R     MOV     i_aux+02H,A
0724 F500        R     MOV     i_aux+01H,A
0726 F500        R     MOV     i_aux,A
0728 801E              SJMP    ?C0176
072A         ?C0175:
                                           ; SOURCE LINE # 954
072A E4                CLR     A
072B FF                MOV     R7,A
072C 7E04              MOV     R6,#04H
072E FD                MOV     R5,A
072F FC                MOV     R4,A
0730 AB00        R     MOV     R3,i_aux+03H
0732 AA00        R     MOV     R2,i_aux+02H
0734 A900        R     MOV     R1,i_aux+01H
0736 A800        R     MOV     R0,i_aux
0738 D3                SETB    C
0739 120000      E     LCALL   ?C?SLCMP
073C 400A              JC      ?C0176
                                           ; SOURCE LINE # 955
073E E4                CLR     A
073F F500        R     MOV     i_aux+03H,A
0741 750004      R     MOV     i_aux+02H,#04H
0744 F500        R     MOV     i_aux+01H,A
0746 F500        R     MOV     i_aux,A
0748         ?C0176:
                                           ; SOURCE LINE # 957
0748 AF00        R     MOV     R7,i_aux+03H
074A AE00        R     MOV     R6,i_aux+02H
074C AD00        R     MOV     R5,i_aux+01H
074E AC00        R     MOV     R4,i_aux
0750 900000      E     MOV     DPTR,#g_meas+013H
0753 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 959
0756 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 961
0759         ?C0178:
                                           ; SOURCE LINE # 962
0759 E4                CLR     A
075A 900000      R     MOV     DPTR,#emg_counter_2
075D F0                MOVX    @DPTR,A
075E A3                INC     DPTR
075F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 963
0760 FF                MOV     R7,A
0761 FE                MOV     R6,A
0762 FD                MOV     R5,A
0763 FC                MOV     R4,A
0764 900000      E     MOV     DPTR,#g_mem+040H
0767 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 965
076A 300005            JNB     interrupt_flag,?C0179
                                           ; SOURCE LINE # 966
076D C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 967
076F 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 968
0772         ?C0179:
                                           ; SOURCE LINE # 970
0772 750004      R     MOV     emg_2_status,#04H
                                           ; SOURCE LINE # 971
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 75  

0775 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 973
0778         ?C0180:
                                           ; SOURCE LINE # 974
0778 900000      R     MOV     DPTR,#emg_counter_2+01H
077B E0                MOVX    A,@DPTR
077C 04                INC     A
077D F0                MOVX    @DPTR,A
077E 7006              JNZ     ?C0222
0780 900000      R     MOV     DPTR,#emg_counter_2
0783 E0                MOVX    A,@DPTR
0784 04                INC     A
0785 F0                MOVX    @DPTR,A
0786         ?C0222:
                                           ; SOURCE LINE # 975
0786 900000      R     MOV     DPTR,#emg_counter_2
0789 E0                MOVX    A,@DPTR
078A 6401              XRL     A,#01H
078C 7004              JNZ     ?C0223
078E A3                INC     DPTR
078F E0                MOVX    A,@DPTR
0790 64F4              XRL     A,#0F4H
0792         ?C0223:
0792 6003              JZ      $ + 5H
0794 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 976
0797 900000      R     MOV     DPTR,#emg_counter_2
079A F0                MOVX    @DPTR,A
079B A3                INC     DPTR
079C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 978
079D 7F01              MOV     R7,#01H
079F 120000      E     LCALL   _LED_CTRL_Write
                                           ; SOURCE LINE # 979
07A2 E4                CLR     A
07A3 FF                MOV     R7,A
07A4 120000      E     LCALL   _LED_BLINK_EN_Write
                                           ; SOURCE LINE # 981
07A7 300005            JNB     interrupt_flag,?C0182
                                           ; SOURCE LINE # 982
07AA C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 983
07AC 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 984
07AF         ?C0182:
                                           ; SOURCE LINE # 986
07AF 750003      R     MOV     emg_2_status,#03H
                                           ; SOURCE LINE # 987
                                           ; SOURCE LINE # 988
07B2 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 990
07B5         ?C0183:
                                           ; SOURCE LINE # 992
07B5 900000      R     MOV     DPTR,#emg_counter_2+01H
07B8 E0                MOVX    A,@DPTR
07B9 04                INC     A
07BA F0                MOVX    @DPTR,A
07BB 7006              JNZ     ?C0224
07BD 900000      R     MOV     DPTR,#emg_counter_2
07C0 E0                MOVX    A,@DPTR
07C1 04                INC     A
07C2 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 76  

07C3         ?C0224:
                                           ; SOURCE LINE # 993
07C3 C3                CLR     C
07C4 900000      E     MOV     DPTR,#ADC_buf+06H
07C7 E0                MOVX    A,@DPTR
07C8 6480              XRL     A,#080H
07CA 9480              SUBB    A,#080H
07CC 5004              JNC     ?C0184
                                           ; SOURCE LINE # 994
07CE E4                CLR     A
07CF F0                MOVX    @DPTR,A
07D0 A3                INC     DPTR
07D1 F0                MOVX    @DPTR,A
07D2         ?C0184:
                                           ; SOURCE LINE # 995
07D2 900000      E     MOV     DPTR,#g_mem+040H
07D5 E0                MOVX    A,@DPTR
07D6 F8                MOV     R0,A
07D7 A3                INC     DPTR
07D8 E0                MOVX    A,@DPTR
07D9 F9                MOV     R1,A
07DA A3                INC     DPTR
07DB E0                MOVX    A,@DPTR
07DC FA                MOV     R2,A
07DD A3                INC     DPTR
07DE E0                MOVX    A,@DPTR
07DF FB                MOV     R3,A
07E0 C000              PUSH    AR0
07E2 C001              PUSH    AR1
07E4 C002              PUSH    AR2
07E6 C003              PUSH    AR3
07E8 900000      E     MOV     DPTR,#ADC_buf+06H
07EB E0                MOVX    A,@DPTR
07EC FE                MOV     R6,A
07ED A3                INC     DPTR
07EE E0                MOVX    A,@DPTR
07EF FF                MOV     R7,A
07F0 EE                MOV     A,R6
07F1 33                RLC     A
07F2 95E0              SUBB    A,ACC
07F4 FD                MOV     R5,A
07F5 FC                MOV     R4,A
07F6 120000      E     LCALL   _filter_ch2
07F9 D003              POP     AR3
07FB D002              POP     AR2
07FD D001              POP     AR1
07FF D000              POP     AR0
0801 EB                MOV     A,R3
0802 2F                ADD     A,R7
0803 FF                MOV     R7,A
0804 EA                MOV     A,R2
0805 3E                ADDC    A,R6
0806 FE                MOV     R6,A
0807 E9                MOV     A,R1
0808 3D                ADDC    A,R5
0809 FD                MOV     R5,A
080A E8                MOV     A,R0
080B 3C                ADDC    A,R4
080C FC                MOV     R4,A
080D 900000      E     MOV     DPTR,#g_mem+040H
0810 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 997
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 77  

0813 300005            JNB     interrupt_flag,?C0185
                                           ; SOURCE LINE # 998
0816 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 999
0818 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 1000
081B         ?C0185:
                                           ; SOURCE LINE # 1002
081B 900000      R     MOV     DPTR,#emg_counter_2
081E E0                MOVX    A,@DPTR
081F 6403              XRL     A,#03H
0821 7004              JNZ     ?C0225
0823 A3                INC     DPTR
0824 E0                MOVX    A,@DPTR
0825 64E8              XRL     A,#0E8H
0827         ?C0225:
0827 6003              JZ      $ + 5H
0829 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 1003
082C 900000      E     MOV     DPTR,#g_mem+040H
082F E0                MOVX    A,@DPTR
0830 FC                MOV     R4,A
0831 A3                INC     DPTR
0832 E0                MOVX    A,@DPTR
0833 FD                MOV     R5,A
0834 A3                INC     DPTR
0835 E0                MOVX    A,@DPTR
0836 FE                MOV     R6,A
0837 A3                INC     DPTR
0838 E0                MOVX    A,@DPTR
0839 FF                MOV     R7,A
083A E4                CLR     A
083B 7BE8              MOV     R3,#0E8H
083D 7A03              MOV     R2,#03H
083F F9                MOV     R1,A
0840 F8                MOV     R0,A
0841 120000      E     LCALL   ?C?ULDIV
0844 900000      E     MOV     DPTR,#g_mem+040H
0847 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 1005
084A E4                CLR     A
084B FF                MOV     R7,A
084C 120000      E     LCALL   _LED_CTRL_Write
                                           ; SOURCE LINE # 1006
084F E4                CLR     A
0850 FF                MOV     R7,A
0851 120000      E     LCALL   _LED_BLINK_EN_Write
                                           ; SOURCE LINE # 1008
0854 E4                CLR     A
0855 900000      R     MOV     DPTR,#emg_counter_2
0858 F0                MOVX    @DPTR,A
0859 A3                INC     DPTR
085A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1010
085B 300005            JNB     interrupt_flag,?C0187
                                           ; SOURCE LINE # 1011
085E C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 1012
0860 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 1013
0863         ?C0187:
                                           ; SOURCE LINE # 1015
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 78  

0863 750005      R     MOV     emg_2_status,#05H
                                           ; SOURCE LINE # 1016
                                           ; SOURCE LINE # 1017
0866 8075              SJMP    ?C0171
                                           ; SOURCE LINE # 1019
0868         ?C0188:
                                           ; SOURCE LINE # 1020
0868 E500        R     MOV     A,emg_1_status
086A 7071              JNZ     ?C0171
                                           ; SOURCE LINE # 1021
086C 750002      R     MOV     emg_2_status,#02H
                                           ; SOURCE LINE # 1022
086F 806C              SJMP    ?C0171
                                           ; SOURCE LINE # 1024
0871         ?C0190:
                                           ; SOURCE LINE # 1025
0871 900000      R     MOV     DPTR,#emg_counter_2+01H
0874 E0                MOVX    A,@DPTR
0875 04                INC     A
0876 F0                MOVX    @DPTR,A
0877 7006              JNZ     ?C0226
0879 900000      R     MOV     DPTR,#emg_counter_2
087C E0                MOVX    A,@DPTR
087D 04                INC     A
087E F0                MOVX    @DPTR,A
087F         ?C0226:
                                           ; SOURCE LINE # 1026
087F 900000      R     MOV     DPTR,#emg_counter_2
0882 E0                MOVX    A,@DPTR
0883 6401              XRL     A,#01H
0885 7004              JNZ     ?C0227
0887 A3                INC     DPTR
0888 E0                MOVX    A,@DPTR
0889 64F4              XRL     A,#0F4H
088B         ?C0227:
088B 7050              JNZ     ?C0171
                                           ; SOURCE LINE # 1027
088D 900000      R     MOV     DPTR,#emg_counter_2
0890 F0                MOVX    @DPTR,A
0891 A3                INC     DPTR
0892 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1029
0893 300005            JNB     interrupt_flag,?C0192
                                           ; SOURCE LINE # 1030
0896 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 1031
0898 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 1032
089B         ?C0192:
                                           ; SOURCE LINE # 1035
089B 900000      E     MOV     DPTR,#c_mem+02H
089E E0                MOVX    A,@DPTR
089F FF                MOV     R7,A
08A0 6402              XRL     A,#02H
08A2 600E              JZ      ?C0194
08A4 EF                MOV     A,R7
08A5 6403              XRL     A,#03H
08A7 6009              JZ      ?C0194
08A9 EF                MOV     A,R7
08AA 6404              XRL     A,#04H
08AC 6004              JZ      ?C0194
08AE EF                MOV     A,R7
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 79  

08AF B40528            CJNE    A,#05H,?C0193
08B2         ?C0194:
                                           ; SOURCE LINE # 1038
                                           ; SOURCE LINE # 1039
08B2 900000      E     MOV     DPTR,#g_meas
08B5 E0                MOVX    A,@DPTR
08B6 FC                MOV     R4,A
08B7 A3                INC     DPTR
08B8 E0                MOVX    A,@DPTR
08B9 FD                MOV     R5,A
08BA A3                INC     DPTR
08BB E0                MOVX    A,@DPTR
08BC FE                MOV     R6,A
08BD A3                INC     DPTR
08BE E0                MOVX    A,@DPTR
08BF FF                MOV     R7,A
08C0 900000      E     MOV     DPTR,#g_ref
08C3 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 1040
08C6 900000      E     MOV     DPTR,#g_meas+04H
08C9 E0                MOVX    A,@DPTR
08CA FC                MOV     R4,A
08CB A3                INC     DPTR
08CC E0                MOVX    A,@DPTR
08CD FD                MOV     R5,A
08CE A3                INC     DPTR
08CF E0                MOVX    A,@DPTR
08D0 FE                MOV     R6,A
08D1 A3                INC     DPTR
08D2 E0                MOVX    A,@DPTR
08D3 FF                MOV     R7,A
08D4 900000      E     MOV     DPTR,#g_ref+04H
08D7 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 1041
08DA         ?C0193:
                                           ; SOURCE LINE # 1043
08DA E4                CLR     A
08DB F500        R     MOV     emg_2_status,A
                                           ; SOURCE LINE # 1044
                                           ; SOURCE LINE # 1045
                                           ; SOURCE LINE # 1047
                                           ; SOURCE LINE # 1048
                                           ; SOURCE LINE # 1049
08DD         ?C0171:
                                           ; SOURCE LINE # 1051
08DD 300048            JNB     interrupt_flag,?C0197
                                           ; SOURCE LINE # 1052
08E0 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 1053
08E2 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 1054
                                           ; SOURCE LINE # 1055
                                           ; SOURCE LINE # 1056
08E5 8041              SJMP    ?C0197
08E7         ?C0112:
                                           ; SOURCE LINE # 1057
                                           ; SOURCE LINE # 1059
08E7 750001      R     MOV     emg_1_status,#01H
                                           ; SOURCE LINE # 1060
08EA 750001      R     MOV     emg_2_status,#01H
                                           ; SOURCE LINE # 1062
08ED 750001      R     MOV     UD_status,#01H
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 80  

                                           ; SOURCE LINE # 1063
08F0 750001      R     MOV     LR_status,#01H
                                           ; SOURCE LINE # 1065
08F3 C200        E     CLR     tension_valid
                                           ; SOURCE LINE # 1068
08F5 7F01              MOV     R7,#01H
08F7 120000      E     LCALL   _LED_CTRL_Write
                                           ; SOURCE LINE # 1070
08FA E4                CLR     A
08FB FF                MOV     R7,A
08FC 120000      E     LCALL   _LED_BLINK_EN_Write
                                           ; SOURCE LINE # 1072
08FF 300005            JNB     interrupt_flag,?C0198
                                           ; SOURCE LINE # 1073
0902 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 1074
0904 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 1075
0907         ?C0198:
                                           ; SOURCE LINE # 1077
                                           ; SOURCE LINE # 1078
                                           ; SOURCE LINE # 1081
                                           ; SOURCE LINE # 1082
                                           ; SOURCE LINE # 1083
0907         ?C0199:
                                           ; SOURCE LINE # 1086
0907 E4                CLR     A
0908 FF                MOV     R7,A
0909 FE                MOV     R6,A
090A FD                MOV     R5,A
090B FC                MOV     R4,A
090C 900000      E     MOV     DPTR,#g_meas+0FH
090F 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 1087
0912 E4                CLR     A
0913 FF                MOV     R7,A
0914 FE                MOV     R6,A
0915 FD                MOV     R5,A
0916 FC                MOV     R4,A
0917 900000      E     MOV     DPTR,#g_meas+013H
091A 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 1090
091D E4                CLR     A
091E 900000      E     MOV     DPTR,#g_meas+02FH
0921 F0                MOVX    @DPTR,A
0922 A3                INC     DPTR
0923 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1091
0924 A3                INC     DPTR
0925 F0                MOVX    @DPTR,A
0926 A3                INC     DPTR
0927 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1093
0928         ?C0197:
                                           ; SOURCE LINE # 1096
0928 900000      E     MOV     DPTR,#first_tension_valid
092B E0                MOVX    A,@DPTR
092C 6003              JZ      $ + 5H
092E 020000      R     LJMP    ?C0202
0931 200003      E     JB      tension_valid,$ + 6H
0934 020000      R     LJMP    ?C0202
0937 E500        R     MOV     A,emg_1_status
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 81  

0939 6003              JZ      $ + 5H
093B 020000      R     LJMP    ?C0202
093E E500        R     MOV     A,emg_2_status
0940 6003              JZ      $ + 5H
0942 020000      R     LJMP    ?C0202
                                           ; SOURCE LINE # 1097
0945 900000      E     MOV     DPTR,#dev_tension
0948 E0                MOVX    A,@DPTR
0949 FC                MOV     R4,A
094A A3                INC     DPTR
094B E0                MOVX    A,@DPTR
094C FD                MOV     R5,A
094D A3                INC     DPTR
094E E0                MOVX    A,@DPTR
094F FE                MOV     R6,A
0950 A3                INC     DPTR
0951 E0                MOVX    A,@DPTR
0952 FF                MOV     R7,A
0953 120000      E     LCALL   _filter_voltage
0956 900000      E     MOV     DPTR,#dev_tension_f
0959 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 1098
095C 900000      E     MOV     DPTR,#pow_tension
095F E0                MOVX    A,@DPTR
0960 FC                MOV     R4,A
0961 A3                INC     DPTR
0962 E0                MOVX    A,@DPTR
0963 FD                MOV     R5,A
0964 A3                INC     DPTR
0965 E0                MOVX    A,@DPTR
0966 FE                MOV     R6,A
0967 A3                INC     DPTR
0968 E0                MOVX    A,@DPTR
0969 FF                MOV     R7,A
096A EC                MOV     A,R4
096B 120000      E     LCALL   ?C?FCASTL
096E 7B1F              MOV     R3,#01FH
0970 7A85              MOV     R2,#085H
0972 796B              MOV     R1,#06BH
0974 783F              MOV     R0,#03FH
0976 120000      E     LCALL   ?C?FPMUL
0979 C004              PUSH    AR4
097B C005              PUSH    AR5
097D C006              PUSH    AR6
097F C007              PUSH    AR7
0981 900000      E     MOV     DPTR,#dev_tension_f
0984 E0                MOVX    A,@DPTR
0985 FC                MOV     R4,A
0986 A3                INC     DPTR
0987 E0                MOVX    A,@DPTR
0988 FD                MOV     R5,A
0989 A3                INC     DPTR
098A E0                MOVX    A,@DPTR
098B FE                MOV     R6,A
098C A3                INC     DPTR
098D E0                MOVX    A,@DPTR
098E FF                MOV     R7,A
098F EC                MOV     A,R4
0990 120000      E     LCALL   ?C?FCASTL
0993 A804              MOV     R0,AR4
0995 A905              MOV     R1,AR5
0997 AA06              MOV     R2,AR6
C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 82  

0999 AB07              MOV     R3,AR7
099B D007              POP     AR7
099D D006              POP     AR6
099F D005              POP     AR5
09A1 D004              POP     AR4
09A3 120000      E     LCALL   ?C?FPCMP3
09A6 600E              JZ      ?C0203
09A8 400C              JC      ?C0203
                                           ; SOURCE LINE # 1100
09AA 7F01              MOV     R7,#01H
09AC 120000      E     LCALL   _LED_CTRL_Write
                                           ; SOURCE LINE # 1103
09AF E4                CLR     A
09B0 FF                MOV     R7,A
09B1 120000      E     LCALL   _LED_BLINK_EN_Write
                                           ; SOURCE LINE # 1104
09B4 8020              SJMP    ?C0202
09B6         ?C0203:
                                           ; SOURCE LINE # 1105
                                           ; SOURCE LINE # 1107
09B6 E4                CLR     A
09B7 FF                MOV     R7,A
09B8 120000      E     LCALL   _LED_CTRL_Write
                                           ; SOURCE LINE # 1110
09BB 7F01              MOV     R7,#01H
09BD 120000      E     LCALL   _LED_BLINK_EN_Write
                                           ; SOURCE LINE # 1113
09C0 900000      E     MOV     DPTR,#master_mode
09C3 E0                MOVX    A,@DPTR
09C4 6010              JZ      ?C0202
                                           ; SOURCE LINE # 1114
09C6 120000      E     LCALL   deactivate_slaves
                                           ; SOURCE LINE # 1117
09C9 300005            JNB     interrupt_flag,?C0206
                                           ; SOURCE LINE # 1118
09CC C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 1119
09CE 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 1120
09D1         ?C0206:
                                           ; SOURCE LINE # 1122
09D1 E4                CLR     A
09D2 900000      E     MOV     DPTR,#master_mode
09D5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1123
                                           ; SOURCE LINE # 1124
                                           ; SOURCE LINE # 1125
09D6         ?C0202:
                                           ; SOURCE LINE # 1127
09D6 300005            JNB     interrupt_flag,?C0208
                                           ; SOURCE LINE # 1128
09D9 C200        E     CLR     interrupt_flag
                                           ; SOURCE LINE # 1129
09DB 120000      R     LCALL   interrupt_manager
                                           ; SOURCE LINE # 1130
                                           ; SOURCE LINE # 1131
09DE         ?C0208:
09DE 22                RET     
             ; FUNCTION analog_read_end (END)



C51 COMPILER V9.51   INTERRUPTIONS                                                         02/14/2023 11:08:54 PAGE 83  

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5206    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    140    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     22      22
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
